{"version":3,"file":"main.js","sources":["../node_modules/plugma/dist/testing/figma/test-context.js","../node_modules/plugma/dist/testing/figma/vitest/expect.js","../node_modules/plugma/dist/testing/figma/nodeToObject.js","../node_modules/plugma/dist/testing/figma/registry.js","../node_modules/plugma/dist/testing/figma/handlers.js","../virtual:plugma","../source-foundation/src/utils/flatten-object.ts","../node_modules/chroma-js/src/utils/limit.js","../node_modules/chroma-js/src/utils/clip_rgb.js","../node_modules/chroma-js/src/utils/type.js","../node_modules/chroma-js/src/utils/unpack.js","../node_modules/chroma-js/src/utils/last.js","../node_modules/chroma-js/src/utils/index.js","../node_modules/chroma-js/src/io/input.js","../node_modules/chroma-js/src/Color.js","../node_modules/chroma-js/src/version.js","../node_modules/chroma-js/src/chroma.js","../node_modules/chroma-js/src/colors/w3cx11.js","../node_modules/chroma-js/src/io/hex/hex2rgb.js","../node_modules/chroma-js/src/io/hex/rgb2hex.js","../node_modules/chroma-js/src/io/named/index.js","../node_modules/chroma-js/src/ops/alpha.js","../node_modules/chroma-js/src/ops/clipped.js","../node_modules/chroma-js/src/io/lab/lab-constants.js","../node_modules/chroma-js/src/io/lab/lab2rgb.js","../node_modules/chroma-js/src/io/lab/rgb2lab.js","../node_modules/chroma-js/src/io/lab/index.js","../node_modules/chroma-js/src/ops/darken.js","../node_modules/chroma-js/src/ops/get.js","../node_modules/chroma-js/src/ops/luminance.js","../node_modules/chroma-js/src/interpolator/index.js","../node_modules/chroma-js/src/generator/mix.js","../node_modules/chroma-js/src/ops/mix.js","../node_modules/chroma-js/src/ops/premultiply.js","../node_modules/chroma-js/src/io/lch/lch2lab.js","../node_modules/chroma-js/src/io/lch/lch2rgb.js","../node_modules/chroma-js/src/io/lch/hcl2rgb.js","../node_modules/chroma-js/src/io/lch/lab2lch.js","../node_modules/chroma-js/src/io/lch/rgb2lch.js","../node_modules/chroma-js/src/io/lch/index.js","../node_modules/chroma-js/src/ops/saturate.js","../node_modules/chroma-js/src/ops/set.js","../node_modules/chroma-js/src/ops/shade.js","../node_modules/chroma-js/src/interpolator/rgb.js","../node_modules/chroma-js/src/interpolator/lrgb.js","../node_modules/chroma-js/src/interpolator/lab.js","../node_modules/chroma-js/src/interpolator/_hsx.js","../node_modules/chroma-js/src/interpolator/lch.js","../node_modules/chroma-js/src/io/num/num2rgb.js","../node_modules/chroma-js/src/io/num/rgb2num.js","../node_modules/chroma-js/src/io/num/index.js","../node_modules/chroma-js/src/interpolator/num.js","../node_modules/chroma-js/src/io/hcg/hcg2rgb.js","../node_modules/chroma-js/src/io/hcg/rgb2hcg.js","../node_modules/chroma-js/src/io/hcg/index.js","../node_modules/chroma-js/src/interpolator/hcg.js","../node_modules/chroma-js/src/io/hsi/hsi2rgb.js","../node_modules/chroma-js/src/io/hsi/rgb2hsi.js","../node_modules/chroma-js/src/io/hsi/index.js","../node_modules/chroma-js/src/interpolator/hsi.js","../node_modules/chroma-js/src/io/hsl/hsl2rgb.js","../node_modules/chroma-js/src/io/hsl/rgb2hsl.js","../node_modules/chroma-js/src/io/hsl/index.js","../node_modules/chroma-js/src/interpolator/hsl.js","../node_modules/chroma-js/src/io/hsv/hsv2rgb.js","../node_modules/chroma-js/src/io/hsv/rgb2hsv.js","../node_modules/chroma-js/src/io/hsv/index.js","../node_modules/chroma-js/src/interpolator/hsv.js","../node_modules/chroma-js/src/utils/multiply-matrices.js","../node_modules/chroma-js/src/io/oklab/oklab2rgb.js","../node_modules/chroma-js/src/io/oklab/rgb2oklab.js","../node_modules/chroma-js/src/io/oklab/index.js","../node_modules/chroma-js/src/interpolator/oklab.js","../node_modules/chroma-js/src/interpolator/oklch.js","../node_modules/chroma-js/src/generator/average.js","../node_modules/chroma-js/src/generator/scale.js","../node_modules/chroma-js/src/generator/bezier.js","../node_modules/chroma-js/src/io/rgb/index.js","../node_modules/chroma-js/src/generator/blend.js","../node_modules/chroma-js/src/generator/cubehelix.js","../node_modules/chroma-js/src/generator/random.js","../node_modules/chroma-js/src/utils/analyze.js","../node_modules/chroma-js/src/utils/contrast.js","../node_modules/chroma-js/src/utils/contrastAPCA.js","../node_modules/chroma-js/src/utils/delta-e.js","../node_modules/chroma-js/src/utils/distance.js","../node_modules/chroma-js/src/utils/valid.js","../node_modules/chroma-js/src/utils/scales.js","../node_modules/chroma-js/src/colors/colorbrewer.js","../node_modules/chroma-js/src/io/cmyk/cmyk2rgb.js","../node_modules/chroma-js/src/io/cmyk/rgb2cmyk.js","../node_modules/chroma-js/src/io/cmyk/index.js","../node_modules/chroma-js/src/io/css/hsl2css.js","../node_modules/chroma-js/src/io/css/lab2css.js","../node_modules/chroma-js/src/io/css/lch2css.js","../node_modules/chroma-js/src/io/css/oklab2css.js","../node_modules/chroma-js/src/io/oklch/rgb2oklch.js","../node_modules/chroma-js/src/io/css/oklch2css.js","../node_modules/chroma-js/src/io/css/rgb2css.js","../node_modules/chroma-js/src/io/oklch/oklch2rgb.js","../node_modules/chroma-js/src/io/css/css2rgb.js","../node_modules/chroma-js/src/io/css/index.js","../node_modules/chroma-js/src/io/gl/index.js","../node_modules/chroma-js/src/io/hex/index.js","../node_modules/chroma-js/src/io/temp/temperature2rgb.js","../node_modules/chroma-js/src/io/temp/rgb2temperature.js","../node_modules/chroma-js/src/io/temp/index.js","../node_modules/chroma-js/src/io/oklch/index.js","../node_modules/chroma-js/index.js","../source-foundation/src/defaults.ts","../source-foundation/src/utils/themes-store.ts","../source-foundation/src/utils/figma-library-variables.ts","../source-foundation/src/utils/figma-variables.ts","../source-foundation/src/utils/token-references.ts","../source-foundation/src/color-generators/accent-palette-generator.ts","../source-foundation/src/utils/round-decimals.ts","../source-foundation/src/color-generators/swatches-generator.ts","../source-foundation/src/color-generators/neutrals-palette-generator.ts","../source-foundation/src/utils/clone.ts","../source-foundation/src/utils/figma-colors.ts","../source-foundation/src/spacing-tokens.ts","../source-foundation/src/radii-tokens.ts","../source-foundation/src/typography-tokens.ts","../source-foundation/src/sizing-tokens.ts","../source-foundation/src/utils/delay-async.ts","../source-foundation/src/effect-tokens.ts","../source-foundation/src/opacity-tokens.ts","../source-foundation/src/utils/sort-tokens.ts","../source-foundation/src/utils/figma-text-styles.ts","../source-foundation/src/utils/text-to-title-case.ts","../source-foundation/src/utils/figma-effect-styles.ts","../source-foundation/src/import-tokens.ts","../source-foundation/src/utils/merge-deep.ts","../source-foundation/src/color-tokens.ts","../source-foundation/src/color-generators/render-accents.ts","../source-foundation/src/import-export-json.ts","../source-foundation/src/main.ts","../../../../../private/var/folders/8c/_k5_5lrx1290r812ly9ccl_w0000gn/T/temp_1751436404150.js"],"sourcesContent":["/**\n * Test context management for the Plugma runtime environment.\n * Provides a thread-safe way to manage test state during execution.\n *\n * @module TestContext\n */\n/**\n * Manages the current test context in a thread-safe way.\n * This is used internally by the test registry to track the currently executing test.\n */\nclass TestContextManager {\n    _current = null;\n    /**\n     * Get the current test context\n     * @throws {Error} If no test context is set\n     */\n    get current() {\n        if (!this._current) {\n            throw new Error('No test context set');\n        }\n        return this._current;\n    }\n    /**\n     * Set the current test context\n     * @param context - The test context to set\n     */\n    set current(context) {\n        this._current = context;\n    }\n    /**\n     * Reset the test context to its initial state\n     * This should be called after each test completes\n     */\n    reset() {\n        this._current = null;\n    }\n    /**\n     * Check if a test context is currently set\n     */\n    hasContext() {\n        return this._current !== null;\n    }\n}\n/**\n * Singleton instance of the test context manager\n */\nexport const testContext = new TestContextManager();\n//# sourceMappingURL=test-context.js.map","import { testContext } from '../test-context.js';\n/**\n * Global test context tracking current test state\n */\nexport const currentTest = {\n    name: '',\n    assertions: [],\n    startTime: 0,\n    endTime: null,\n    duration: null,\n};\n/**\n * Serializes values for safe code generation\n */\nfunction serializeValue(value) {\n    // Handle Figma nodes\n    if (value && typeof value === 'object') {\n        if ('type' in value && 'id' in value) {\n            return `{ type: '${value.type}', id: '${value.id}' }`;\n        }\n        return JSON.stringify(value);\n    }\n    // Handle special identifiers\n    if (typeof value === 'string' && value.startsWith('test-id-')) {\n        return `'${value}'`;\n    }\n    // Handle primitives\n    return JSON.stringify(value);\n}\n/**\n * Creates a chain-recording proxy for assertion operations\n * @param value - Initial value passed to expect()\n * @returns Proxy that records all assertion operations\n *\n * @example\n * const proxy = createExpectProxy(5);\n * proxy.toBe(3); // Records [['expect', [5]], ['toBe', [3]]]\n */\nconst createExpectProxy = (value) => {\n    let code = `expect(${serializeValue(value)})`;\n    const currentValue = value;\n    const handler = {\n        get(target, prop, receiver) {\n            if (typeof prop === 'symbol') {\n                if (prop === Symbol.toStringTag)\n                    return target[Symbol.toStringTag];\n                if (prop === Symbol.toPrimitive)\n                    return () => code;\n                return Reflect.get(target, prop, receiver);\n            }\n            if (prop === 'toJSON')\n                return () => code;\n            code += `.${prop}`;\n            return receiver;\n        },\n        apply(target, thisArg, args) {\n            code += `(${args.map(serializeValue).join(', ')})`;\n            testContext.current.assertions.push(code);\n            // Reset chain with current value\n            code = `expect(${serializeValue(currentValue)})`;\n            return thisArg;\n        },\n    };\n    const proxyTarget = () => { };\n    proxyTarget[Symbol.toStringTag] = 'ExpectProxy';\n    return new Proxy(proxyTarget, handler);\n};\n/**\n * Vitest-compatible expect function replacement\n *\n * Provides:\n * - Full TypeScript type safety\n * - IDE autocompletion\n * - Chain recording for all assertions\n *\n * @example\n * expect(5).toBeGreaterThan(3) // Recorded as ChainArray\n */\nexport const expect = ((value) => {\n    return createExpectProxy(value);\n});\n//# sourceMappingURL=expect.js.map","/// <reference types=\"@figma/plugin-typings\" />\n// Helper function to check if a value is a Figma node\nfunction isFigmaNode(value) {\n    return value && typeof value === 'object' && 'type' in value;\n}\n// Helper function to check if a node can have component properties\nfunction canHaveComponentProperties(node) {\n    return node.type === 'COMPONENT_SET' || (node.type === 'COMPONENT' && !node.parent?.type?.includes('COMPONENT_SET'));\n}\n// Helper function to serialize a Figma paint\nfunction serializePaint(paint) {\n    if (!paint)\n        return null;\n    const result = {\n        type: paint.type,\n        visible: paint.visible,\n        opacity: paint.opacity,\n    };\n    if ('blendMode' in paint) {\n        result.blendMode = paint.blendMode;\n    }\n    switch (paint.type) {\n        case 'SOLID':\n            result.color = {\n                r: paint.color.r,\n                g: paint.color.g,\n                b: paint.color.b,\n            };\n            break;\n        case 'GRADIENT_LINEAR':\n        case 'GRADIENT_RADIAL':\n        case 'GRADIENT_ANGULAR':\n        case 'GRADIENT_DIAMOND':\n            result.gradientStops = paint.gradientStops.map((stop) => ({\n                position: stop.position,\n                color: {\n                    r: stop.color.r,\n                    g: stop.color.g,\n                    b: stop.color.b,\n                    a: stop.color.a,\n                },\n            }));\n            result.gradientTransform = paint.gradientTransform;\n            break;\n        case 'IMAGE':\n            result.scaleMode = paint.scaleMode;\n            result.imageHash = paint.imageHash;\n            result.filters = paint.filters;\n            break;\n    }\n    return result;\n}\n// Helper function to serialize a Figma effect\nfunction serializeEffect(effect) {\n    if (!effect)\n        return null;\n    const result = {\n        type: effect.type,\n        visible: effect.visible,\n    };\n    if ('blendMode' in effect) {\n        result.blendMode = effect.blendMode;\n    }\n    switch (effect.type) {\n        case 'DROP_SHADOW':\n        case 'INNER_SHADOW':\n            result.color = {\n                r: effect.color.r,\n                g: effect.color.g,\n                b: effect.color.b,\n                a: effect.color.a,\n            };\n            result.offset = effect.offset;\n            result.radius = effect.radius;\n            result.spread = effect.spread;\n            break;\n        case 'LAYER_BLUR':\n        case 'BACKGROUND_BLUR':\n            result.radius = effect.radius;\n            break;\n    }\n    return result;\n}\n// Helper function to serialize a Figma constraint\nfunction serializeConstraint(constraint) {\n    if (!constraint)\n        return null;\n    return {\n        type: constraint.type,\n        value: constraint.value,\n    };\n}\n// Helper function to serialize a Figma layout mode\nfunction serializeLayoutMode(layoutMode) {\n    if (!layoutMode)\n        return null;\n    return {\n        type: layoutMode.type,\n        primaryAxisSizingMode: layoutMode.primaryAxisSizingMode,\n        counterAxisSizingMode: layoutMode.counterAxisSizingMode,\n        primaryAxisAlignItems: layoutMode.primaryAxisAlignItems,\n        counterAxisAlignItems: layoutMode.counterAxisAlignItems,\n        paddingLeft: layoutMode.paddingLeft,\n        paddingRight: layoutMode.paddingRight,\n        paddingTop: layoutMode.paddingTop,\n        paddingBottom: layoutMode.paddingBottom,\n        itemSpacing: layoutMode.itemSpacing,\n    };\n}\n// Helper function to check if a node has layout properties\nfunction hasLayoutProperties(node) {\n    return ['FRAME', 'COMPONENT', 'COMPONENT_SET', 'INSTANCE'].includes(node.type);\n}\nexport function nodeToObject(node, seen = new WeakSet()) {\n    // Handle array of nodes\n    if (Array.isArray(node)) {\n        return node.map((item) => nodeToObject(item, seen));\n    }\n    // Handle circular references\n    if (seen.has(node)) {\n        return { type: node.type, id: node.id, name: node.name, _circular: true };\n    }\n    seen.add(node);\n    let result = {\n        type: node.type,\n        id: node.id,\n        name: node.name,\n    };\n    try {\n        // Common properties for all nodes\n        if ('visible' in node)\n            result.visible = node.visible;\n        if ('locked' in node)\n            result.locked = node.locked;\n        if ('opacity' in node)\n            result.opacity = node.opacity;\n        if ('blendMode' in node)\n            result.blendMode = node.blendMode;\n        if ('preserveRatio' in node)\n            result.preserveRatio = node.preserveRatio;\n        if ('layoutAlign' in node)\n            result.layoutAlign = node.layoutAlign;\n        if ('layoutGrow' in node)\n            result.layoutGrow = node.layoutGrow;\n        if ('constraints' in node)\n            result.constraints = serializeConstraint(node.constraints);\n        if ('layoutMode' in node)\n            result.layoutMode = serializeLayoutMode(node.layoutMode);\n        // Type-specific properties\n        switch (node.type) {\n            case 'RECTANGLE':\n            case 'ELLIPSE':\n            case 'POLYGON':\n            case 'STAR':\n            case 'VECTOR':\n            case 'LINE':\n            case 'TEXT':\n                result.fills = Array.isArray(node.fills) ? node.fills.map(serializePaint) : [];\n                result.strokes = Array.isArray(node.strokes) ? node.strokes.map(serializePaint) : [];\n                result.strokeWeight = node.strokeWeight;\n                result.strokeAlign = node.strokeAlign;\n                result.strokeCap = node.strokeCap;\n                result.strokeJoin = node.strokeJoin;\n                result.strokeMiterLimit = node.strokeMiterLimit;\n                result.dashPattern = node.dashPattern;\n                result.effects = Array.isArray(node.effects) ? node.effects.map(serializeEffect) : [];\n                result.size = { x: node.width, y: node.height };\n                result.rotation = node.rotation;\n                result.x = node.x;\n                result.y = node.y;\n                break;\n            case 'TEXT':\n                result.characters = node.characters;\n                result.fontSize = node.fontSize;\n                result.fontName = node.fontName;\n                result.textAlignHorizontal = node.textAlignHorizontal;\n                result.textAlignVertical = node.textAlignVertical;\n                result.letterSpacing = node.letterSpacing;\n                result.lineHeight = node.lineHeight;\n                result.textCase = node.textCase;\n                result.textDecoration = node.textDecoration;\n                break;\n            case 'FRAME':\n            case 'GROUP':\n            case 'COMPONENT':\n            case 'COMPONENT_SET':\n            case 'INSTANCE':\n                result.children = node.children?.map((child) => nodeToObject(child, seen));\n                if (hasLayoutProperties(node)) {\n                    result.clipsContent = node.clipsContent;\n                    result.layoutMode = node.layoutMode;\n                    result.primaryAxisSizingMode = node.primaryAxisSizingMode;\n                    result.counterAxisSizingMode = node.counterAxisSizingMode;\n                    result.primaryAxisAlignItems = node.primaryAxisAlignItems;\n                    result.counterAxisAlignItems = node.counterAxisAlignItems;\n                    result.paddingLeft = node.paddingLeft;\n                    result.paddingRight = node.paddingRight;\n                    result.paddingTop = node.paddingTop;\n                    result.paddingBottom = node.paddingBottom;\n                    result.itemSpacing = node.itemSpacing;\n                }\n                break;\n            case 'COMPONENT':\n            case 'COMPONENT_SET':\n                result.description = node.description;\n                result.documentationLinks = node.documentationLinks;\n                break;\n            case 'INSTANCE':\n                result.mainComponent = node.mainComponent\n                    ? {\n                        id: node.mainComponent.id,\n                        name: node.mainComponent.name,\n                    }\n                    : null;\n                result.componentProperties = node.componentProperties;\n                break;\n        }\n        return result;\n    }\n    catch (error) {\n        console.error('Error converting node to object:', error, node);\n        throw error;\n    }\n}\n//# sourceMappingURL=nodeToObject.js.map","/**\n * Test registry implementation for the Plugma runtime environment.\n * Manages test registration, execution, and lifecycle hooks in the Figma plugin environment.\n *\n * @module TestRegistry\n */\nimport { expect as plugmaViteExpect } from './vitest/expect.js';\nimport { nodeToObject } from './nodeToObject.js';\nimport { testContext } from './test-context.js';\n/**\n * Registry to store and manage test functions in the Figma plugin environment.\n * Handles test registration, execution, and lifecycle management.\n */\nclass TestRegistry {\n    tests = new Map();\n    beforeEachHooks = [];\n    afterEachHooks = [];\n    contexts = new Map();\n    /**\n     * Register a test function with a given name\n     * @param name - The name of the test\n     * @param fn - The test function to register\n     * @throws {Error} If a test with the same name is already registered or if fn is not a function\n     */\n    register(name, fn) {\n        if (this.tests.has(name)) {\n            throw new Error('Test already registered');\n        }\n        if (typeof fn !== 'function') {\n            throw new Error('Test function must be a function');\n        }\n        this.tests.set(name, fn);\n    }\n    /**\n     * Register a hook to run before each test\n     * @param fn - The hook function to register\n     */\n    beforeEach(fn) {\n        this.beforeEachHooks.push(fn);\n    }\n    /**\n     * Register a hook to run after each test\n     * @param fn - The hook function to register\n     */\n    afterEach(fn) {\n        this.afterEachHooks.push(fn);\n    }\n    /**\n     * Check if a test is registered with the given name\n     * @param name - The name of the test to check\n     * @returns True if the test exists, false otherwise\n     */\n    has(name) {\n        return this.tests.has(name);\n    }\n    /**\n     * Create a test context for a given test\n     * @param name - The name of the test\n     * @returns The test context\n     * @throws {Error} If no test is registered with the given name\n     */\n    createContext(name) {\n        // if (!this.tests.has(name)) {\n        // \tthrow new Error(`No test registered with name: ${name}`)\n        // }\n        const context = {\n            name,\n            assertions: [],\n            startTime: 0,\n            endTime: null,\n            duration: null,\n        };\n        this.contexts.set(name, context);\n        return context;\n    }\n    /**\n     * Execute all registered beforeEach hooks\n     * @private\n     */\n    async executeBeforeEachHooks() {\n        for (const hook of this.beforeEachHooks) {\n            await Promise.resolve(hook());\n        }\n    }\n    /**\n     * Execute all registered afterEach hooks\n     * @private\n     */\n    async executeAfterEachHooks() {\n        for (const hook of this.afterEachHooks) {\n            await Promise.resolve(hook());\n        }\n    }\n    /**\n     * Run a registered test function by name\n     * @param name - The name of the test to run\n     * @returns A promise that resolves with the test result\n     * @throws {Error} If no test is registered with the given name\n     */\n    async runTest(name, testFn, framework) {\n        const expectFn = framework === 'vitest' ? plugmaViteExpect : plugmaViteExpect;\n        let fn = this.tests.get(name || '');\n        const testName = name || 'anonymous test';\n        if (!fn && !testFn) {\n            throw new Error('No test function provided');\n        }\n        // Initialize test context\n        const context = this.createContext(testName);\n        const startTime = Date.now();\n        context.startTime = startTime;\n        // Set up test context\n        testContext.current = context;\n        try {\n            // Execute beforeEach hooks\n            await this.executeBeforeEachHooks();\n            // Execute test function and capture return value\n            let returnValue;\n            // If playwright, we need to create a new function from the testFn string\n            if (testFn) {\n                const fn = new Function('context', 'expect', `return (${testFn})(context, expect)`);\n                returnValue = await Promise.resolve(fn(context, expectFn));\n                returnValue = nodeToObject(returnValue);\n            }\n            else {\n                // If vitest, we can just call the function directly\n                returnValue = await Promise.resolve(fn(context, expectFn));\n            }\n            // Add timing precision delay\n            await new Promise((resolve) => setTimeout(resolve, 10));\n            // Execute afterEach hooks\n            await this.executeAfterEachHooks();\n            // Update timing after test completes\n            const endTime = Date.now();\n            context.endTime = endTime;\n            context.duration = endTime - startTime;\n            return {\n                testName: testName,\n                error: null,\n                pluginState: figma.root.getPluginData('state'),\n                assertions: [...context.assertions],\n                startTime,\n                endTime,\n                duration: endTime - startTime,\n                returnValue,\n            };\n        }\n        catch (error) {\n            // Update timing on error\n            const endTime = Date.now();\n            context.endTime = endTime;\n            context.duration = endTime - startTime;\n            // Standardize error format\n            const testError = error instanceof Error ? error : new Error(String(error));\n            testError.name = 'TestError';\n            return {\n                testName: testName,\n                error: testError,\n                pluginState: figma.root.getPluginData('state'),\n                assertions: [...context.assertions],\n                startTime,\n                endTime,\n                duration: endTime - startTime,\n                returnValue: undefined,\n            };\n        }\n        finally {\n            // Reset test context\n            testContext.reset();\n            this.contexts.delete(testName);\n        }\n    }\n    /**\n     * Get all registered test names\n     * @returns Array of registered test names\n     */\n    getTestNames() {\n        return Array.from(this.tests.keys());\n    }\n    /**\n     * Clear all registered tests, contexts, and hooks\n     */\n    clear() {\n        this.tests.clear();\n        this.contexts.clear();\n        this.beforeEachHooks = [];\n        this.afterEachHooks = [];\n        testContext.reset();\n    }\n}\n/**\n * Singleton instance of the test registry\n */\nexport const registry = new TestRegistry();\n//# sourceMappingURL=registry.js.map","import { expect as plugmaExpect } from './vitest/expect.js';\nimport { registry } from './registry.js';\n/**\n * Handles test execution messages in the Figma plugin environment\n * @param message - The message received from the test runner\n */\nexport function handleTestMessage(message) {\n    try {\n        switch (message.type) {\n            case 'REGISTER_TEST': {\n                console.log('üîÑ Registering test:', message.data.testName);\n                try {\n                    // Create test function from string representation\n                    const testFn = async (context, expect) => {\n                        try {\n                            const fn = new Function('context', 'plugmaExpect', `\n                return (async () => {\n                  try {\n                    ${message.data.fnString}\n                  } catch (error) {\n                    throw error instanceof Error ? error : new Error(String(error));\n                  }\n                })();\n              `);\n                            await fn(context, plugmaExpect);\n                        }\n                        catch (error) {\n                            throw error instanceof Error ? error : new Error(String(error));\n                        }\n                    };\n                    registry.register(message.data.testName, testFn);\n                    const response = {\n                        type: 'TEST_ASSERTIONS',\n                        data: {\n                            testRunId: message.testRunId,\n                            assertionCode: '',\n                            from: 'figma',\n                        },\n                    };\n                    console.log('‚úÖ Registration success:', response);\n                    figma.ui.postMessage(response);\n                }\n                catch (error) {\n                    console.error('‚ùå Error registering test:', error);\n                    throw error;\n                }\n                break;\n            }\n            case 'RUN_TEST': {\n                // console.log('‚ñ∂Ô∏è Running test:', message)\n                try {\n                    // console.log('%crunning test', 'color: blue', message.data.testName)\n                    registry\n                        .runTest(message.data.testName, message.data.testFn, message.data.framework)\n                        .then((result) => {\n                        const response = result.error\n                            ? {\n                                type: 'TEST_ERROR',\n                                data: {\n                                    room: 'test',\n                                    testRunId: message.data.testRunId,\n                                    error: result.error.message,\n                                    pluginState: result.pluginState,\n                                    originalError: {\n                                        name: result.error.name,\n                                        message: result.error.message,\n                                        stack: result.error.stack,\n                                    },\n                                },\n                            }\n                            : {\n                                type: 'TEST_ASSERTIONS',\n                                data: {\n                                    room: 'test',\n                                    testRunId: message.data.testRunId,\n                                    assertionCode: result.assertions.join(';\\n'),\n                                    returnValue: result.returnValue,\n                                },\n                            };\n                        // console.log(\n                        // \t`üìÆ Sending ${response.type}:`,\n                        // \tresponse,\n                        // );\n                        figma.ui.postMessage(response);\n                    })\n                        .catch((error) => {\n                        const response = {\n                            type: 'TEST_ERROR',\n                            data: {\n                                testRunId: message.data.testRunId,\n                                error: error instanceof Error ? error.message : String(error),\n                                from: 'figma',\n                            },\n                        };\n                        // console.error(\"‚ùå Error executing test:\", error);\n                        figma.ui.postMessage(response);\n                    });\n                }\n                catch (error) {\n                    const response = {\n                        type: 'TEST_ERROR',\n                        data: {\n                            testRunId: message.data.testRunId,\n                            error: error instanceof Error ? error.message : String(error),\n                            from: 'figma',\n                        },\n                    };\n                    // console.error(\"‚ùå Error executing test:\", error);\n                    figma.ui.postMessage(response);\n                }\n                break;\n            }\n        }\n    }\n    catch (error) {\n        const response = {\n            type: 'TEST_ERROR',\n            data: {\n                testRunId: message.testRunId,\n                error: error instanceof Error ? error.message : String(error),\n                from: 'figma',\n            },\n        };\n        // console.error(\"‚ùå Error handling message:\", error);\n        figma.ui.postMessage(response);\n    }\n}\nexport function initializeTestHandlers() {\n    figma.ui.on('message', handleTestMessage);\n}\n//# sourceMappingURL=handlers.js.map","const runtimeData = {\n  \"dockPlugin\": false,\n  \"mode\": \"production\",\n  \"port\": 4285,\n  \"output\": \"dist\",\n  \"websockets\": true,\n  \"debug\": false,\n  \"watch\": false,\n  \"instanceId\": \"-sbOjjA76fzXOGiDjtqC9\",\n  \"cwd\": \"/Users/pk/git/source-foundation\",\n  \"command\": \"dev\",\n  \"manifest\": {\n    \"id\": \"0000000\",\n    \"name\": \"Source Foundation Dev\",\n    \"main\": \"./source-foundation/src/main.ts\",\n    \"ui\": \"./source-foundation/src/ui-react/index.tsx\",\n    \"editorType\": [\n      \"figma\",\n      \"figjam\"\n    ],\n    \"networkAccess\": {\n      \"allowedDomains\": [\n        \"none\"\n      ],\n      \"devAllowedDomains\": [\n        \"http://localhost:*\",\n        \"ws://localhost:9001\"\n      ]\n    }\n  }\n};\n\n\t\t\t\tasync function handleDeleteClientStorage(_msg) {\n  const clientStorageKeys = await figma.clientStorage.keysAsync();\n  for (const key of clientStorageKeys) {\n    if (key !== \"figma-stylesheet\") {\n      await figma.clientStorage.deleteAsync(key);\n      console.log(`[plugma] ${key} deleted from clientStorage`);\n    }\n  }\n  figma.notify(\"ClientStorage deleted\");\n}\nhandleDeleteClientStorage.EVENT_NAME = \"PLUGMA_DELETE_CLIENT_STORAGE\";\n\nasync function handleDeleteRootPluginData() {\n  const pluginDataKeys = figma.root.getPluginDataKeys();\n  for (const key of pluginDataKeys) {\n    figma.root.setPluginData(key, \"\");\n    console.log(`[plugma] ${key} deleted from root pluginData`);\n  }\n  figma.notify(\"Root pluginData deleted\");\n}\nhandleDeleteRootPluginData.EVENT_NAME = \"PLUGMA_DELETE_ROOT_PLUGIN_DATA\";\n\nconst figmaApi = {\n  resize: figma.ui.resize.bind(figma.ui),\n  showUI: figma.showUI.bind(figma),\n  reposition: figma.ui.reposition.bind(figma.ui)\n};\n\nconst defaultSettings = {\n  width: 300,\n  height: 200,\n  minimized: false,\n  toolbarEnabled: false\n};\nconst defaultPreviewSettings = {\n  width: 300,\n  height: 200,\n  minimized: true,\n  toolbarEnabled: true\n};\nconst DEFAULT_WINDOW_SETTINGS = {\n  dev: defaultSettings,\n  preview: defaultPreviewSettings,\n  build: defaultSettings,\n  test: defaultSettings\n};\nconst TOOLBAR_HEIGHT$1 = 41;\nasync function getWindowSettings(options) {\n  const command = runtimeData.command;\n  const storageKeyDev = \"PLUGMA_PLUGIN_WINDOW_SETTINGS_DEV\";\n  const storageKeyPreview = \"PLUGMA_PLUGIN_WINDOW_SETTINGS_PREVIEW\";\n  let pluginWindowSettings;\n  if (command === \"dev\") {\n    pluginWindowSettings = await figma.clientStorage.getAsync(storageKeyDev);\n    if (!pluginWindowSettings) {\n      await figma.clientStorage.setAsync(storageKeyDev, DEFAULT_WINDOW_SETTINGS.dev);\n      pluginWindowSettings = DEFAULT_WINDOW_SETTINGS.dev;\n    }\n  } else {\n    pluginWindowSettings = await figma.clientStorage.getAsync(storageKeyPreview);\n    if (!pluginWindowSettings) {\n      await figma.clientStorage.setAsync(storageKeyPreview, DEFAULT_WINDOW_SETTINGS.preview);\n      pluginWindowSettings = DEFAULT_WINDOW_SETTINGS.preview;\n    }\n  }\n  if (options && (!options.width || !options.height)) {\n    pluginWindowSettings.height = 300;\n    pluginWindowSettings.width = 400;\n    if (pluginWindowSettings.toolbarEnabled) {\n      pluginWindowSettings.height += TOOLBAR_HEIGHT$1;\n    }\n  }\n  if (!pluginWindowSettings || typeof pluginWindowSettings !== \"object\") {\n    return DEFAULT_WINDOW_SETTINGS[command];\n  }\n  if (pluginWindowSettings.position) {\n    const { x, y } = pluginWindowSettings.position;\n    if (!Number.isInteger(x) || !Number.isInteger(y) || x < 0 || y < 0) {\n      pluginWindowSettings.position = { x: 0, y: 0 };\n    }\n  }\n  return {\n    ...DEFAULT_WINDOW_SETTINGS[command],\n    ...pluginWindowSettings\n  };\n}\n\nconst TOOLBAR_HEIGHT = 41;\nasync function saveWindowSettings(settings) {\n  const command = runtimeData.command;\n  const storageKey = command === \"dev\" ? \"PLUGMA_PLUGIN_WINDOW_SETTINGS_DEV\" : \"PLUGMA_PLUGIN_WINDOW_SETTINGS_PREVIEW\";\n  await figma.clientStorage.setAsync(storageKey, settings);\n}\nasync function handleSaveWindowSettings(msg) {\n  getWindowSettings().then((pluginWindowSettings) => {\n    if (msg.data.height) {\n      if (msg.data.toolbarEnabled) {\n        figmaApi.resize(msg.data.width, msg.data.height + TOOLBAR_HEIGHT);\n      } else {\n        figmaApi.resize(msg.data.width, msg.data.height - TOOLBAR_HEIGHT);\n      }\n      let mergedOptions = Object.assign(pluginWindowSettings, msg.data);\n      saveWindowSettings(mergedOptions);\n    }\n  });\n}\nhandleSaveWindowSettings.EVENT_NAME = \"PLUGMA_SAVE_PLUGIN_WINDOW_SETTINGS\";\n\nasync function handleHideToolbar(_msg) {\n  if (!figmaApi) throw new Error(\"Figma API not available\");\n  const settings = await getWindowSettings();\n  settings.toolbarEnabled = false;\n  figmaApi.resize(settings.width, settings.height);\n  await saveWindowSettings(settings);\n}\nhandleHideToolbar.EVENT_NAME = \"PLUGMA_HIDE_TOOLBAR\";\n\nasync function handleMaximizeWindow(_msg) {\n  if (!figmaApi) throw new Error(\"Figma API not available\");\n  const settings = await getWindowSettings();\n  settings.minimized = false;\n  const height = settings.toolbarEnabled ? settings.height + 41 : settings.height;\n  figmaApi.resize(settings.width, height);\n  await saveWindowSettings(settings);\n}\nhandleMaximizeWindow.EVENT_NAME = \"PLUGMA_MAXIMIZE_WINDOW\";\n\nasync function handleMinimizeWindow(_msg) {\n  if (!figmaApi) throw new Error(\"Figma API not available\");\n  const settings = await getWindowSettings();\n  settings.minimized = true;\n  figmaApi.resize(200, 40);\n  await saveWindowSettings(settings);\n}\nhandleMinimizeWindow.EVENT_NAME = \"PLUGMA_MINIMIZE_WINDOW\";\n\nconst WINDOW_SETTINGS_KEY = \"PLUGMA_PLUGIN_WINDOW_SETTINGS\";\n\nfunction customResize(width, height) {\n  getWindowSettings().then((pluginWindowSettings) => {\n    const dimensions = {\n      width,\n      height\n    };\n    if (pluginWindowSettings.minimized) {\n      dimensions.height = 40;\n      dimensions.width = 200;\n    }\n    figmaApi.resize(dimensions.width, dimensions.height);\n  });\n}\n\nasync function getCommandHistory() {\n  let commandHistory = await figma.clientStorage.getAsync(\"PLUGMA_COMMAND_HISTORY\");\n  if (!commandHistory) {\n    commandHistory = {\n      previousCommand: null,\n      previousInstanceId: null\n    };\n  }\n  const previousCommand = commandHistory.previousCommand;\n  const previousInstanceId = commandHistory.previousInstanceId;\n  commandHistory.previousCommand = runtimeData.command ?? null;\n  commandHistory.previousInstanceId = runtimeData.instanceId;\n  await figma.clientStorage.setAsync(\"PLUGMA_COMMAND_HISTORY\", commandHistory);\n  return { previousCommand, previousInstanceId };\n}\n\nfunction customShowUI(htmlString, initialOptions) {\n  const options = { ...initialOptions };\n  const mergedOptions = { visible: false, ...options };\n  figmaApi.showUI(htmlString, mergedOptions);\n  getCommandHistory().then((commandHistory) => {\n    getWindowSettings(DEFAULT_WINDOW_SETTINGS[\"dev\"]).then((pluginWindowSettings) => {\n      const hasCommandChanged = commandHistory.previousCommand !== runtimeData.command;\n      const hasInstanceChanged = commandHistory.previousInstanceId !== runtimeData.instanceId;\n      if (runtimeData.command === \"preview\" || runtimeData.dockPlugin) {\n        pluginWindowSettings.minimized = true;\n        pluginWindowSettings.toolbarEnabled = true;\n        const zoom = figma.viewport.zoom;\n        options.position = {\n          x: figma.viewport.bounds.x + 12 / zoom,\n          y: figma.viewport.bounds.y + (figma.viewport.bounds.height - (80 + 12) / zoom)\n        };\n      }\n      if (hasCommandChanged && runtimeData.command === \"dev\") {\n        const zoom = figma.viewport.zoom;\n        if (!options.position) {\n          options.position = {\n            x: figma.viewport.center.x - (options.width || 300) / 2 / zoom,\n            y: figma.viewport.center.y - ((options.height || 200) + 41) / 2 / zoom\n          };\n        }\n      }\n      if (hasInstanceChanged && (runtimeData.command === \"preview\" || runtimeData.dockPlugin)) {\n        pluginWindowSettings.toolbarEnabled = true;\n        pluginWindowSettings.minimized = true;\n      }\n      if (options.height) {\n        pluginWindowSettings.height = options.height;\n      }\n      if (options.width) {\n        pluginWindowSettings.width = options.width;\n      }\n      if (pluginWindowSettings.toolbarEnabled && options.height) {\n        options.height += 41;\n      }\n      if (pluginWindowSettings.minimized) {\n        options.height = 40;\n        options.width = 200;\n      }\n      if (options.width && options.height) {\n        figmaApi.resize(options.width, options.height);\n      } else if (pluginWindowSettings.toolbarEnabled) {\n        figmaApi.resize(300, 241);\n      } else {\n        figmaApi.resize(300, 200);\n      }\n      if (options.position?.x != null && options.position?.y != null) {\n        figmaApi.reposition(options.position.x, options.position.y);\n      }\n      figma.ui.postMessage({\n        event: \"PLUGMA_PLUGIN_WINDOW_SETTINGS\",\n        data: pluginWindowSettings\n      });\n      if (options.visible !== false) {\n        figma.ui.show();\n      }\n    });\n  });\n}\n\nconst windowHandlers = {\n  [handleMinimizeWindow.EVENT_NAME]: handleMinimizeWindow,\n  [handleMaximizeWindow.EVENT_NAME]: handleMaximizeWindow,\n  [handleHideToolbar.EVENT_NAME]: handleHideToolbar,\n  [handleSaveWindowSettings.EVENT_NAME]: handleSaveWindowSettings,\n  [handleDeleteRootPluginData.EVENT_NAME]: handleDeleteRootPluginData,\n  [handleDeleteClientStorage.EVENT_NAME]: handleDeleteClientStorage\n};\nfigma.ui.on(\"message\", async (msg) => {\n  const handler = windowHandlers[msg.event];\n  if (handler) {\n    await Promise.resolve(handler(msg));\n  }\n});\n\nexport { WINDOW_SETTINGS_KEY, customResize, customShowUI, figmaApi };\n","export function flattenObject(data) {\n    const tokens = {};\n\n    Object.entries(data).forEach(([key, object]) => {\n        traverseToken({\n            key,\n            object,\n            tokens,\n        });\n    });\n\n    return tokens;\n}\n\nfunction traverseToken({\n    key,\n    object,\n    tokens,\n}) {\n\n    if(typeof object == undefined) debugger;\n    \n    // if key is a meta field, move on\n    if (key.charAt(0) === \"$\") {\n        return;\n    }\n    if (object.$value !== undefined) {\n        tokens[key] = {\n            ...object\n        }\n\n    } else {\n        Object.entries(object).forEach(([key2, object2]) => {\n            if (key2.charAt(0) !== \"$\") {\n                traverseToken({\n                    key: `${key}/${key2}`,\n                    object: object2,\n                    tokens\n                });\n            }\n        });\n    }\n}","const { min, max } = Math;\n\nexport default (x, low = 0, high = 1) => {\n    return min(max(low, x), high);\n};\n","import limit from './limit.js';\n\nexport default (rgb) => {\n    rgb._clipped = false;\n    rgb._unclipped = rgb.slice(0);\n    for (let i = 0; i <= 3; i++) {\n        if (i < 3) {\n            if (rgb[i] < 0 || rgb[i] > 255) rgb._clipped = true;\n            rgb[i] = limit(rgb[i], 0, 255);\n        } else if (i === 3) {\n            rgb[i] = limit(rgb[i], 0, 1);\n        }\n    }\n    return rgb;\n};\n","// ported from jQuery's $.type\nconst classToType = {};\nfor (let name of [\n    'Boolean',\n    'Number',\n    'String',\n    'Function',\n    'Array',\n    'Date',\n    'RegExp',\n    'Undefined',\n    'Null'\n]) {\n    classToType[`[object ${name}]`] = name.toLowerCase();\n}\nexport default function (obj) {\n    return classToType[Object.prototype.toString.call(obj)] || 'object';\n}\n","import type from './type.js';\n\nexport default (args, keyOrder = null) => {\n    // if called with more than 3 arguments, we return the arguments\n    if (args.length >= 3) return Array.prototype.slice.call(args);\n    // with less than 3 args we check if first arg is object\n    // and use the keyOrder string to extract and sort properties\n    if (type(args[0]) == 'object' && keyOrder) {\n        return keyOrder\n            .split('')\n            .filter((k) => args[0][k] !== undefined)\n            .map((k) => args[0][k]);\n    }\n    // otherwise we just return the first argument\n    // (which we suppose is an array of args)\n    return args[0].slice(0);\n};\n","import type from './type.js';\n\nexport default (args) => {\n    if (args.length < 2) return null;\n    const l = args.length - 1;\n    if (type(args[l]) == 'string') return args[l].toLowerCase();\n    return null;\n};\n","const { PI, min, max } = Math;\n\nconst rnd2 = (a) => Math.round(a * 100) / 100;\nconst rnd3 = (a) => Math.round(a * 100) / 100;\n\nexport { default as clip_rgb } from './clip_rgb.js';\nexport { default as limit } from './limit.js';\nexport { default as type } from './type.js';\nexport { default as unpack } from './unpack.js';\nexport { default as last } from './last.js';\n\nconst TWOPI = PI * 2;\nconst PITHIRD = PI / 3;\nconst DEG2RAD = PI / 180;\nconst RAD2DEG = 180 / PI;\n\nexport { PI, TWOPI, PITHIRD, DEG2RAD, RAD2DEG, min, max, rnd2, rnd3 };\n","export default {\n    format: {},\n    autodetect: []\n};\n","import { last, clip_rgb, type } from './utils/index.js';\nimport _input from './io/input.js';\n\nclass Color {\n    constructor(...args) {\n        const me = this;\n        if (\n            type(args[0]) === 'object' &&\n            args[0].constructor &&\n            args[0].constructor === this.constructor\n        ) {\n            // the argument is already a Color instance\n            return args[0];\n        }\n        // last argument could be the mode\n        let mode = last(args);\n        let autodetect = false;\n        if (!mode) {\n            autodetect = true;\n\n            if (!_input.sorted) {\n                _input.autodetect = _input.autodetect.sort((a, b) => b.p - a.p);\n                _input.sorted = true;\n            }\n\n            // auto-detect format\n            for (let chk of _input.autodetect) {\n                mode = chk.test(...args);\n                if (mode) break;\n            }\n        }\n        if (_input.format[mode]) {\n            const rgb = _input.format[mode].apply(\n                null,\n                autodetect ? args : args.slice(0, -1)\n            );\n            me._rgb = clip_rgb(rgb);\n        } else {\n            throw new Error('unknown format: ' + args);\n        }\n        // add alpha channel\n        if (me._rgb.length === 3) me._rgb.push(1);\n    }\n    toString() {\n        if (type(this.hex) == 'function') return this.hex();\n        return `[${this._rgb.join(',')}]`;\n    }\n}\nexport default Color;\n","// this gets updated automatically\nexport const version = '3.1.1';\n","import Color from './Color.js';\nimport { version } from './version.js';\n\nconst chroma = (...args) => {\n    return new Color(...args);\n};\n\nchroma.version = version;\n\nexport default chroma;\n","/**\n\tX11 color names\n\n\thttp://www.w3.org/TR/css3-color/#svg-color\n*/\n\nconst w3cx11 = {\n    aliceblue: '#f0f8ff',\n    antiquewhite: '#faebd7',\n    aqua: '#00ffff',\n    aquamarine: '#7fffd4',\n    azure: '#f0ffff',\n    beige: '#f5f5dc',\n    bisque: '#ffe4c4',\n    black: '#000000',\n    blanchedalmond: '#ffebcd',\n    blue: '#0000ff',\n    blueviolet: '#8a2be2',\n    brown: '#a52a2a',\n    burlywood: '#deb887',\n    cadetblue: '#5f9ea0',\n    chartreuse: '#7fff00',\n    chocolate: '#d2691e',\n    coral: '#ff7f50',\n    cornflowerblue: '#6495ed',\n    cornsilk: '#fff8dc',\n    crimson: '#dc143c',\n    cyan: '#00ffff',\n    darkblue: '#00008b',\n    darkcyan: '#008b8b',\n    darkgoldenrod: '#b8860b',\n    darkgray: '#a9a9a9',\n    darkgreen: '#006400',\n    darkgrey: '#a9a9a9',\n    darkkhaki: '#bdb76b',\n    darkmagenta: '#8b008b',\n    darkolivegreen: '#556b2f',\n    darkorange: '#ff8c00',\n    darkorchid: '#9932cc',\n    darkred: '#8b0000',\n    darksalmon: '#e9967a',\n    darkseagreen: '#8fbc8f',\n    darkslateblue: '#483d8b',\n    darkslategray: '#2f4f4f',\n    darkslategrey: '#2f4f4f',\n    darkturquoise: '#00ced1',\n    darkviolet: '#9400d3',\n    deeppink: '#ff1493',\n    deepskyblue: '#00bfff',\n    dimgray: '#696969',\n    dimgrey: '#696969',\n    dodgerblue: '#1e90ff',\n    firebrick: '#b22222',\n    floralwhite: '#fffaf0',\n    forestgreen: '#228b22',\n    fuchsia: '#ff00ff',\n    gainsboro: '#dcdcdc',\n    ghostwhite: '#f8f8ff',\n    gold: '#ffd700',\n    goldenrod: '#daa520',\n    gray: '#808080',\n    green: '#008000',\n    greenyellow: '#adff2f',\n    grey: '#808080',\n    honeydew: '#f0fff0',\n    hotpink: '#ff69b4',\n    indianred: '#cd5c5c',\n    indigo: '#4b0082',\n    ivory: '#fffff0',\n    khaki: '#f0e68c',\n    laserlemon: '#ffff54',\n    lavender: '#e6e6fa',\n    lavenderblush: '#fff0f5',\n    lawngreen: '#7cfc00',\n    lemonchiffon: '#fffacd',\n    lightblue: '#add8e6',\n    lightcoral: '#f08080',\n    lightcyan: '#e0ffff',\n    lightgoldenrod: '#fafad2',\n    lightgoldenrodyellow: '#fafad2',\n    lightgray: '#d3d3d3',\n    lightgreen: '#90ee90',\n    lightgrey: '#d3d3d3',\n    lightpink: '#ffb6c1',\n    lightsalmon: '#ffa07a',\n    lightseagreen: '#20b2aa',\n    lightskyblue: '#87cefa',\n    lightslategray: '#778899',\n    lightslategrey: '#778899',\n    lightsteelblue: '#b0c4de',\n    lightyellow: '#ffffe0',\n    lime: '#00ff00',\n    limegreen: '#32cd32',\n    linen: '#faf0e6',\n    magenta: '#ff00ff',\n    maroon: '#800000',\n    maroon2: '#7f0000',\n    maroon3: '#b03060',\n    mediumaquamarine: '#66cdaa',\n    mediumblue: '#0000cd',\n    mediumorchid: '#ba55d3',\n    mediumpurple: '#9370db',\n    mediumseagreen: '#3cb371',\n    mediumslateblue: '#7b68ee',\n    mediumspringgreen: '#00fa9a',\n    mediumturquoise: '#48d1cc',\n    mediumvioletred: '#c71585',\n    midnightblue: '#191970',\n    mintcream: '#f5fffa',\n    mistyrose: '#ffe4e1',\n    moccasin: '#ffe4b5',\n    navajowhite: '#ffdead',\n    navy: '#000080',\n    oldlace: '#fdf5e6',\n    olive: '#808000',\n    olivedrab: '#6b8e23',\n    orange: '#ffa500',\n    orangered: '#ff4500',\n    orchid: '#da70d6',\n    palegoldenrod: '#eee8aa',\n    palegreen: '#98fb98',\n    paleturquoise: '#afeeee',\n    palevioletred: '#db7093',\n    papayawhip: '#ffefd5',\n    peachpuff: '#ffdab9',\n    peru: '#cd853f',\n    pink: '#ffc0cb',\n    plum: '#dda0dd',\n    powderblue: '#b0e0e6',\n    purple: '#800080',\n    purple2: '#7f007f',\n    purple3: '#a020f0',\n    rebeccapurple: '#663399',\n    red: '#ff0000',\n    rosybrown: '#bc8f8f',\n    royalblue: '#4169e1',\n    saddlebrown: '#8b4513',\n    salmon: '#fa8072',\n    sandybrown: '#f4a460',\n    seagreen: '#2e8b57',\n    seashell: '#fff5ee',\n    sienna: '#a0522d',\n    silver: '#c0c0c0',\n    skyblue: '#87ceeb',\n    slateblue: '#6a5acd',\n    slategray: '#708090',\n    slategrey: '#708090',\n    snow: '#fffafa',\n    springgreen: '#00ff7f',\n    steelblue: '#4682b4',\n    tan: '#d2b48c',\n    teal: '#008080',\n    thistle: '#d8bfd8',\n    tomato: '#ff6347',\n    turquoise: '#40e0d0',\n    violet: '#ee82ee',\n    wheat: '#f5deb3',\n    white: '#ffffff',\n    whitesmoke: '#f5f5f5',\n    yellow: '#ffff00',\n    yellowgreen: '#9acd32'\n};\n\nexport default w3cx11;\n","const RE_HEX = /^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;\nconst RE_HEXA = /^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/;\n\nconst hex2rgb = (hex) => {\n    if (hex.match(RE_HEX)) {\n        // remove optional leading #\n        if (hex.length === 4 || hex.length === 7) {\n            hex = hex.substr(1);\n        }\n        // expand short-notation to full six-digit\n        if (hex.length === 3) {\n            hex = hex.split('');\n            hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n        }\n        const u = parseInt(hex, 16);\n        const r = u >> 16;\n        const g = (u >> 8) & 0xff;\n        const b = u & 0xff;\n        return [r, g, b, 1];\n    }\n\n    // match rgba hex format, eg #FF000077\n    if (hex.match(RE_HEXA)) {\n        if (hex.length === 5 || hex.length === 9) {\n            // remove optional leading #\n            hex = hex.substr(1);\n        }\n        // expand short-notation to full eight-digit\n        if (hex.length === 4) {\n            hex = hex.split('');\n            hex =\n                hex[0] +\n                hex[0] +\n                hex[1] +\n                hex[1] +\n                hex[2] +\n                hex[2] +\n                hex[3] +\n                hex[3];\n        }\n        const u = parseInt(hex, 16);\n        const r = (u >> 24) & 0xff;\n        const g = (u >> 16) & 0xff;\n        const b = (u >> 8) & 0xff;\n        const a = Math.round(((u & 0xff) / 0xff) * 100) / 100;\n        return [r, g, b, a];\n    }\n\n    // we used to check for css colors here\n    // if _input.css? and rgb = _input.css hex\n    //     return rgb\n\n    throw new Error(`unknown hex color: ${hex}`);\n};\n\nexport default hex2rgb;\n","import { unpack, last } from '../../utils/index.js';\nconst { round } = Math;\n\nconst rgb2hex = (...args) => {\n    let [r, g, b, a] = unpack(args, 'rgba');\n    let mode = last(args) || 'auto';\n    if (a === undefined) a = 1;\n    if (mode === 'auto') {\n        mode = a < 1 ? 'rgba' : 'rgb';\n    }\n    r = round(r);\n    g = round(g);\n    b = round(b);\n    const u = (r << 16) | (g << 8) | b;\n    let str = '000000' + u.toString(16); //#.toUpperCase();\n    str = str.substr(str.length - 6);\n    let hxa = '0' + round(a * 255).toString(16);\n    hxa = hxa.substr(hxa.length - 2);\n    switch (mode.toLowerCase()) {\n        case 'rgba':\n            return `#${str}${hxa}`;\n        case 'argb':\n            return `#${hxa}${str}`;\n        default:\n            return `#${str}`;\n    }\n};\n\nexport default rgb2hex;\n","import Color from '../../Color.js';\nimport input from '../input.js';\nimport { type } from '../../utils/index.js';\n\nimport w3cx11 from '../../colors/w3cx11.js';\nimport hex2rgb from '../hex/hex2rgb.js';\nimport rgb2hex from '../hex/rgb2hex.js';\n\nColor.prototype.name = function () {\n    const hex = rgb2hex(this._rgb, 'rgb');\n    for (let n of Object.keys(w3cx11)) {\n        if (w3cx11[n] === hex) return n.toLowerCase();\n    }\n    return hex;\n};\n\ninput.format.named = (name) => {\n    name = name.toLowerCase();\n    if (w3cx11[name]) return hex2rgb(w3cx11[name]);\n    throw new Error('unknown color name: ' + name);\n};\n\ninput.autodetect.push({\n    p: 5,\n    test: (h, ...rest) => {\n        if (!rest.length && type(h) === 'string' && w3cx11[h.toLowerCase()]) {\n            return 'named';\n        }\n    }\n});\n","import Color from '../Color.js';\nimport { type } from '../utils/index.js';\n\nColor.prototype.alpha = function (a, mutate = false) {\n    if (a !== undefined && type(a) === 'number') {\n        if (mutate) {\n            this._rgb[3] = a;\n            return this;\n        }\n        return new Color([this._rgb[0], this._rgb[1], this._rgb[2], a], 'rgb');\n    }\n    return this._rgb[3];\n};\n","import Color from '../Color.js';\n\nColor.prototype.clipped = function () {\n    return this._rgb._clipped || false;\n};\n","const labConstants = {\n    // Corresponds roughly to RGB brighter/darker\n    Kn: 18,\n\n    // D65 standard referent\n    labWhitePoint: 'd65',\n    Xn: 0.95047,\n    Yn: 1,\n    Zn: 1.08883,\n\n    t0: 0.137931034, // 4 / 29\n    t1: 0.206896552, // 6 / 29\n    t2: 0.12841855, // 3 * t1 * t1\n    t3: 0.008856452, // t1 * t1 * t1,\n\n    kE: 216.0 / 24389.0,\n    kKE: 8.0,\n    kK: 24389.0 / 27.0,\n\n    RefWhiteRGB: {\n        // sRGB\n        X: 0.95047,\n        Y: 1,\n        Z: 1.08883\n    },\n\n    MtxRGB2XYZ: {\n        m00: 0.4124564390896922,\n        m01: 0.21267285140562253,\n        m02: 0.0193338955823293,\n        m10: 0.357576077643909,\n        m11: 0.715152155287818,\n        m12: 0.11919202588130297,\n        m20: 0.18043748326639894,\n        m21: 0.07217499330655958,\n        m22: 0.9503040785363679\n    },\n\n    MtxXYZ2RGB: {\n        m00: 3.2404541621141045,\n        m01: -0.9692660305051868,\n        m02: 0.055643430959114726,\n        m10: -1.5371385127977166,\n        m11: 1.8760108454466942,\n        m12: -0.2040259135167538,\n        m20: -0.498531409556016,\n        m21: 0.041556017530349834,\n        m22: 1.0572251882231791\n    },\n\n    // used in rgb2xyz\n    As: 0.9414285350000001,\n    Bs: 1.040417467,\n    Cs: 1.089532651,\n\n    MtxAdaptMa: {\n        m00: 0.8951,\n        m01: -0.7502,\n        m02: 0.0389,\n        m10: 0.2664,\n        m11: 1.7135,\n        m12: -0.0685,\n        m20: -0.1614,\n        m21: 0.0367,\n        m22: 1.0296\n    },\n\n    MtxAdaptMaI: {\n        m00: 0.9869929054667123,\n        m01: 0.43230526972339456,\n        m02: -0.008528664575177328,\n        m10: -0.14705425642099013,\n        m11: 0.5183602715367776,\n        m12: 0.04004282165408487,\n        m20: 0.15996265166373125,\n        m21: 0.0492912282128556,\n        m22: 0.9684866957875502\n    }\n};\n\nexport default labConstants;\n\n// taken from https://de.mathworks.com/help/images/ref/whitepoint.html\nconst ILLUMINANTS = new Map([\n    // ASTM E308-01\n    ['a', [1.0985, 0.35585]],\n    // Wyszecki & Stiles, p. 769\n    ['b', [1.0985, 0.35585]],\n    // C ASTM E308-01\n    ['c', [0.98074, 1.18232]],\n    // D50 (ASTM E308-01)\n    ['d50', [0.96422, 0.82521]],\n    // D55 (ASTM E308-01)\n    ['d55', [0.95682, 0.92149]],\n    // D65 (ASTM E308-01)\n    ['d65', [0.95047, 1.08883]],\n    // E (ASTM E308-01)\n    ['e', [1, 1, 1]],\n    // F2 (ASTM E308-01)\n    ['f2', [0.99186, 0.67393]],\n    // F7 (ASTM E308-01)\n    ['f7', [0.95041, 1.08747]],\n    // F11 (ASTM E308-01)\n    ['f11', [1.00962, 0.6435]],\n    ['icc', [0.96422, 0.82521]]\n]);\n\nexport function setLabWhitePoint(name) {\n    const ill = ILLUMINANTS.get(String(name).toLowerCase());\n    if (!ill) {\n        throw new Error('unknown Lab illuminant ' + name);\n    }\n    labConstants.labWhitePoint = name;\n    labConstants.Xn = ill[0];\n    labConstants.Zn = ill[1];\n}\n\nexport function getLabWhitePoint() {\n    return labConstants.labWhitePoint;\n}\n","import LAB_CONSTANTS from './lab-constants.js';\nimport { unpack } from '../../utils/index.js';\n\n/*\n * L* [0..100]\n * a [-100..100]\n * b [-100..100]\n */\nconst lab2rgb = (...args) => {\n    args = unpack(args, 'lab');\n    const [L, a, b] = args;\n    const [x, y, z] = lab2xyz(L, a, b);\n    const [r, g, b_] = xyz2rgb(x, y, z);\n    return [r, g, b_, args.length > 3 ? args[3] : 1];\n};\n\nconst lab2xyz = (L, a, b) => {\n    const { kE, kK, kKE, Xn, Yn, Zn } = LAB_CONSTANTS;\n\n    const fy = (L + 16.0) / 116.0;\n    const fx = 0.002 * a + fy;\n    const fz = fy - 0.005 * b;\n\n    const fx3 = fx * fx * fx;\n    const fz3 = fz * fz * fz;\n\n    const xr = fx3 > kE ? fx3 : (116.0 * fx - 16.0) / kK;\n    const yr = L > kKE ? Math.pow((L + 16.0) / 116.0, 3.0) : L / kK;\n    const zr = fz3 > kE ? fz3 : (116.0 * fz - 16.0) / kK;\n\n    const x = xr * Xn;\n    const y = yr * Yn;\n    const z = zr * Zn;\n\n    return [x, y, z];\n};\n\nconst compand = (linear) => {\n    /* sRGB */\n    const sign = Math.sign(linear);\n    linear = Math.abs(linear);\n    return (\n        (linear <= 0.0031308\n            ? linear * 12.92\n            : 1.055 * Math.pow(linear, 1.0 / 2.4) - 0.055) * sign\n    );\n};\n\nconst xyz2rgb = (x, y, z) => {\n    const { MtxAdaptMa, MtxAdaptMaI, MtxXYZ2RGB, RefWhiteRGB, Xn, Yn, Zn } =\n        LAB_CONSTANTS;\n\n    const As = Xn * MtxAdaptMa.m00 + Yn * MtxAdaptMa.m10 + Zn * MtxAdaptMa.m20;\n    const Bs = Xn * MtxAdaptMa.m01 + Yn * MtxAdaptMa.m11 + Zn * MtxAdaptMa.m21;\n    const Cs = Xn * MtxAdaptMa.m02 + Yn * MtxAdaptMa.m12 + Zn * MtxAdaptMa.m22;\n\n    const Ad =\n        RefWhiteRGB.X * MtxAdaptMa.m00 +\n        RefWhiteRGB.Y * MtxAdaptMa.m10 +\n        RefWhiteRGB.Z * MtxAdaptMa.m20;\n    const Bd =\n        RefWhiteRGB.X * MtxAdaptMa.m01 +\n        RefWhiteRGB.Y * MtxAdaptMa.m11 +\n        RefWhiteRGB.Z * MtxAdaptMa.m21;\n    const Cd =\n        RefWhiteRGB.X * MtxAdaptMa.m02 +\n        RefWhiteRGB.Y * MtxAdaptMa.m12 +\n        RefWhiteRGB.Z * MtxAdaptMa.m22;\n\n    const X1 =\n        (x * MtxAdaptMa.m00 + y * MtxAdaptMa.m10 + z * MtxAdaptMa.m20) *\n        (Ad / As);\n    const Y1 =\n        (x * MtxAdaptMa.m01 + y * MtxAdaptMa.m11 + z * MtxAdaptMa.m21) *\n        (Bd / Bs);\n    const Z1 =\n        (x * MtxAdaptMa.m02 + y * MtxAdaptMa.m12 + z * MtxAdaptMa.m22) *\n        (Cd / Cs);\n\n    const X2 =\n        X1 * MtxAdaptMaI.m00 + Y1 * MtxAdaptMaI.m10 + Z1 * MtxAdaptMaI.m20;\n    const Y2 =\n        X1 * MtxAdaptMaI.m01 + Y1 * MtxAdaptMaI.m11 + Z1 * MtxAdaptMaI.m21;\n    const Z2 =\n        X1 * MtxAdaptMaI.m02 + Y1 * MtxAdaptMaI.m12 + Z1 * MtxAdaptMaI.m22;\n\n    const r = compand(\n        X2 * MtxXYZ2RGB.m00 + Y2 * MtxXYZ2RGB.m10 + Z2 * MtxXYZ2RGB.m20\n    );\n    const g = compand(\n        X2 * MtxXYZ2RGB.m01 + Y2 * MtxXYZ2RGB.m11 + Z2 * MtxXYZ2RGB.m21\n    );\n    const b = compand(\n        X2 * MtxXYZ2RGB.m02 + Y2 * MtxXYZ2RGB.m12 + Z2 * MtxXYZ2RGB.m22\n    );\n\n    return [r * 255, g * 255, b * 255];\n};\n\nexport default lab2rgb;\nexport { xyz2rgb };\n","import LAB_CONSTANTS from './lab-constants.js';\nimport { unpack } from '../../utils/index.js';\n\nconst rgb2lab = (...args) => {\n    const [r, g, b, ...rest] = unpack(args, 'rgb');\n    const [x, y, z] = rgb2xyz(r, g, b);\n    const [L, a, b_] = xyz2lab(x, y, z);\n    return [L, a, b_, ...(rest.length > 0 && rest[0] < 1 ? [rest[0]] : [])];\n};\n\nfunction xyz2lab(x, y, z) {\n    const { Xn, Yn, Zn, kE, kK } = LAB_CONSTANTS;\n    const xr = x / Xn;\n    const yr = y / Yn;\n    const zr = z / Zn;\n\n    const fx = xr > kE ? Math.pow(xr, 1.0 / 3.0) : (kK * xr + 16.0) / 116.0;\n    const fy = yr > kE ? Math.pow(yr, 1.0 / 3.0) : (kK * yr + 16.0) / 116.0;\n    const fz = zr > kE ? Math.pow(zr, 1.0 / 3.0) : (kK * zr + 16.0) / 116.0;\n\n    return [116.0 * fy - 16.0, 500.0 * (fx - fy), 200.0 * (fy - fz)];\n}\n\nfunction gammaAdjustSRGB(companded) {\n    const sign = Math.sign(companded);\n    companded = Math.abs(companded);\n    const linear =\n        companded <= 0.04045\n            ? companded / 12.92\n            : Math.pow((companded + 0.055) / 1.055, 2.4);\n    return linear * sign;\n}\n\nconst rgb2xyz = (r, g, b) => {\n    // normalize and gamma adjust\n    r = gammaAdjustSRGB(r / 255);\n    g = gammaAdjustSRGB(g / 255);\n    b = gammaAdjustSRGB(b / 255);\n\n    const { MtxRGB2XYZ, MtxAdaptMa, MtxAdaptMaI, Xn, Yn, Zn, As, Bs, Cs } =\n        LAB_CONSTANTS;\n\n    let x = r * MtxRGB2XYZ.m00 + g * MtxRGB2XYZ.m10 + b * MtxRGB2XYZ.m20;\n    let y = r * MtxRGB2XYZ.m01 + g * MtxRGB2XYZ.m11 + b * MtxRGB2XYZ.m21;\n    let z = r * MtxRGB2XYZ.m02 + g * MtxRGB2XYZ.m12 + b * MtxRGB2XYZ.m22;\n\n    const Ad = Xn * MtxAdaptMa.m00 + Yn * MtxAdaptMa.m10 + Zn * MtxAdaptMa.m20;\n    const Bd = Xn * MtxAdaptMa.m01 + Yn * MtxAdaptMa.m11 + Zn * MtxAdaptMa.m21;\n    const Cd = Xn * MtxAdaptMa.m02 + Yn * MtxAdaptMa.m12 + Zn * MtxAdaptMa.m22;\n\n    let X = x * MtxAdaptMa.m00 + y * MtxAdaptMa.m10 + z * MtxAdaptMa.m20;\n    let Y = x * MtxAdaptMa.m01 + y * MtxAdaptMa.m11 + z * MtxAdaptMa.m21;\n    let Z = x * MtxAdaptMa.m02 + y * MtxAdaptMa.m12 + z * MtxAdaptMa.m22;\n\n    X *= Ad / As;\n    Y *= Bd / Bs;\n    Z *= Cd / Cs;\n\n    x = X * MtxAdaptMaI.m00 + Y * MtxAdaptMaI.m10 + Z * MtxAdaptMaI.m20;\n    y = X * MtxAdaptMaI.m01 + Y * MtxAdaptMaI.m11 + Z * MtxAdaptMaI.m21;\n    z = X * MtxAdaptMaI.m02 + Y * MtxAdaptMaI.m12 + Z * MtxAdaptMaI.m22;\n\n    return [x, y, z];\n};\n\nexport default rgb2lab;\nexport { rgb2xyz };\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport lab2rgb from './lab2rgb.js';\nimport rgb2lab from './rgb2lab.js';\nimport { getLabWhitePoint, setLabWhitePoint } from './lab-constants.js';\n\nColor.prototype.lab = function () {\n    return rgb2lab(this._rgb);\n};\n\nconst lab = (...args) => new Color(...args, 'lab');\nObject.assign(chroma, { lab, getLabWhitePoint, setLabWhitePoint });\n\ninput.format.lab = lab2rgb;\n\ninput.autodetect.push({\n    p: 2,\n    test: (...args) => {\n        args = unpack(args, 'lab');\n        if (type(args) === 'array' && args.length === 3) {\n            return 'lab';\n        }\n    }\n});\n\nexport { lab, getLabWhitePoint, setLabWhitePoint };\n","import '../io/lab/index.js';\nimport Color from '../Color.js';\nimport LAB_CONSTANTS from '../io/lab/lab-constants.js';\n\nColor.prototype.darken = function (amount = 1) {\n    const me = this;\n    const lab = me.lab();\n    lab[0] -= LAB_CONSTANTS.Kn * amount;\n    return new Color(lab, 'lab').alpha(me.alpha(), true);\n};\n\nColor.prototype.brighten = function (amount = 1) {\n    return this.darken(-amount);\n};\n\nColor.prototype.darker = Color.prototype.darken;\nColor.prototype.brighter = Color.prototype.brighten;\n","import Color from '../Color.js';\n\nColor.prototype.get = function (mc) {\n    const [mode, channel] = mc.split('.');\n    const src = this[mode]();\n    if (channel) {\n        const i = mode.indexOf(channel) - (mode.substr(0, 2) === 'ok' ? 2 : 0);\n        if (i > -1) return src[i];\n        throw new Error(`unknown channel ${channel} in mode ${mode}`);\n    } else {\n        return src;\n    }\n};\n","import Color from '../Color.js';\nimport { type } from '../utils/index.js';\nconst { pow } = Math;\n\nconst EPS = 1e-7;\nconst MAX_ITER = 20;\n\nColor.prototype.luminance = function (lum, mode = 'rgb') {\n    if (lum !== undefined && type(lum) === 'number') {\n        if (lum === 0) {\n            // return pure black\n            return new Color([0, 0, 0, this._rgb[3]], 'rgb');\n        }\n        if (lum === 1) {\n            // return pure white\n            return new Color([255, 255, 255, this._rgb[3]], 'rgb');\n        }\n        // compute new color using...\n        let cur_lum = this.luminance();\n        let max_iter = MAX_ITER;\n\n        const test = (low, high) => {\n            const mid = low.interpolate(high, 0.5, mode);\n            const lm = mid.luminance();\n            if (Math.abs(lum - lm) < EPS || !max_iter--) {\n                // close enough\n                return mid;\n            }\n            return lm > lum ? test(low, mid) : test(mid, high);\n        };\n\n        const rgb = (\n            cur_lum > lum\n                ? test(new Color([0, 0, 0]), this)\n                : test(this, new Color([255, 255, 255]))\n        ).rgb();\n        return new Color([...rgb, this._rgb[3]]);\n    }\n    return rgb2luminance(...this._rgb.slice(0, 3));\n};\n\nconst rgb2luminance = (r, g, b) => {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    r = luminance_x(r);\n    g = luminance_x(g);\n    b = luminance_x(b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n};\n\nconst luminance_x = (x) => {\n    x /= 255;\n    return x <= 0.03928 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n};\n","export default {};\n","import Color from '../Color.js';\nimport { type } from '../utils/index.js';\nimport interpolator from '../interpolator/index.js';\n\nexport default (col1, col2, f = 0.5, ...rest) => {\n    let mode = rest[0] || 'lrgb';\n    if (!interpolator[mode] && !rest.length) {\n        // fall back to the first supported mode\n        mode = Object.keys(interpolator)[0];\n    }\n    if (!interpolator[mode]) {\n        throw new Error(`interpolation mode ${mode} is not defined`);\n    }\n    if (type(col1) !== 'object') col1 = new Color(col1);\n    if (type(col2) !== 'object') col2 = new Color(col2);\n    return interpolator[mode](col1, col2, f).alpha(\n        col1.alpha() + f * (col2.alpha() - col1.alpha())\n    );\n};\n","import Color from '../Color.js';\nimport mix from '../generator/mix.js';\n\nColor.prototype.mix = Color.prototype.interpolate = function (\n    col2,\n    f = 0.5,\n    ...rest\n) {\n    return mix(this, col2, f, ...rest);\n};\n","import Color from '../Color.js';\n\nColor.prototype.premultiply = function (mutate = false) {\n    const rgb = this._rgb;\n    const a = rgb[3];\n    if (mutate) {\n        this._rgb = [rgb[0] * a, rgb[1] * a, rgb[2] * a, a];\n        return this;\n    } else {\n        return new Color([rgb[0] * a, rgb[1] * a, rgb[2] * a, a], 'rgb');\n    }\n};\n","import { unpack, DEG2RAD } from '../../utils/index.js';\nconst { sin, cos } = Math;\n\nconst lch2lab = (...args) => {\n    /*\n    Convert from a qualitative parameter h and a quantitative parameter l to a 24-bit pixel.\n    These formulas were invented by David Dalrymple to obtain maximum contrast without going\n    out of gamut if the parameters are in the range 0-1.\n\n    A saturation multiplier was added by Gregor Aisch\n    */\n    let [l, c, h] = unpack(args, 'lch');\n    if (isNaN(h)) h = 0;\n    h = h * DEG2RAD;\n    return [l, cos(h) * c, sin(h) * c];\n};\n\nexport default lch2lab;\n","import { unpack } from '../../utils/index.js';\nimport lch2lab from './lch2lab.js';\nimport lab2rgb from '../lab/lab2rgb.js';\n\nconst lch2rgb = (...args) => {\n    args = unpack(args, 'lch');\n    const [l, c, h] = args;\n    const [L, a, b_] = lch2lab(l, c, h);\n    const [r, g, b] = lab2rgb(L, a, b_);\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n};\n\nexport default lch2rgb;\n","import { unpack } from '../../utils/index.js';\nimport lch2rgb from './lch2rgb.js';\n\nconst hcl2rgb = (...args) => {\n    const hcl = unpack(args, 'hcl').reverse();\n    return lch2rgb(...hcl);\n};\n\nexport default hcl2rgb;\n","import { unpack, RAD2DEG } from '../../utils/index.js';\nconst { sqrt, atan2, round } = Math;\n\nconst lab2lch = (...args) => {\n    const [l, a, b] = unpack(args, 'lab');\n    const c = sqrt(a * a + b * b);\n    let h = (atan2(b, a) * RAD2DEG + 360) % 360;\n    if (round(c * 10000) === 0) h = Number.NaN;\n    return [l, c, h];\n};\n\nexport default lab2lch;\n","import { unpack } from '../../utils/index.js';\nimport rgb2lab from '../lab/rgb2lab.js';\nimport lab2lch from './lab2lch.js';\n\nconst rgb2lch = (...args) => {\n    const [r, g, b, ...rest] = unpack(args, 'rgb');\n    const [l, a, b_] = rgb2lab(r, g, b);\n    const [L, c, h] = lab2lch(l, a, b_);\n    return [L, c, h, ...(rest.length > 0 && rest[0] < 1 ? [rest[0]] : [])];\n};\n\nexport default rgb2lch;\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport lch2rgb from './lch2rgb.js';\nimport hcl2rgb from './hcl2rgb.js';\nimport rgb2lch from './rgb2lch.js';\n\nColor.prototype.lch = function () {\n    return rgb2lch(this._rgb);\n};\nColor.prototype.hcl = function () {\n    return rgb2lch(this._rgb).reverse();\n};\n\nconst lch = (...args) => new Color(...args, 'lch');\nconst hcl = (...args) => new Color(...args, 'hcl');\n\nObject.assign(chroma, { lch, hcl });\n\ninput.format.lch = lch2rgb;\ninput.format.hcl = hcl2rgb;\n['lch', 'hcl'].forEach((m) =>\n    input.autodetect.push({\n        p: 2,\n        test: (...args) => {\n            args = unpack(args, m);\n            if (type(args) === 'array' && args.length === 3) {\n                return m;\n            }\n        }\n    })\n);\n\nexport { lch, hcl };\n","import '../io/lch/index.js';\nimport Color from '../Color.js';\nimport LAB_CONSTANTS from '../io/lab/lab-constants.js';\n\nColor.prototype.saturate = function (amount = 1) {\n    const me = this;\n    const lch = me.lch();\n    lch[1] += LAB_CONSTANTS.Kn * amount;\n    if (lch[1] < 0) lch[1] = 0;\n    return new Color(lch, 'lch').alpha(me.alpha(), true);\n};\n\nColor.prototype.desaturate = function (amount = 1) {\n    return this.saturate(-amount);\n};\n","import Color from '../Color.js';\nimport { type } from '../utils/index.js';\n\nColor.prototype.set = function (mc, value, mutate = false) {\n    const [mode, channel] = mc.split('.');\n    const src = this[mode]();\n    if (channel) {\n        const i = mode.indexOf(channel) - (mode.substr(0, 2) === 'ok' ? 2 : 0);\n        if (i > -1) {\n            if (type(value) == 'string') {\n                switch (value.charAt(0)) {\n                    case '+':\n                        src[i] += +value;\n                        break;\n                    case '-':\n                        src[i] += +value;\n                        break;\n                    case '*':\n                        src[i] *= +value.substr(1);\n                        break;\n                    case '/':\n                        src[i] /= +value.substr(1);\n                        break;\n                    default:\n                        src[i] = +value;\n                }\n            } else if (type(value) === 'number') {\n                src[i] = value;\n            } else {\n                throw new Error(`unsupported value for Color.set`);\n            }\n            const out = new Color(src, mode);\n            if (mutate) {\n                this._rgb = out._rgb;\n                return this;\n            }\n            return out;\n        }\n        throw new Error(`unknown channel ${channel} in mode ${mode}`);\n    } else {\n        return src;\n    }\n};\n","import '../io/lab/index.js';\nimport Color from '../Color.js';\nimport mix from '../generator/mix.js';\n\nColor.prototype.tint = function (f = 0.5, ...rest) {\n    return mix(this, 'white', f, ...rest);\n};\n\nColor.prototype.shade = function (f = 0.5, ...rest) {\n    return mix(this, 'black', f, ...rest);\n};\n","import Color from '../Color.js';\nimport index from './index.js';\n\nconst rgb = (col1, col2, f) => {\n    const xyz0 = col1._rgb;\n    const xyz1 = col2._rgb;\n    return new Color(\n        xyz0[0] + f * (xyz1[0] - xyz0[0]),\n        xyz0[1] + f * (xyz1[1] - xyz0[1]),\n        xyz0[2] + f * (xyz1[2] - xyz0[2]),\n        'rgb'\n    );\n};\n\n// register interpolator\nindex.rgb = rgb;\n\nexport default rgb;\n","import Color from '../Color.js';\nconst { sqrt, pow } = Math;\nimport index from './index.js';\n\nconst lrgb = (col1, col2, f) => {\n    const [x1, y1, z1] = col1._rgb;\n    const [x2, y2, z2] = col2._rgb;\n    return new Color(\n        sqrt(pow(x1, 2) * (1 - f) + pow(x2, 2) * f),\n        sqrt(pow(y1, 2) * (1 - f) + pow(y2, 2) * f),\n        sqrt(pow(z1, 2) * (1 - f) + pow(z2, 2) * f),\n        'rgb'\n    );\n};\n\n// register interpolator\nindex.lrgb = lrgb;\n\nexport default lrgb;\n","import '../io/lab/index.js';\nimport index from './index.js';\nimport Color from '../Color.js';\n\nconst lab = (col1, col2, f) => {\n    const xyz0 = col1.lab();\n    const xyz1 = col2.lab();\n    return new Color(\n        xyz0[0] + f * (xyz1[0] - xyz0[0]),\n        xyz0[1] + f * (xyz1[1] - xyz0[1]),\n        xyz0[2] + f * (xyz1[2] - xyz0[2]),\n        'lab'\n    );\n};\n\n// register interpolator\nindex.lab = lab;\n\nexport default lab;\n","import Color from '../Color.js';\n\nexport default (col1, col2, f, m) => {\n    let xyz0, xyz1;\n    if (m === 'hsl') {\n        xyz0 = col1.hsl();\n        xyz1 = col2.hsl();\n    } else if (m === 'hsv') {\n        xyz0 = col1.hsv();\n        xyz1 = col2.hsv();\n    } else if (m === 'hcg') {\n        xyz0 = col1.hcg();\n        xyz1 = col2.hcg();\n    } else if (m === 'hsi') {\n        xyz0 = col1.hsi();\n        xyz1 = col2.hsi();\n    } else if (m === 'lch' || m === 'hcl') {\n        m = 'hcl';\n        xyz0 = col1.hcl();\n        xyz1 = col2.hcl();\n    } else if (m === 'oklch') {\n        xyz0 = col1.oklch().reverse();\n        xyz1 = col2.oklch().reverse();\n    }\n\n    let hue0, hue1, sat0, sat1, lbv0, lbv1;\n    if (m.substr(0, 1) === 'h' || m === 'oklch') {\n        [hue0, sat0, lbv0] = xyz0;\n        [hue1, sat1, lbv1] = xyz1;\n    }\n\n    let sat, hue, lbv, dh;\n\n    if (!isNaN(hue0) && !isNaN(hue1)) {\n        // both colors have hue\n        if (hue1 > hue0 && hue1 - hue0 > 180) {\n            dh = hue1 - (hue0 + 360);\n        } else if (hue1 < hue0 && hue0 - hue1 > 180) {\n            dh = hue1 + 360 - hue0;\n        } else {\n            dh = hue1 - hue0;\n        }\n        hue = hue0 + f * dh;\n    } else if (!isNaN(hue0)) {\n        hue = hue0;\n        if ((lbv1 == 1 || lbv1 == 0) && m != 'hsv') sat = sat0;\n    } else if (!isNaN(hue1)) {\n        hue = hue1;\n        if ((lbv0 == 1 || lbv0 == 0) && m != 'hsv') sat = sat1;\n    } else {\n        hue = Number.NaN;\n    }\n\n    if (sat === undefined) sat = sat0 + f * (sat1 - sat0);\n    lbv = lbv0 + f * (lbv1 - lbv0);\n    return m === 'oklch'\n        ? new Color([lbv, sat, hue], m)\n        : new Color([hue, sat, lbv], m);\n};\n","import '../io/lch/index.js';\nimport interpolate_hsx from './_hsx.js';\nimport index from './index.js';\n\nconst lch = (col1, col2, f) => {\n    return interpolate_hsx(col1, col2, f, 'lch');\n};\n\n// register interpolator\nindex.lch = lch;\nindex.hcl = lch;\n\nexport default lch;\n","import { type } from '../../utils/index.js';\n\nconst num2rgb = (num) => {\n    if (type(num) == 'number' && num >= 0 && num <= 0xffffff) {\n        const r = num >> 16;\n        const g = (num >> 8) & 0xff;\n        const b = num & 0xff;\n        return [r, g, b, 1];\n    }\n    throw new Error('unknown num color: ' + num);\n};\n\nexport default num2rgb;\n","import { unpack } from '../../utils/index.js';\n\nconst rgb2num = (...args) => {\n    const [r, g, b] = unpack(args, 'rgb');\n    return (r << 16) + (g << 8) + b;\n};\n\nexport default rgb2num;\n","import chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport { type } from '../../utils/index.js';\nimport num2rgb from './num2rgb.js';\nimport rgb2num from './rgb2num.js';\n\nColor.prototype.num = function () {\n    return rgb2num(this._rgb);\n};\n\nconst num = (...args) => new Color(...args, 'num');\n\nObject.assign(chroma, { num });\n\ninput.format.num = num2rgb;\n\ninput.autodetect.push({\n    p: 5,\n    test: (...args) => {\n        if (\n            args.length === 1 &&\n            type(args[0]) === 'number' &&\n            args[0] >= 0 &&\n            args[0] <= 0xffffff\n        ) {\n            return 'num';\n        }\n    }\n});\n\nexport { num };\n","import '../io/num/index.js';\nimport index from './index.js';\n\nimport Color from '../Color.js';\n\nconst num = (col1, col2, f) => {\n    const c1 = col1.num();\n    const c2 = col2.num();\n    return new Color(c1 + f * (c2 - c1), 'num');\n};\n\n// register interpolator\nindex.num = num;\n\nexport default num;\n","import { unpack } from '../../utils/index.js';\nconst { floor } = Math;\n\n/*\n * this is basically just HSV with some minor tweaks\n *\n * hue.. [0..360]\n * chroma .. [0..1]\n * grayness .. [0..1]\n */\n\nconst hcg2rgb = (...args) => {\n    args = unpack(args, 'hcg');\n    let [h, c, _g] = args;\n    let r, g, b;\n    _g = _g * 255;\n    const _c = c * 255;\n    if (c === 0) {\n        r = g = b = _g;\n    } else {\n        if (h === 360) h = 0;\n        if (h > 360) h -= 360;\n        if (h < 0) h += 360;\n        h /= 60;\n        const i = floor(h);\n        const f = h - i;\n        const p = _g * (1 - c);\n        const q = p + _c * (1 - f);\n        const t = p + _c * f;\n        const v = p + _c;\n        switch (i) {\n            case 0:\n                [r, g, b] = [v, t, p];\n                break;\n            case 1:\n                [r, g, b] = [q, v, p];\n                break;\n            case 2:\n                [r, g, b] = [p, v, t];\n                break;\n            case 3:\n                [r, g, b] = [p, q, v];\n                break;\n            case 4:\n                [r, g, b] = [t, p, v];\n                break;\n            case 5:\n                [r, g, b] = [v, p, q];\n                break;\n        }\n    }\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n};\n\nexport default hcg2rgb;\n","import { unpack, max, min } from '../../utils/index.js';\n\nconst rgb2hcg = (...args) => {\n    const [r, g, b] = unpack(args, 'rgb');\n    const minRgb = min(r, g, b);\n    const maxRgb = max(r, g, b);\n    const delta = maxRgb - minRgb;\n    const c = (delta * 100) / 255;\n    const _g = (minRgb / (255 - delta)) * 100;\n    let h;\n    if (delta === 0) {\n        h = Number.NaN;\n    } else {\n        if (r === maxRgb) h = (g - b) / delta;\n        if (g === maxRgb) h = 2 + (b - r) / delta;\n        if (b === maxRgb) h = 4 + (r - g) / delta;\n        h *= 60;\n        if (h < 0) h += 360;\n    }\n    return [h, c, _g];\n};\n\nexport default rgb2hcg;\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport hcg2rgb from './hcg2rgb.js';\nimport rgb2hcg from './rgb2hcg.js';\n\nColor.prototype.hcg = function () {\n    return rgb2hcg(this._rgb);\n};\n\nconst hcg = (...args) => new Color(...args, 'hcg');\nchroma.hcg = hcg;\n\ninput.format.hcg = hcg2rgb;\n\ninput.autodetect.push({\n    p: 1,\n    test: (...args) => {\n        args = unpack(args, 'hcg');\n        if (type(args) === 'array' && args.length === 3) {\n            return 'hcg';\n        }\n    }\n});\n\nexport { hcg };\n","import '../io/hcg/index.js';\nimport interpolate_hsx from './_hsx.js';\nimport index from './index.js';\n\nconst hcg = (col1, col2, f) => {\n    return interpolate_hsx(col1, col2, f, 'hcg');\n};\n\n// register interpolator\nindex.hcg = hcg;\n\nexport default hcg;\n","import { unpack, limit, TWOPI, PITHIRD } from '../../utils/index.js';\nconst { cos } = Math;\n\n/*\n * hue [0..360]\n * saturation [0..1]\n * intensity [0..1]\n */\nconst hsi2rgb = (...args) => {\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/hsi2rgb.cpp\n    */\n    args = unpack(args, 'hsi');\n    let [h, s, i] = args;\n    let r, g, b;\n\n    if (isNaN(h)) h = 0;\n    if (isNaN(s)) s = 0;\n    // normalize hue\n    if (h > 360) h -= 360;\n    if (h < 0) h += 360;\n    h /= 360;\n    if (h < 1 / 3) {\n        b = (1 - s) / 3;\n        r = (1 + (s * cos(TWOPI * h)) / cos(PITHIRD - TWOPI * h)) / 3;\n        g = 1 - (b + r);\n    } else if (h < 2 / 3) {\n        h -= 1 / 3;\n        r = (1 - s) / 3;\n        g = (1 + (s * cos(TWOPI * h)) / cos(PITHIRD - TWOPI * h)) / 3;\n        b = 1 - (r + g);\n    } else {\n        h -= 2 / 3;\n        g = (1 - s) / 3;\n        b = (1 + (s * cos(TWOPI * h)) / cos(PITHIRD - TWOPI * h)) / 3;\n        r = 1 - (g + b);\n    }\n    r = limit(i * r * 3);\n    g = limit(i * g * 3);\n    b = limit(i * b * 3);\n    return [r * 255, g * 255, b * 255, args.length > 3 ? args[3] : 1];\n};\n\nexport default hsi2rgb;\n","import { unpack, TWOPI } from '../../utils/index.js';\nconst { min, sqrt, acos } = Math;\n\nconst rgb2hsi = (...args) => {\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/rgb2hsi.cpp\n    */\n    let [r, g, b] = unpack(args, 'rgb');\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    let h;\n    const min_ = min(r, g, b);\n    const i = (r + g + b) / 3;\n    const s = i > 0 ? 1 - min_ / i : 0;\n    if (s === 0) {\n        h = NaN;\n    } else {\n        h = (r - g + (r - b)) / 2;\n        h /= sqrt((r - g) * (r - g) + (r - b) * (g - b));\n        h = acos(h);\n        if (b > g) {\n            h = TWOPI - h;\n        }\n        h /= TWOPI;\n    }\n    return [h * 360, s, i];\n};\n\nexport default rgb2hsi;\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport hsi2rgb from './hsi2rgb.js';\nimport rgb2hsi from './rgb2hsi.js';\n\nColor.prototype.hsi = function () {\n    return rgb2hsi(this._rgb);\n};\n\nconst hsi = (...args) => new Color(...args, 'hsi');\nchroma.hsi = hsi;\n\ninput.format.hsi = hsi2rgb;\n\ninput.autodetect.push({\n    p: 2,\n    test: (...args) => {\n        args = unpack(args, 'hsi');\n        if (type(args) === 'array' && args.length === 3) {\n            return 'hsi';\n        }\n    }\n});\n\nexport { hsi };\n","import '../io/hsi/index.js';\nimport interpolate_hsx from './_hsx.js';\nimport index from './index.js';\n\nconst hsi = (col1, col2, f) => {\n    return interpolate_hsx(col1, col2, f, 'hsi');\n};\n\n// register interpolator\nindex.hsi = hsi;\n\nexport default hsi;\n","import { unpack } from '../../utils/index.js';\n\nconst hsl2rgb = (...args) => {\n    args = unpack(args, 'hsl');\n    const [h, s, l] = args;\n    let r, g, b;\n    if (s === 0) {\n        r = g = b = l * 255;\n    } else {\n        const t3 = [0, 0, 0];\n        const c = [0, 0, 0];\n        const t2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        const t1 = 2 * l - t2;\n        const h_ = h / 360;\n        t3[0] = h_ + 1 / 3;\n        t3[1] = h_;\n        t3[2] = h_ - 1 / 3;\n        for (let i = 0; i < 3; i++) {\n            if (t3[i] < 0) t3[i] += 1;\n            if (t3[i] > 1) t3[i] -= 1;\n            if (6 * t3[i] < 1) c[i] = t1 + (t2 - t1) * 6 * t3[i];\n            else if (2 * t3[i] < 1) c[i] = t2;\n            else if (3 * t3[i] < 2) c[i] = t1 + (t2 - t1) * (2 / 3 - t3[i]) * 6;\n            else c[i] = t1;\n        }\n        [r, g, b] = [c[0] * 255, c[1] * 255, c[2] * 255];\n    }\n    if (args.length > 3) {\n        // keep alpha channel\n        return [r, g, b, args[3]];\n    }\n    return [r, g, b, 1];\n};\n\nexport default hsl2rgb;\n","import { unpack, min, max } from '../../utils/index.js';\n\n/*\n * supported arguments:\n * - rgb2hsl(r,g,b)\n * - rgb2hsl(r,g,b,a)\n * - rgb2hsl([r,g,b])\n * - rgb2hsl([r,g,b,a])\n * - rgb2hsl({r,g,b,a})\n */\nconst rgb2hsl = (...args) => {\n    args = unpack(args, 'rgba');\n    let [r, g, b] = args;\n\n    r /= 255;\n    g /= 255;\n    b /= 255;\n\n    const minRgb = min(r, g, b);\n    const maxRgb = max(r, g, b);\n\n    const l = (maxRgb + minRgb) / 2;\n    let s, h;\n\n    if (maxRgb === minRgb) {\n        s = 0;\n        h = Number.NaN;\n    } else {\n        s =\n            l < 0.5\n                ? (maxRgb - minRgb) / (maxRgb + minRgb)\n                : (maxRgb - minRgb) / (2 - maxRgb - minRgb);\n    }\n\n    if (r == maxRgb) h = (g - b) / (maxRgb - minRgb);\n    else if (g == maxRgb) h = 2 + (b - r) / (maxRgb - minRgb);\n    else if (b == maxRgb) h = 4 + (r - g) / (maxRgb - minRgb);\n\n    h *= 60;\n    if (h < 0) h += 360;\n    if (args.length > 3 && args[3] !== undefined) return [h, s, l, args[3]];\n    return [h, s, l];\n};\n\nexport default rgb2hsl;\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport hsl2rgb from './hsl2rgb.js';\nimport rgb2hsl from './rgb2hsl.js';\n\nColor.prototype.hsl = function () {\n    return rgb2hsl(this._rgb);\n};\n\nconst hsl = (...args) => new Color(...args, 'hsl');\nchroma.hsl = hsl;\n\ninput.format.hsl = hsl2rgb;\n\ninput.autodetect.push({\n    p: 2,\n    test: (...args) => {\n        args = unpack(args, 'hsl');\n        if (type(args) === 'array' && args.length === 3) {\n            return 'hsl';\n        }\n    }\n});\n\nexport { hsl };\n","import '../io/hsl/index.js';\nimport interpolate_hsx from './_hsx.js';\nimport index from './index.js';\n\nconst hsl = (col1, col2, f) => {\n    return interpolate_hsx(col1, col2, f, 'hsl');\n};\n\n// register interpolator\nindex.hsl = hsl;\n\nexport default hsl;\n","import { unpack } from '../../utils/index.js';\nconst { floor } = Math;\n\nconst hsv2rgb = (...args) => {\n    args = unpack(args, 'hsv');\n    let [h, s, v] = args;\n    let r, g, b;\n    v *= 255;\n    if (s === 0) {\n        r = g = b = v;\n    } else {\n        if (h === 360) h = 0;\n        if (h > 360) h -= 360;\n        if (h < 0) h += 360;\n        h /= 60;\n\n        const i = floor(h);\n        const f = h - i;\n        const p = v * (1 - s);\n        const q = v * (1 - s * f);\n        const t = v * (1 - s * (1 - f));\n\n        switch (i) {\n            case 0:\n                [r, g, b] = [v, t, p];\n                break;\n            case 1:\n                [r, g, b] = [q, v, p];\n                break;\n            case 2:\n                [r, g, b] = [p, v, t];\n                break;\n            case 3:\n                [r, g, b] = [p, q, v];\n                break;\n            case 4:\n                [r, g, b] = [t, p, v];\n                break;\n            case 5:\n                [r, g, b] = [v, p, q];\n                break;\n        }\n    }\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n};\n\nexport default hsv2rgb;\n","import { unpack } from '../../utils/index.js';\nconst { min, max } = Math;\n\n/*\n * supported arguments:\n * - rgb2hsv(r,g,b)\n * - rgb2hsv([r,g,b])\n * - rgb2hsv({r,g,b})\n */\nconst rgb2hsl = (...args) => {\n    args = unpack(args, 'rgb');\n    let [r, g, b] = args;\n    const min_ = min(r, g, b);\n    const max_ = max(r, g, b);\n    const delta = max_ - min_;\n    let h, s, v;\n    v = max_ / 255.0;\n    if (max_ === 0) {\n        h = Number.NaN;\n        s = 0;\n    } else {\n        s = delta / max_;\n        if (r === max_) h = (g - b) / delta;\n        if (g === max_) h = 2 + (b - r) / delta;\n        if (b === max_) h = 4 + (r - g) / delta;\n        h *= 60;\n        if (h < 0) h += 360;\n    }\n    return [h, s, v];\n};\n\nexport default rgb2hsl;\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport hsv2rgb from './hsv2rgb.js';\nimport rgb2hsv from './rgb2hsv.js';\n\nColor.prototype.hsv = function () {\n    return rgb2hsv(this._rgb);\n};\n\nconst hsv = (...args) => new Color(...args, 'hsv');\nchroma.hsv = hsv;\n\ninput.format.hsv = hsv2rgb;\n\ninput.autodetect.push({\n    p: 2,\n    test: (...args) => {\n        args = unpack(args, 'hsv');\n        if (type(args) === 'array' && args.length === 3) {\n            return 'hsv';\n        }\n    }\n});\n\nexport { hsv };\n","import '../io/hsv/index.js';\nimport interpolate_hsx from './_hsx.js';\nimport index from './index.js';\n\nconst hsv = (col1, col2, f) => {\n    return interpolate_hsx(col1, col2, f, 'hsv');\n};\n\n// register interpolator\nindex.hsv = hsv;\n\nexport default hsv;\n","// from https://www.w3.org/TR/css-color-4/multiply-matrices.js\nexport default function multiplyMatrices(A, B) {\n    let m = A.length;\n\n    if (!Array.isArray(A[0])) {\n        // A is vector, convert to [[a, b, c, ...]]\n        A = [A];\n    }\n\n    if (!Array.isArray(B[0])) {\n        // B is vector, convert to [[a], [b], [c], ...]]\n        B = B.map((x) => [x]);\n    }\n\n    let p = B[0].length;\n    let B_cols = B[0].map((_, i) => B.map((x) => x[i])); // transpose B\n    let product = A.map((row) =>\n        B_cols.map((col) => {\n            if (!Array.isArray(row)) {\n                return col.reduce((a, c) => a + c * row, 0);\n            }\n\n            return row.reduce((a, c, i) => a + c * (col[i] || 0), 0);\n        })\n    );\n\n    if (m === 1) {\n        product = product[0]; // Avoid [[a, b, c, ...]]\n    }\n\n    if (p === 1) {\n        return product.map((x) => x[0]); // Avoid [[a], [b], [c], ...]]\n    }\n\n    return product;\n}\n","import { unpack } from '../../utils/index.js';\nimport multiplyMatrices from '../../utils/multiply-matrices.js';\nimport { xyz2rgb } from '../lab/lab2rgb.js';\n\nconst oklab2rgb = (...args) => {\n    args = unpack(args, 'lab');\n    const [L, a, b, ...rest] = args;\n    const [X, Y, Z] = OKLab_to_XYZ([L, a, b]);\n    const [r, g, b_] = xyz2rgb(X, Y, Z);\n    return [r, g, b_, ...(rest.length > 0 && rest[0] < 1 ? [rest[0]] : [])];\n};\n\n// from https://www.w3.org/TR/css-color-4/#color-conversion-code\nfunction OKLab_to_XYZ(OKLab) {\n    // Given OKLab, convert to XYZ relative to D65\n    var LMStoXYZ = [\n        [1.2268798758459243, -0.5578149944602171, 0.2813910456659647],\n        [-0.0405757452148008, 1.112286803280317, -0.0717110580655164],\n        [-0.0763729366746601, -0.4214933324022432, 1.5869240198367816]\n    ];\n    var OKLabtoLMS = [\n        [1.0, 0.3963377773761749, 0.2158037573099136],\n        [1.0, -0.1055613458156586, -0.0638541728258133],\n        [1.0, -0.0894841775298119, -1.2914855480194092]\n    ];\n\n    var LMSnl = multiplyMatrices(OKLabtoLMS, OKLab);\n    return multiplyMatrices(\n        LMStoXYZ,\n        LMSnl.map((c) => c ** 3)\n    );\n}\n\nexport default oklab2rgb;\n","import { unpack } from '../../utils/index.js';\nimport multiplyMatrices from '../../utils/multiply-matrices.js';\nimport { rgb2xyz } from '../lab/rgb2lab.js';\n\nconst rgb2oklab = (...args) => {\n    const [r, g, b, ...rest] = unpack(args, 'rgb');\n    const xyz = rgb2xyz(r, g, b);\n    const oklab = XYZ_to_OKLab(xyz);\n    return [...oklab, ...(rest.length > 0 && rest[0] < 1 ? [rest[0]] : [])];\n};\n\n// from https://www.w3.org/TR/css-color-4/#color-conversion-code\nfunction XYZ_to_OKLab(XYZ) {\n    // Given XYZ relative to D65, convert to OKLab\n    const XYZtoLMS = [\n        [0.819022437996703, 0.3619062600528904, -0.1288737815209879],\n        [0.0329836539323885, 0.9292868615863434, 0.0361446663506424],\n        [0.0481771893596242, 0.2642395317527308, 0.6335478284694309]\n    ];\n    const LMStoOKLab = [\n        [0.210454268309314, 0.7936177747023054, -0.0040720430116193],\n        [1.9779985324311684, -2.4285922420485799, 0.450593709617411],\n        [0.0259040424655478, 0.7827717124575296, -0.8086757549230774]\n    ];\n\n    const LMS = multiplyMatrices(XYZtoLMS, XYZ);\n    // JavaScript Math.cbrt returns a sign-matched cube root\n    // beware if porting to other languages\n    // especially if tempted to use a general power function\n    return multiplyMatrices(\n        LMStoOKLab,\n        LMS.map((c) => Math.cbrt(c))\n    );\n    // L in range [0,1]. For use in CSS, multiply by 100 and add a percent\n}\n\nexport default rgb2oklab;\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport oklab2rgb from './oklab2rgb.js';\nimport rgb2oklab from './rgb2oklab.js';\n\nColor.prototype.oklab = function () {\n    return rgb2oklab(this._rgb);\n};\n\nconst oklab = (...args) => new Color(...args, 'oklab');\nObject.assign(chroma, { oklab });\n\ninput.format.oklab = oklab2rgb;\n\ninput.autodetect.push({\n    p: 2,\n    test: (...args) => {\n        args = unpack(args, 'oklab');\n        if (type(args) === 'array' && args.length === 3) {\n            return 'oklab';\n        }\n    }\n});\n\nexport { oklab };\n","import '../io/oklab/index.js';\nimport index from './index.js';\nimport Color from '../Color.js';\n\nconst oklab = (col1, col2, f) => {\n    const xyz0 = col1.oklab();\n    const xyz1 = col2.oklab();\n    return new Color(\n        xyz0[0] + f * (xyz1[0] - xyz0[0]),\n        xyz0[1] + f * (xyz1[1] - xyz0[1]),\n        xyz0[2] + f * (xyz1[2] - xyz0[2]),\n        'oklab'\n    );\n};\n\n// register interpolator\nindex.oklab = oklab;\n\nexport default oklab;\n","import '../io/lch/index.js';\nimport interpolate_hsx from './_hsx.js';\nimport index from './index.js';\n\nconst oklch = (col1, col2, f) => {\n    return interpolate_hsx(col1, col2, f, 'oklch');\n};\n\n// register interpolator\nindex.oklch = oklch;\n\nexport default oklch;\n","import Color from '../Color.js';\nimport { clip_rgb } from '../utils/index.js';\n\nconst { pow, sqrt, PI, cos, sin, atan2 } = Math;\n\nexport default (colors, mode = 'lrgb', weights = null) => {\n    const l = colors.length;\n    if (!weights) weights = Array.from(new Array(l)).map(() => 1);\n    // normalize weights\n    const k =\n        l /\n        weights.reduce(function (a, b) {\n            return a + b;\n        });\n    weights.forEach((w, i) => {\n        weights[i] *= k;\n    });\n    // convert colors to Color objects\n    colors = colors.map((c) => new Color(c));\n    if (mode === 'lrgb') {\n        return _average_lrgb(colors, weights);\n    }\n    const first = colors.shift();\n    const xyz = first.get(mode);\n    const cnt = [];\n    let dx = 0;\n    let dy = 0;\n    // initial color\n    for (let i = 0; i < xyz.length; i++) {\n        xyz[i] = (xyz[i] || 0) * weights[0];\n        cnt.push(isNaN(xyz[i]) ? 0 : weights[0]);\n        if (mode.charAt(i) === 'h' && !isNaN(xyz[i])) {\n            const A = (xyz[i] / 180) * PI;\n            dx += cos(A) * weights[0];\n            dy += sin(A) * weights[0];\n        }\n    }\n\n    let alpha = first.alpha() * weights[0];\n    colors.forEach((c, ci) => {\n        const xyz2 = c.get(mode);\n        alpha += c.alpha() * weights[ci + 1];\n        for (let i = 0; i < xyz.length; i++) {\n            if (!isNaN(xyz2[i])) {\n                cnt[i] += weights[ci + 1];\n                if (mode.charAt(i) === 'h') {\n                    const A = (xyz2[i] / 180) * PI;\n                    dx += cos(A) * weights[ci + 1];\n                    dy += sin(A) * weights[ci + 1];\n                } else {\n                    xyz[i] += xyz2[i] * weights[ci + 1];\n                }\n            }\n        }\n    });\n\n    for (let i = 0; i < xyz.length; i++) {\n        if (mode.charAt(i) === 'h') {\n            let A = (atan2(dy / cnt[i], dx / cnt[i]) / PI) * 180;\n            while (A < 0) A += 360;\n            while (A >= 360) A -= 360;\n            xyz[i] = A;\n        } else {\n            xyz[i] = xyz[i] / cnt[i];\n        }\n    }\n    alpha /= l;\n    return new Color(xyz, mode).alpha(alpha > 0.99999 ? 1 : alpha, true);\n};\n\nconst _average_lrgb = (colors, weights) => {\n    const l = colors.length;\n    const xyz = [0, 0, 0, 0];\n    for (let i = 0; i < colors.length; i++) {\n        const col = colors[i];\n        const f = weights[i] / l;\n        const rgb = col._rgb;\n        xyz[0] += pow(rgb[0], 2) * f;\n        xyz[1] += pow(rgb[1], 2) * f;\n        xyz[2] += pow(rgb[2], 2) * f;\n        xyz[3] += rgb[3] * f;\n    }\n    xyz[0] = sqrt(xyz[0]);\n    xyz[1] = sqrt(xyz[1]);\n    xyz[2] = sqrt(xyz[2]);\n    if (xyz[3] > 0.9999999) xyz[3] = 1;\n    return new Color(clip_rgb(xyz));\n};\n","// minimal multi-purpose interface\n\n// @requires utils color analyze\nimport chroma from '../chroma.js';\nimport { limit, type } from '../utils/index.js';\n\nconst { pow } = Math;\n\nexport default function (colors) {\n    // constructor\n    let _mode = 'rgb';\n    let _nacol = chroma('#ccc');\n    let _spread = 0;\n    // const _fixed = false;\n    let _domain = [0, 1];\n    let _pos = [];\n    let _padding = [0, 0];\n    let _classes = false;\n    let _colors = [];\n    let _out = false;\n    let _min = 0;\n    let _max = 1;\n    let _correctLightness = false;\n    let _colorCache = {};\n    let _useCache = true;\n    let _gamma = 1;\n\n    // private methods\n\n    const setColors = function (colors) {\n        colors = colors || ['#fff', '#000'];\n        if (\n            colors &&\n            type(colors) === 'string' &&\n            chroma.brewer &&\n            chroma.brewer[colors.toLowerCase()]\n        ) {\n            colors = chroma.brewer[colors.toLowerCase()];\n        }\n        if (type(colors) === 'array') {\n            // handle single color\n            if (colors.length === 1) {\n                colors = [colors[0], colors[0]];\n            }\n            // make a copy of the colors\n            colors = colors.slice(0);\n            // convert to chroma classes\n            for (let c = 0; c < colors.length; c++) {\n                colors[c] = chroma(colors[c]);\n            }\n            // auto-fill color position\n            _pos.length = 0;\n            for (let c = 0; c < colors.length; c++) {\n                _pos.push(c / (colors.length - 1));\n            }\n        }\n        resetCache();\n        return (_colors = colors);\n    };\n\n    const getClass = function (value) {\n        if (_classes != null) {\n            const n = _classes.length - 1;\n            let i = 0;\n            while (i < n && value >= _classes[i]) {\n                i++;\n            }\n            return i - 1;\n        }\n        return 0;\n    };\n\n    let tMapLightness = (t) => t;\n    let tMapDomain = (t) => t;\n\n    // const classifyValue = function(value) {\n    //     let val = value;\n    //     if (_classes.length > 2) {\n    //         const n = _classes.length-1;\n    //         const i = getClass(value);\n    //         const minc = _classes[0] + ((_classes[1]-_classes[0]) * (0 + (_spread * 0.5)));  // center of 1st class\n    //         const maxc = _classes[n-1] + ((_classes[n]-_classes[n-1]) * (1 - (_spread * 0.5)));  // center of last class\n    //         val = _min + ((((_classes[i] + ((_classes[i+1] - _classes[i]) * 0.5)) - minc) / (maxc-minc)) * (_max - _min));\n    //     }\n    //     return val;\n    // };\n\n    const getColor = function (val, bypassMap) {\n        let col, t;\n        if (bypassMap == null) {\n            bypassMap = false;\n        }\n        if (isNaN(val) || val === null) {\n            return _nacol;\n        }\n        if (!bypassMap) {\n            if (_classes && _classes.length > 2) {\n                // find the class\n                const c = getClass(val);\n                t = c / (_classes.length - 2);\n            } else if (_max !== _min) {\n                // just interpolate between min/max\n                t = (val - _min) / (_max - _min);\n            } else {\n                t = 1;\n            }\n        } else {\n            t = val;\n        }\n\n        // domain map\n        t = tMapDomain(t);\n\n        if (!bypassMap) {\n            t = tMapLightness(t); // lightness correction\n        }\n\n        if (_gamma !== 1) {\n            t = pow(t, _gamma);\n        }\n\n        t = _padding[0] + t * (1 - _padding[0] - _padding[1]);\n\n        t = limit(t, 0, 1);\n\n        const k = Math.floor(t * 10000);\n\n        if (_useCache && _colorCache[k]) {\n            col = _colorCache[k];\n        } else {\n            if (type(_colors) === 'array') {\n                //for i in [0.._pos.length-1]\n                for (let i = 0; i < _pos.length; i++) {\n                    const p = _pos[i];\n                    if (t <= p) {\n                        col = _colors[i];\n                        break;\n                    }\n                    if (t >= p && i === _pos.length - 1) {\n                        col = _colors[i];\n                        break;\n                    }\n                    if (t > p && t < _pos[i + 1]) {\n                        t = (t - p) / (_pos[i + 1] - p);\n                        col = chroma.interpolate(\n                            _colors[i],\n                            _colors[i + 1],\n                            t,\n                            _mode\n                        );\n                        break;\n                    }\n                }\n            } else if (type(_colors) === 'function') {\n                col = _colors(t);\n            }\n            if (_useCache) {\n                _colorCache[k] = col;\n            }\n        }\n        return col;\n    };\n\n    var resetCache = () => (_colorCache = {});\n\n    setColors(colors);\n\n    // public interface\n\n    const f = function (v) {\n        const c = chroma(getColor(v));\n        if (_out && c[_out]) {\n            return c[_out]();\n        } else {\n            return c;\n        }\n    };\n\n    f.classes = function (classes) {\n        if (classes != null) {\n            if (type(classes) === 'array') {\n                _classes = classes;\n                _domain = [classes[0], classes[classes.length - 1]];\n            } else {\n                const d = chroma.analyze(_domain);\n                if (classes === 0) {\n                    _classes = [d.min, d.max];\n                } else {\n                    _classes = chroma.limits(d, 'e', classes);\n                }\n            }\n            return f;\n        }\n        return _classes;\n    };\n\n    f.domain = function (domain) {\n        if (!arguments.length) {\n            return _domain;\n        }\n        _min = domain[0];\n        _max = domain[domain.length - 1];\n        _pos = [];\n        const k = _colors.length;\n        if (domain.length === k && _min !== _max) {\n            // update positions\n            for (let d of Array.from(domain)) {\n                _pos.push((d - _min) / (_max - _min));\n            }\n        } else {\n            for (let c = 0; c < k; c++) {\n                _pos.push(c / (k - 1));\n            }\n            if (domain.length > 2) {\n                // set domain map\n                const tOut = domain.map((d, i) => i / (domain.length - 1));\n                const tBreaks = domain.map((d) => (d - _min) / (_max - _min));\n                if (!tBreaks.every((val, i) => tOut[i] === val)) {\n                    tMapDomain = (t) => {\n                        if (t <= 0 || t >= 1) return t;\n                        let i = 0;\n                        while (t >= tBreaks[i + 1]) i++;\n                        const f =\n                            (t - tBreaks[i]) / (tBreaks[i + 1] - tBreaks[i]);\n                        const out = tOut[i] + f * (tOut[i + 1] - tOut[i]);\n                        return out;\n                    };\n                }\n            }\n        }\n        _domain = [_min, _max];\n        return f;\n    };\n\n    f.mode = function (_m) {\n        if (!arguments.length) {\n            return _mode;\n        }\n        _mode = _m;\n        resetCache();\n        return f;\n    };\n\n    f.range = function (colors, _pos) {\n        setColors(colors, _pos);\n        return f;\n    };\n\n    f.out = function (_o) {\n        _out = _o;\n        return f;\n    };\n\n    f.spread = function (val) {\n        if (!arguments.length) {\n            return _spread;\n        }\n        _spread = val;\n        return f;\n    };\n\n    f.correctLightness = function (v) {\n        if (v == null) {\n            v = true;\n        }\n        _correctLightness = v;\n        resetCache();\n        if (_correctLightness) {\n            tMapLightness = function (t) {\n                const L0 = getColor(0, true).lab()[0];\n                const L1 = getColor(1, true).lab()[0];\n                const pol = L0 > L1;\n                let L_actual = getColor(t, true).lab()[0];\n                const L_ideal = L0 + (L1 - L0) * t;\n                let L_diff = L_actual - L_ideal;\n                let t0 = 0;\n                let t1 = 1;\n                let max_iter = 20;\n                while (Math.abs(L_diff) > 1e-2 && max_iter-- > 0) {\n                    (function () {\n                        if (pol) {\n                            L_diff *= -1;\n                        }\n                        if (L_diff < 0) {\n                            t0 = t;\n                            t += (t1 - t) * 0.5;\n                        } else {\n                            t1 = t;\n                            t += (t0 - t) * 0.5;\n                        }\n                        L_actual = getColor(t, true).lab()[0];\n                        return (L_diff = L_actual - L_ideal);\n                    })();\n                }\n                return t;\n            };\n        } else {\n            tMapLightness = (t) => t;\n        }\n        return f;\n    };\n\n    f.padding = function (p) {\n        if (p != null) {\n            if (type(p) === 'number') {\n                p = [p, p];\n            }\n            _padding = p;\n            return f;\n        } else {\n            return _padding;\n        }\n    };\n\n    f.colors = function (numColors, out) {\n        // If no arguments are given, return the original colors that were provided\n        if (arguments.length < 2) {\n            out = 'hex';\n        }\n        let result = [];\n\n        if (arguments.length === 0) {\n            result = _colors.slice(0);\n        } else if (numColors === 1) {\n            result = [f(0.5)];\n        } else if (numColors > 1) {\n            const dm = _domain[0];\n            const dd = _domain[1] - dm;\n            result = __range__(0, numColors, false).map((i) =>\n                f(dm + (i / (numColors - 1)) * dd)\n            );\n        } else {\n            // returns all colors based on the defined classes\n            colors = [];\n            let samples = [];\n            if (_classes && _classes.length > 2) {\n                for (\n                    let i = 1, end = _classes.length, asc = 1 <= end;\n                    asc ? i < end : i > end;\n                    asc ? i++ : i--\n                ) {\n                    samples.push((_classes[i - 1] + _classes[i]) * 0.5);\n                }\n            } else {\n                samples = _domain;\n            }\n            result = samples.map((v) => f(v));\n        }\n\n        if (chroma[out]) {\n            result = result.map((c) => c[out]());\n        }\n        return result;\n    };\n\n    f.cache = function (c) {\n        if (c != null) {\n            _useCache = c;\n            return f;\n        } else {\n            return _useCache;\n        }\n    };\n\n    f.gamma = function (g) {\n        if (g != null) {\n            _gamma = g;\n            return f;\n        } else {\n            return _gamma;\n        }\n    };\n\n    f.nodata = function (d) {\n        if (d != null) {\n            _nacol = chroma(d);\n            return f;\n        } else {\n            return _nacol;\n        }\n    };\n\n    return f;\n}\n\nfunction __range__(left, right, inclusive) {\n    let range = [];\n    let ascending = left < right;\n    let end = !inclusive ? right : ascending ? right + 1 : right - 1;\n    for (let i = left; ascending ? i < end : i > end; ascending ? i++ : i--) {\n        range.push(i);\n    }\n    return range;\n}\n","//\n// interpolates between a set of colors uzing a bezier spline\n//\n\n// @requires utils lab\nimport Color from '../Color.js';\nimport '../io/lab/index.js';\nimport scale from './scale.js';\n\n// nth row of the pascal triangle\nconst binom_row = function (n) {\n    let row = [1, 1];\n    for (let i = 1; i < n; i++) {\n        let newrow = [1];\n        for (let j = 1; j <= row.length; j++) {\n            newrow[j] = (row[j] || 0) + row[j - 1];\n        }\n        row = newrow;\n    }\n    return row;\n};\n\nconst bezier = function (colors) {\n    let I, lab0, lab1, lab2;\n    colors = colors.map((c) => new Color(c));\n    if (colors.length === 2) {\n        // linear interpolation\n        [lab0, lab1] = colors.map((c) => c.lab());\n        I = function (t) {\n            const lab = [0, 1, 2].map((i) => lab0[i] + t * (lab1[i] - lab0[i]));\n            return new Color(lab, 'lab');\n        };\n    } else if (colors.length === 3) {\n        // quadratic bezier interpolation\n        [lab0, lab1, lab2] = colors.map((c) => c.lab());\n        I = function (t) {\n            const lab = [0, 1, 2].map(\n                (i) =>\n                    (1 - t) * (1 - t) * lab0[i] +\n                    2 * (1 - t) * t * lab1[i] +\n                    t * t * lab2[i]\n            );\n            return new Color(lab, 'lab');\n        };\n    } else if (colors.length === 4) {\n        // cubic bezier interpolation\n        let lab3;\n        [lab0, lab1, lab2, lab3] = colors.map((c) => c.lab());\n        I = function (t) {\n            const lab = [0, 1, 2].map(\n                (i) =>\n                    (1 - t) * (1 - t) * (1 - t) * lab0[i] +\n                    3 * (1 - t) * (1 - t) * t * lab1[i] +\n                    3 * (1 - t) * t * t * lab2[i] +\n                    t * t * t * lab3[i]\n            );\n            return new Color(lab, 'lab');\n        };\n    } else if (colors.length >= 5) {\n        // general case (degree n bezier)\n        let labs, row, n;\n        labs = colors.map((c) => c.lab());\n        n = colors.length - 1;\n        row = binom_row(n);\n        I = function (t) {\n            const u = 1 - t;\n            const lab = [0, 1, 2].map((i) =>\n                labs.reduce(\n                    (sum, el, j) =>\n                        sum + row[j] * u ** (n - j) * t ** j * el[i],\n                    0\n                )\n            );\n            return new Color(lab, 'lab');\n        };\n    } else {\n        throw new RangeError('No point in running bezier with only one color.');\n    }\n    return I;\n};\n\nexport default (colors) => {\n    const f = bezier(colors);\n    f.scale = () => scale(f);\n    return f;\n};\n","import chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport { unpack, type } from '../../utils/index.js';\nconst { round } = Math;\n\nColor.prototype.rgb = function (rnd = true) {\n    if (rnd === false) return this._rgb.slice(0, 3);\n    return this._rgb.slice(0, 3).map(round);\n};\n\nColor.prototype.rgba = function (rnd = true) {\n    return this._rgb.slice(0, 4).map((v, i) => {\n        return i < 3 ? (rnd === false ? v : round(v)) : v;\n    });\n};\n\nconst rgb = (...args) => new Color(...args, 'rgb');\nObject.assign(chroma, { rgb });\n\ninput.format.rgb = (...args) => {\n    const rgba = unpack(args, 'rgba');\n    if (rgba[3] === undefined) rgba[3] = 1;\n    return rgba;\n};\n\ninput.autodetect.push({\n    p: 3,\n    test: (...args) => {\n        args = unpack(args, 'rgba');\n        if (\n            type(args) === 'array' &&\n            (args.length === 3 ||\n                (args.length === 4 &&\n                    type(args[3]) == 'number' &&\n                    args[3] >= 0 &&\n                    args[3] <= 1))\n        ) {\n            return 'rgb';\n        }\n    }\n});\n\nexport { rgb };\n","/*\n * interpolates between a set of colors uzing a bezier spline\n * blend mode formulas taken from https://web.archive.org/web/20180110014946/http://www.venture-ware.com/kevin/coding/lets-learn-math-photoshop-blend-modes/\n */\n\nimport '../io/rgb/index.js';\nimport chroma from '../chroma.js';\n\nconst blend = (bottom, top, mode) => {\n    if (!blend[mode]) {\n        throw new Error('unknown blend mode ' + mode);\n    }\n    return blend[mode](bottom, top);\n};\n\nconst blend_f = (f) => (bottom, top) => {\n    const c0 = chroma(top).rgb();\n    const c1 = chroma(bottom).rgb();\n    return chroma.rgb(f(c0, c1));\n};\n\nconst each = (f) => (c0, c1) => {\n    const out = [];\n    out[0] = f(c0[0], c1[0]);\n    out[1] = f(c0[1], c1[1]);\n    out[2] = f(c0[2], c1[2]);\n    return out;\n};\n\nconst normal = (a) => a;\nconst multiply = (a, b) => (a * b) / 255;\nconst darken = (a, b) => (a > b ? b : a);\nconst lighten = (a, b) => (a > b ? a : b);\nconst screen = (a, b) => 255 * (1 - (1 - a / 255) * (1 - b / 255));\nconst overlay = (a, b) =>\n    b < 128 ? (2 * a * b) / 255 : 255 * (1 - 2 * (1 - a / 255) * (1 - b / 255));\nconst burn = (a, b) => 255 * (1 - (1 - b / 255) / (a / 255));\nconst dodge = (a, b) => {\n    if (a === 255) return 255;\n    a = (255 * (b / 255)) / (1 - a / 255);\n    return a > 255 ? 255 : a;\n};\n\n// # add = (a,b) ->\n// #     if (a + b > 255) then 255 else a + b\n\nblend.normal = blend_f(each(normal));\nblend.multiply = blend_f(each(multiply));\nblend.screen = blend_f(each(screen));\nblend.overlay = blend_f(each(overlay));\nblend.darken = blend_f(each(darken));\nblend.lighten = blend_f(each(lighten));\nblend.dodge = blend_f(each(dodge));\nblend.burn = blend_f(each(burn));\n// blend.add = blend_f(each(add));\n\nexport default blend;\n","// cubehelix interpolation\n// based on D.A. Green \"A colour scheme for the display of astronomical intensity images\"\n// http://astron-soc.in/bulletin/11June/289392011.pdf\nimport { type, clip_rgb, TWOPI } from '../utils/index.js';\nimport chroma from '../chroma.js';\nconst { pow, sin, cos } = Math;\n\nexport default function (\n    start = 300,\n    rotations = -1.5,\n    hue = 1,\n    gamma = 1,\n    lightness = [0, 1]\n) {\n    let dh = 0,\n        dl;\n    if (type(lightness) === 'array') {\n        dl = lightness[1] - lightness[0];\n    } else {\n        dl = 0;\n        lightness = [lightness, lightness];\n    }\n    const f = function (fract) {\n        const a = TWOPI * ((start + 120) / 360 + rotations * fract);\n        const l = pow(lightness[0] + dl * fract, gamma);\n        const h = dh !== 0 ? hue[0] + fract * dh : hue;\n        const amp = (h * l * (1 - l)) / 2;\n        const cos_a = cos(a);\n        const sin_a = sin(a);\n        const r = l + amp * (-0.14861 * cos_a + 1.78277 * sin_a);\n        const g = l + amp * (-0.29227 * cos_a - 0.90649 * sin_a);\n        const b = l + amp * (+1.97294 * cos_a);\n        return chroma(clip_rgb([r * 255, g * 255, b * 255, 1]));\n    };\n    f.start = function (s) {\n        if (s == null) {\n            return start;\n        }\n        start = s;\n        return f;\n    };\n    f.rotations = function (r) {\n        if (r == null) {\n            return rotations;\n        }\n        rotations = r;\n        return f;\n    };\n    f.gamma = function (g) {\n        if (g == null) {\n            return gamma;\n        }\n        gamma = g;\n        return f;\n    };\n    f.hue = function (h) {\n        if (h == null) {\n            return hue;\n        }\n        hue = h;\n        if (type(hue) === 'array') {\n            dh = hue[1] - hue[0];\n            if (dh === 0) {\n                hue = hue[1];\n            }\n        } else {\n            dh = 0;\n        }\n        return f;\n    };\n    f.lightness = function (h) {\n        if (h == null) {\n            return lightness;\n        }\n        if (type(h) === 'array') {\n            lightness = h;\n            dl = h[1] - h[0];\n        } else {\n            lightness = [h, h];\n            dl = 0;\n        }\n        return f;\n    };\n    f.scale = () => chroma.scale(f);\n    f.hue(hue);\n    return f;\n}\n","import Color from '../Color.js';\nconst digits = '0123456789abcdef';\n\nconst { floor, random } = Math;\n\nexport default () => {\n    let code = '#';\n    for (let i = 0; i < 6; i++) {\n        code += digits.charAt(floor(random() * 16));\n    }\n    return new Color(code, 'hex');\n};\n","import type from './type.js';\n\nconst { log, pow, floor, abs } = Math;\n\nexport function analyze(data, key = null) {\n    const r = {\n        min: Number.MAX_VALUE,\n        max: Number.MAX_VALUE * -1,\n        sum: 0,\n        values: [],\n        count: 0\n    };\n    if (type(data) === 'object') {\n        data = Object.values(data);\n    }\n    data.forEach((val) => {\n        if (key && type(val) === 'object') val = val[key];\n        if (val !== undefined && val !== null && !isNaN(val)) {\n            r.values.push(val);\n            r.sum += val;\n            if (val < r.min) r.min = val;\n            if (val > r.max) r.max = val;\n            r.count += 1;\n        }\n    });\n\n    r.domain = [r.min, r.max];\n\n    r.limits = (mode, num) => limits(r, mode, num);\n\n    return r;\n}\n\nexport function limits(data, mode = 'equal', num = 7) {\n    if (type(data) == 'array') {\n        data = analyze(data);\n    }\n    const { min, max } = data;\n    const values = data.values.sort((a, b) => a - b);\n\n    if (num === 1) {\n        return [min, max];\n    }\n\n    const limits = [];\n\n    if (mode.substr(0, 1) === 'c') {\n        // continuous\n        limits.push(min);\n        limits.push(max);\n    }\n\n    if (mode.substr(0, 1) === 'e') {\n        // equal interval\n        limits.push(min);\n        for (let i = 1; i < num; i++) {\n            limits.push(min + (i / num) * (max - min));\n        }\n        limits.push(max);\n    } else if (mode.substr(0, 1) === 'l') {\n        // log scale\n        if (min <= 0) {\n            throw new Error(\n                'Logarithmic scales are only possible for values > 0'\n            );\n        }\n        const min_log = Math.LOG10E * log(min);\n        const max_log = Math.LOG10E * log(max);\n        limits.push(min);\n        for (let i = 1; i < num; i++) {\n            limits.push(pow(10, min_log + (i / num) * (max_log - min_log)));\n        }\n        limits.push(max);\n    } else if (mode.substr(0, 1) === 'q') {\n        // quantile scale\n        limits.push(min);\n        for (let i = 1; i < num; i++) {\n            const p = ((values.length - 1) * i) / num;\n            const pb = floor(p);\n            if (pb === p) {\n                limits.push(values[pb]);\n            } else {\n                // p > pb\n                const pr = p - pb;\n                limits.push(values[pb] * (1 - pr) + values[pb + 1] * pr);\n            }\n        }\n        limits.push(max);\n    } else if (mode.substr(0, 1) === 'k') {\n        // k-means clustering\n        /*\n        implementation based on\n        http://code.google.com/p/figue/source/browse/trunk/figue.js#336\n        simplified for 1-d input values\n        */\n        let cluster;\n        const n = values.length;\n        const assignments = new Array(n);\n        const clusterSizes = new Array(num);\n        let repeat = true;\n        let nb_iters = 0;\n        let centroids = null;\n\n        // get seed values\n        centroids = [];\n        centroids.push(min);\n        for (let i = 1; i < num; i++) {\n            centroids.push(min + (i / num) * (max - min));\n        }\n        centroids.push(max);\n\n        while (repeat) {\n            // assignment step\n            for (let j = 0; j < num; j++) {\n                clusterSizes[j] = 0;\n            }\n            for (let i = 0; i < n; i++) {\n                const value = values[i];\n                let mindist = Number.MAX_VALUE;\n                let best;\n                for (let j = 0; j < num; j++) {\n                    const dist = abs(centroids[j] - value);\n                    if (dist < mindist) {\n                        mindist = dist;\n                        best = j;\n                    }\n                    clusterSizes[best]++;\n                    assignments[i] = best;\n                }\n            }\n\n            // update centroids step\n            const newCentroids = new Array(num);\n            for (let j = 0; j < num; j++) {\n                newCentroids[j] = null;\n            }\n            for (let i = 0; i < n; i++) {\n                cluster = assignments[i];\n                if (newCentroids[cluster] === null) {\n                    newCentroids[cluster] = values[i];\n                } else {\n                    newCentroids[cluster] += values[i];\n                }\n            }\n            for (let j = 0; j < num; j++) {\n                newCentroids[j] *= 1 / clusterSizes[j];\n            }\n\n            // check convergence\n            repeat = false;\n            for (let j = 0; j < num; j++) {\n                if (newCentroids[j] !== centroids[j]) {\n                    repeat = true;\n                    break;\n                }\n            }\n\n            centroids = newCentroids;\n            nb_iters++;\n\n            if (nb_iters > 200) {\n                repeat = false;\n            }\n        }\n\n        // finished k-means clustering\n        // the next part is borrowed from gabrielflor.it\n        const kClusters = {};\n        for (let j = 0; j < num; j++) {\n            kClusters[j] = [];\n        }\n        for (let i = 0; i < n; i++) {\n            cluster = assignments[i];\n            kClusters[cluster].push(values[i]);\n        }\n        let tmpKMeansBreaks = [];\n        for (let j = 0; j < num; j++) {\n            tmpKMeansBreaks.push(kClusters[j][0]);\n            tmpKMeansBreaks.push(kClusters[j][kClusters[j].length - 1]);\n        }\n        tmpKMeansBreaks = tmpKMeansBreaks.sort((a, b) => a - b);\n        limits.push(tmpKMeansBreaks[0]);\n        for (let i = 1; i < tmpKMeansBreaks.length; i += 2) {\n            const v = tmpKMeansBreaks[i];\n            if (!isNaN(v) && limits.indexOf(v) === -1) {\n                limits.push(v);\n            }\n        }\n    }\n    return limits;\n}\n","import Color from '../Color.js';\nimport '../ops/luminance.js';\n\nexport default (a, b) => {\n    // WCAG contrast ratio\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef\n    a = new Color(a);\n    b = new Color(b);\n    const l1 = a.luminance();\n    const l2 = b.luminance();\n    return l1 > l2 ? (l1 + 0.05) / (l2 + 0.05) : (l2 + 0.05) / (l1 + 0.05);\n};\n","import Color from '../Color.js';\nimport mix from '../generator/mix.js';\n\n/**\n * @license\n *\n * The APCA contrast prediction algorithm is based of the formulas published\n * in the APCA-1.0.98G specification by Myndex. The specification is available at:\n * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg\n *\n * Note that the APCA implementation is still beta, so please update to\n * future versions of chroma.js when they become available.\n *\n * You can read more about the APCA Readability Criterion at\n * https://readtech.org/ARC/\n */\n\n// constants\nconst W_offset = 0.027;\nconst P_in = 0.0005;\nconst P_out = 0.1;\nconst R_scale = 1.14;\nconst B_threshold = 0.022;\nconst B_exp = 1.414;\n\nexport default (text, bg) => {\n    // parse input colors\n    text = new Color(text);\n    bg = new Color(bg);\n    // if text color has alpha, blend against background\n    if (text.alpha() < 1) {\n        text = mix(bg, text, text.alpha(), 'rgb');\n    }\n    const l_text = lum(...text.rgb());\n    const l_bg = lum(...bg.rgb());\n\n    // soft clamp black levels\n    const Y_text =\n        l_text >= B_threshold\n            ? l_text\n            : l_text + Math.pow(B_threshold - l_text, B_exp);\n    const Y_bg =\n        l_bg >= B_threshold ? l_bg : l_bg + Math.pow(B_threshold - l_bg, B_exp);\n\n    // normal polarity (dark text on light background)\n    const S_norm = Math.pow(Y_bg, 0.56) - Math.pow(Y_text, 0.57);\n    // reverse polarity (light text on dark background)\n    const S_rev = Math.pow(Y_bg, 0.65) - Math.pow(Y_text, 0.62);\n    // clamp noise then scale\n    const C =\n        Math.abs(Y_bg - Y_text) < P_in\n            ? 0\n            : Y_text < Y_bg\n              ? S_norm * R_scale\n              : S_rev * R_scale;\n    // clamp minimum contrast then offset\n    const S_apc = Math.abs(C) < P_out ? 0 : C > 0 ? C - W_offset : C + W_offset;\n    // scale to 100\n    return S_apc * 100;\n};\n\nfunction lum(r, g, b) {\n    return (\n        0.2126729 * Math.pow(r / 255, 2.4) +\n        0.7151522 * Math.pow(g / 255, 2.4) +\n        0.072175 * Math.pow(b / 255, 2.4)\n    );\n}\n","import Color from '../Color.js';\nconst { sqrt, pow, min, max, atan2, abs, cos, sin, exp, PI } = Math;\n\nexport default function (a, b, Kl = 1, Kc = 1, Kh = 1) {\n    // Delta E (CIE 2000)\n    // see http://www.brucelindbloom.com/index.html?Eqn_DeltaE_CIE2000.html\n    var rad2deg = function (rad) {\n        return (360 * rad) / (2 * PI);\n    };\n    var deg2rad = function (deg) {\n        return (2 * PI * deg) / 360;\n    };\n    a = new Color(a);\n    b = new Color(b);\n    const [L1, a1, b1] = Array.from(a.lab());\n    const [L2, a2, b2] = Array.from(b.lab());\n    const avgL = (L1 + L2) / 2;\n    const C1 = sqrt(pow(a1, 2) + pow(b1, 2));\n    const C2 = sqrt(pow(a2, 2) + pow(b2, 2));\n    const avgC = (C1 + C2) / 2;\n    const G = 0.5 * (1 - sqrt(pow(avgC, 7) / (pow(avgC, 7) + pow(25, 7))));\n    const a1p = a1 * (1 + G);\n    const a2p = a2 * (1 + G);\n    const C1p = sqrt(pow(a1p, 2) + pow(b1, 2));\n    const C2p = sqrt(pow(a2p, 2) + pow(b2, 2));\n    const avgCp = (C1p + C2p) / 2;\n    const arctan1 = rad2deg(atan2(b1, a1p));\n    const arctan2 = rad2deg(atan2(b2, a2p));\n    const h1p = arctan1 >= 0 ? arctan1 : arctan1 + 360;\n    const h2p = arctan2 >= 0 ? arctan2 : arctan2 + 360;\n    const avgHp =\n        abs(h1p - h2p) > 180 ? (h1p + h2p + 360) / 2 : (h1p + h2p) / 2;\n    const T =\n        1 -\n        0.17 * cos(deg2rad(avgHp - 30)) +\n        0.24 * cos(deg2rad(2 * avgHp)) +\n        0.32 * cos(deg2rad(3 * avgHp + 6)) -\n        0.2 * cos(deg2rad(4 * avgHp - 63));\n    let deltaHp = h2p - h1p;\n    deltaHp =\n        abs(deltaHp) <= 180\n            ? deltaHp\n            : h2p <= h1p\n              ? deltaHp + 360\n              : deltaHp - 360;\n    deltaHp = 2 * sqrt(C1p * C2p) * sin(deg2rad(deltaHp) / 2);\n    const deltaL = L2 - L1;\n    const deltaCp = C2p - C1p;\n    const sl = 1 + (0.015 * pow(avgL - 50, 2)) / sqrt(20 + pow(avgL - 50, 2));\n    const sc = 1 + 0.045 * avgCp;\n    const sh = 1 + 0.015 * avgCp * T;\n    const deltaTheta = 30 * exp(-pow((avgHp - 275) / 25, 2));\n    const Rc = 2 * sqrt(pow(avgCp, 7) / (pow(avgCp, 7) + pow(25, 7)));\n    const Rt = -Rc * sin(2 * deg2rad(deltaTheta));\n    const result = sqrt(\n        pow(deltaL / (Kl * sl), 2) +\n            pow(deltaCp / (Kc * sc), 2) +\n            pow(deltaHp / (Kh * sh), 2) +\n            Rt * (deltaCp / (Kc * sc)) * (deltaHp / (Kh * sh))\n    );\n    return max(0, min(100, result));\n}\n","import Color from '../Color.js';\n\n// simple Euclidean distance\nexport default function (a, b, mode = 'lab') {\n    // Delta E (CIE 1976)\n    // see http://www.brucelindbloom.com/index.html?Equations.html\n    a = new Color(a);\n    b = new Color(b);\n    const l1 = a.get(mode);\n    const l2 = b.get(mode);\n    let sum_sq = 0;\n    for (let i in l1) {\n        const d = (l1[i] || 0) - (l2[i] || 0);\n        sum_sq += d * d;\n    }\n    return Math.sqrt(sum_sq);\n}\n","import Color from '../Color.js';\n\nexport default (...args) => {\n    try {\n        new Color(...args);\n        return true;\n        // eslint-disable-next-line\n    } catch (e) {\n        return false;\n    }\n};\n","// some pre-defined color scales:\nimport chroma from '../chroma.js';\nimport '../io/hsl/index.js';\nimport scale from '../generator/scale.js';\n\nexport default {\n    cool() {\n        return scale([chroma.hsl(180, 1, 0.9), chroma.hsl(250, 0.7, 0.4)]);\n    },\n    hot() {\n        return scale(['#000', '#f00', '#ff0', '#fff'], [0, 0.25, 0.75, 1]).mode(\n            'rgb'\n        );\n    }\n};\n","/**\n    ColorBrewer colors for chroma.js\n\n    Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The\n    Pennsylvania State University.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software distributed\n    under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n    CONDITIONS OF ANY KIND, either express or implied. See the License for the\n    specific language governing permissions and limitations under the License.\n*/\n\nconst colorbrewer = {\n    // sequential\n    OrRd: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#b30000', '#7f0000'],\n    PuBu: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#045a8d', '#023858'],\n    BuPu: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#810f7c', '#4d004b'],\n    Oranges: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#a63603', '#7f2704'],\n    BuGn: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#006d2c', '#00441b'],\n    YlOrBr: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#993404', '#662506'],\n    YlGn: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#006837', '#004529'],\n    Reds: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d'],\n    RdPu: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177', '#49006a'],\n    Greens: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#006d2c', '#00441b'],\n    YlGnBu: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#253494', '#081d58'],\n    Purples: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#54278f', '#3f007d'],\n    GnBu: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#0868ac', '#084081'],\n    Greys: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525', '#000000'],\n    YlOrRd: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#bd0026', '#800026'],\n    PuRd: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#980043', '#67001f'],\n    Blues: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b'],\n    PuBuGn: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016c59', '#014636'],\n    Viridis: ['#440154', '#482777', '#3f4a8a', '#31678e', '#26838f', '#1f9d8a', '#6cce5a', '#b6de2b', '#fee825'],\n\n    // diverging\n    Spectral: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2'],\n    RdYlGn: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837'],\n    RdBu: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061'],\n    PiYG: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419'],\n    PRGn: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b'],\n    RdYlBu: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695'],\n    BrBG: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30'],\n    RdGy: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a'],\n    PuOr: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b'],\n\n    // qualitative\n    Set2: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494', '#b3b3b3'],\n    Accent: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17', '#666666'],\n    Set1: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf', '#999999'],\n    Set3: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5', '#ffed6f'],\n    Dark2: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d', '#666666'],\n    Paired: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99', '#b15928'],\n    Pastel2: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc', '#cccccc'],\n    Pastel1: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec', '#f2f2f2']\n};\n\nconst colorbrewerTypes = Object.keys(colorbrewer);\nconst typeMap = new Map(colorbrewerTypes.map((key) => [key.toLowerCase(), key]));\n\n// use Proxy to allow case-insensitive access to palettes\nconst colorbrewerProxy =\n    typeof Proxy === 'function'\n        ? new Proxy(colorbrewer, {\n              get(target, prop) {\n                  const lower = prop.toLowerCase();\n                  if (typeMap.has(lower)) {\n                      return target[typeMap.get(lower)];\n                  }\n              },\n              getOwnPropertyNames() {\n                  return Object.getOwnPropertyNames(colorbrewerTypes);\n              }\n          })\n        : colorbrewer;\n\nexport default colorbrewerProxy;\n","import { unpack } from '../../utils/index.js';\n\nconst cmyk2rgb = (...args) => {\n    args = unpack(args, 'cmyk');\n    const [c, m, y, k] = args;\n    const alpha = args.length > 4 ? args[4] : 1;\n    if (k === 1) return [0, 0, 0, alpha];\n    return [\n        c >= 1 ? 0 : 255 * (1 - c) * (1 - k), // r\n        m >= 1 ? 0 : 255 * (1 - m) * (1 - k), // g\n        y >= 1 ? 0 : 255 * (1 - y) * (1 - k), // b\n        alpha\n    ];\n};\n\nexport default cmyk2rgb;\n","import { unpack } from '../../utils/index.js';\nconst { max } = Math;\n\nconst rgb2cmyk = (...args) => {\n    let [r, g, b] = unpack(args, 'rgb');\n    r = r / 255;\n    g = g / 255;\n    b = b / 255;\n    const k = 1 - max(r, max(g, b));\n    const f = k < 1 ? 1 / (1 - k) : 0;\n    const c = (1 - r - k) * f;\n    const m = (1 - g - k) * f;\n    const y = (1 - b - k) * f;\n    return [c, m, y, k];\n};\n\nexport default rgb2cmyk;\n","import chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport { unpack, type } from '../../utils/index.js';\nimport cmyk2rgb from './cmyk2rgb.js';\nimport rgb2cmyk from './rgb2cmyk.js';\n\nColor.prototype.cmyk = function () {\n    return rgb2cmyk(this._rgb);\n};\n\nconst cmyk = (...args) => new Color(...args, 'cmyk');\nObject.assign(chroma, { cmyk });\n\ninput.format.cmyk = cmyk2rgb;\n\ninput.autodetect.push({\n    p: 2,\n    test: (...args) => {\n        args = unpack(args, 'cmyk');\n        if (type(args) === 'array' && args.length === 4) {\n            return 'cmyk';\n        }\n    }\n});\n\nexport { cmyk };\n","import { unpack, last, rnd2 } from '../../utils/index.js';\n\n/*\n * supported arguments:\n * - hsl2css(h,s,l)\n * - hsl2css(h,s,l,a)\n * - hsl2css([h,s,l], mode)\n * - hsl2css([h,s,l,a], mode)\n * - hsl2css({h,s,l,a}, mode)\n */\nconst hsl2css = (...args) => {\n    const hsla = unpack(args, 'hsla');\n    let mode = last(args) || 'lsa';\n    hsla[0] = rnd2(hsla[0] || 0) + 'deg';\n    hsla[1] = rnd2(hsla[1] * 100) + '%';\n    hsla[2] = rnd2(hsla[2] * 100) + '%';\n    if (mode === 'hsla' || (hsla.length > 3 && hsla[3] < 1)) {\n        hsla[3] = '/ ' + (hsla.length > 3 ? hsla[3] : 1);\n        mode = 'hsla';\n    } else {\n        hsla.length = 3;\n    }\n    return `${mode.substr(0, 3)}(${hsla.join(' ')})`;\n};\n\nexport default hsl2css;\n","import { unpack, last, rnd2 } from '../../utils/index.js';\n\n/*\n * supported arguments:\n * - lab2css(l,a,b)\n * - lab2css(l,a,b,alpha)\n * - lab2css([l,a,b], mode)\n * - lab2css([l,a,b,alpha], mode)\n */\nconst lab2css = (...args) => {\n    const laba = unpack(args, 'lab');\n    let mode = last(args) || 'lab';\n    laba[0] = rnd2(laba[0]) + '%';\n    laba[1] = rnd2(laba[1]);\n    laba[2] = rnd2(laba[2]);\n    if (mode === 'laba' || (laba.length > 3 && laba[3] < 1)) {\n        laba[3] = '/ ' + (laba.length > 3 ? laba[3] : 1);\n    } else {\n        laba.length = 3;\n    }\n    return `lab(${laba.join(' ')})`;\n};\n\nexport default lab2css;\n","import { unpack, last, rnd2 } from '../../utils/index.js';\n\n/*\n * supported arguments:\n * - lab2css(l,a,b)\n * - lab2css(l,a,b,alpha)\n * - lab2css([l,a,b], mode)\n * - lab2css([l,a,b,alpha], mode)\n */\nconst lch2css = (...args) => {\n    const lcha = unpack(args, 'lch');\n    let mode = last(args) || 'lab';\n    lcha[0] = rnd2(lcha[0]) + '%';\n    lcha[1] = rnd2(lcha[1]);\n    lcha[2] = isNaN(lcha[2]) ? 'none' : rnd2(lcha[2]) + 'deg'; // add deg unit to hue\n    if (mode === 'lcha' || (lcha.length > 3 && lcha[3] < 1)) {\n        lcha[3] = '/ ' + (lcha.length > 3 ? lcha[3] : 1);\n    } else {\n        lcha.length = 3;\n    }\n    return `lch(${lcha.join(' ')})`;\n};\n\nexport default lch2css;\n","import { unpack, rnd2, rnd3 } from '../../utils/index.js';\n\nconst oklab2css = (...args) => {\n    const laba = unpack(args, 'lab');\n    laba[0] = rnd2(laba[0] * 100) + '%';\n    laba[1] = rnd3(laba[1]);\n    laba[2] = rnd3(laba[2]);\n    if (laba.length > 3 && laba[3] < 1) {\n        laba[3] = '/ ' + (laba.length > 3 ? laba[3] : 1);\n    } else {\n        laba.length = 3;\n    }\n    return `oklab(${laba.join(' ')})`;\n};\n\nexport default oklab2css;\n","import { unpack } from '../../utils/index.js';\nimport rgb2oklab from '../oklab/rgb2oklab.js';\nimport lab2lch from '../lch/lab2lch.js';\n\nconst rgb2oklch = (...args) => {\n    const [r, g, b, ...rest] = unpack(args, 'rgb');\n    const [l, a, b_] = rgb2oklab(r, g, b);\n    const [L, c, h] = lab2lch(l, a, b_);\n    return [L, c, h, ...(rest.length > 0 && rest[0] < 1 ? [rest[0]] : [])];\n};\n\nexport default rgb2oklch;\n","import { unpack, rnd2, rnd3 } from '../../utils/index.js';\n\nconst oklch2css = (...args) => {\n    const lcha = unpack(args, 'lch');\n    lcha[0] = rnd2(lcha[0] * 100) + '%';\n    lcha[1] = rnd3(lcha[1]);\n    lcha[2] = isNaN(lcha[2]) ? 'none' : rnd2(lcha[2]) + 'deg'; // add deg unit to hue\n    if (lcha.length > 3 && lcha[3] < 1) {\n        lcha[3] = '/ ' + (lcha.length > 3 ? lcha[3] : 1);\n    } else {\n        lcha.length = 3;\n    }\n    return `oklch(${lcha.join(' ')})`;\n};\n\nexport default oklch2css;\n","import { unpack, last } from '../../utils/index.js';\nimport hsl2css from './hsl2css.js';\nimport rgb2hsl from '../hsl/rgb2hsl.js';\nimport lab2css from './lab2css.js';\nimport rgb2lab from '../lab/rgb2lab.js';\nimport lch2css from './lch2css.js';\nimport rgb2lch from '../lch/rgb2lch.js';\nimport rgb2oklab from '../oklab/rgb2oklab.js';\nimport oklab2css from './oklab2css.js';\nimport rgb2oklch from '../oklch/rgb2oklch.js';\nimport oklch2css from './oklch2css.js';\nimport { getLabWhitePoint, setLabWhitePoint } from '../lab/lab-constants.js';\nconst { round } = Math;\n\n/*\n * supported arguments:\n * - rgb2css(r,g,b)\n * - rgb2css(r,g,b,a)\n * - rgb2css([r,g,b], mode)\n * - rgb2css([r,g,b,a], mode)\n * - rgb2css({r,g,b,a}, mode)\n */\nconst rgb2css = (...args) => {\n    const rgba = unpack(args, 'rgba');\n    let mode = last(args) || 'rgb';\n    if (mode.substr(0, 3) === 'hsl') {\n        return hsl2css(rgb2hsl(rgba), mode);\n    }\n    if (mode.substr(0, 3) === 'lab') {\n        // change to D50 lab whitepoint since this is what W3C is using for CSS Lab colors\n        const prevWhitePoint = getLabWhitePoint();\n        setLabWhitePoint('d50');\n        const cssColor = lab2css(rgb2lab(rgba), mode);\n        setLabWhitePoint(prevWhitePoint);\n        return cssColor;\n    }\n    if (mode.substr(0, 3) === 'lch') {\n        // change to D50 lab whitepoint since this is what W3C is using for CSS Lab colors\n        const prevWhitePoint = getLabWhitePoint();\n        setLabWhitePoint('d50');\n        const cssColor = lch2css(rgb2lch(rgba), mode);\n        setLabWhitePoint(prevWhitePoint);\n        return cssColor;\n    }\n    if (mode.substr(0, 5) === 'oklab') {\n        return oklab2css(rgb2oklab(rgba));\n    }\n    if (mode.substr(0, 5) === 'oklch') {\n        return oklch2css(rgb2oklch(rgba));\n    }\n    rgba[0] = round(rgba[0]);\n    rgba[1] = round(rgba[1]);\n    rgba[2] = round(rgba[2]);\n    if (mode === 'rgba' || (rgba.length > 3 && rgba[3] < 1)) {\n        rgba[3] = '/ ' + (rgba.length > 3 ? rgba[3] : 1);\n        mode = 'rgba';\n    }\n    return `${mode.substr(0, 3)}(${rgba.slice(0, mode === 'rgb' ? 3 : 4).join(' ')})`;\n};\n\nexport default rgb2css;\n","import { unpack } from '../../utils/index.js';\nimport lch2lab from '../lch/lch2lab.js';\nimport oklab2rgb from '../oklab/oklab2rgb.js';\n\nconst oklch2rgb = (...args) => {\n    args = unpack(args, 'lch');\n    const [l, c, h, ...rest] = args;\n    const [L, a, b_] = lch2lab(l, c, h);\n    const [r, g, b] = oklab2rgb(L, a, b_);\n    return [r, g, b, ...(rest.length > 0 && rest[0] < 1 ? [rest[0]] : [])];\n};\n\nexport default oklch2rgb;\n","import hsl2rgb from '../hsl/hsl2rgb.js';\nimport lab2rgb from '../lab/lab2rgb.js';\nimport lch2rgb from '../lch/lch2rgb.js';\nimport oklab2rgb from '../oklab/oklab2rgb.js';\nimport oklch2rgb from '../oklch/oklch2rgb.js';\nimport input from '../input.js';\nimport limit from '../../utils/limit.js';\nimport { getLabWhitePoint, setLabWhitePoint } from '../lab/lab-constants.js';\n\nconst INT_OR_PCT = /((?:-?\\d+)|(?:-?\\d+(?:\\.\\d+)?)%|none)/.source;\nconst FLOAT_OR_PCT = /((?:-?(?:\\d+(?:\\.\\d*)?|\\.\\d+)%?)|none)/.source;\nconst PCT = /((?:-?(?:\\d+(?:\\.\\d*)?|\\.\\d+)%)|none)/.source;\nconst RE_S = /\\s*/.source;\nconst SEP = /\\s+/.source;\nconst COMMA = /\\s*,\\s*/.source;\nconst ANLGE = /((?:-?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:deg)?)|none)/.source;\nconst ALPHA = /\\s*(?:\\/\\s*((?:[01]|[01]?\\.\\d+)|\\d+(?:\\.\\d+)?%))?/.source;\n\n// e.g. rgb(250 20 0), rgb(100% 50% 20%), rgb(100% 50% 20% / 0.5)\nconst RE_RGB = new RegExp(\n    '^rgba?\\\\(' +\n        RE_S +\n        [INT_OR_PCT, INT_OR_PCT, INT_OR_PCT].join(SEP) +\n        ALPHA +\n        '\\\\)$'\n);\nconst RE_RGB_LEGACY = new RegExp(\n    '^rgb\\\\(' +\n        RE_S +\n        [INT_OR_PCT, INT_OR_PCT, INT_OR_PCT].join(COMMA) +\n        RE_S +\n        '\\\\)$'\n);\nconst RE_RGBA_LEGACY = new RegExp(\n    '^rgba\\\\(' +\n        RE_S +\n        [INT_OR_PCT, INT_OR_PCT, INT_OR_PCT, FLOAT_OR_PCT].join(COMMA) +\n        RE_S +\n        '\\\\)$'\n);\n\nconst RE_HSL = new RegExp(\n    '^hsla?\\\\(' + RE_S + [ANLGE, PCT, PCT].join(SEP) + ALPHA + '\\\\)$'\n);\nconst RE_HSL_LEGACY = new RegExp(\n    '^hsl?\\\\(' + RE_S + [ANLGE, PCT, PCT].join(COMMA) + RE_S + '\\\\)$'\n);\nconst RE_HSLA_LEGACY =\n    /^hsla\\(\\s*(-?\\d+(?:\\.\\d+)?),\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)$/;\n\nconst RE_LAB = new RegExp(\n    '^lab\\\\(' +\n        RE_S +\n        [FLOAT_OR_PCT, FLOAT_OR_PCT, FLOAT_OR_PCT].join(SEP) +\n        ALPHA +\n        '\\\\)$'\n);\nconst RE_LCH = new RegExp(\n    '^lch\\\\(' +\n        RE_S +\n        [FLOAT_OR_PCT, FLOAT_OR_PCT, ANLGE].join(SEP) +\n        ALPHA +\n        '\\\\)$'\n);\nconst RE_OKLAB = new RegExp(\n    '^oklab\\\\(' +\n        RE_S +\n        [FLOAT_OR_PCT, FLOAT_OR_PCT, FLOAT_OR_PCT].join(SEP) +\n        ALPHA +\n        '\\\\)$'\n);\nconst RE_OKLCH = new RegExp(\n    '^oklch\\\\(' +\n        RE_S +\n        [FLOAT_OR_PCT, FLOAT_OR_PCT, ANLGE].join(SEP) +\n        ALPHA +\n        '\\\\)$'\n);\n\nconst { round } = Math;\n\nconst roundRGB = (rgb) => {\n    return rgb.map((v, i) => (i <= 2 ? limit(round(v), 0, 255) : v));\n};\n\nconst percentToAbsolute = (pct, min = 0, max = 100, signed = false) => {\n    if (typeof pct === 'string' && pct.endsWith('%')) {\n        pct = parseFloat(pct.substring(0, pct.length - 1)) / 100;\n        if (signed) {\n            // signed percentages are in the range -100% to 100%\n            pct = min + (pct + 1) * 0.5 * (max - min);\n        } else {\n            pct = min + pct * (max - min);\n        }\n    }\n    return +pct;\n};\n\nconst noneToValue = (v, noneValue) => {\n    return v === 'none' ? noneValue : v;\n};\n\nconst css2rgb = (css) => {\n    css = css.toLowerCase().trim();\n\n    if (css === 'transparent') {\n        return [0, 0, 0, 0];\n    }\n\n    let m;\n\n    if (input.format.named) {\n        try {\n            return input.format.named(css);\n            // eslint-disable-next-line\n        } catch (e) {}\n    }\n\n    // rgb(250 20 0) or rgb(250,20,0)\n    if ((m = css.match(RE_RGB)) || (m = css.match(RE_RGB_LEGACY))) {\n        let rgb = m.slice(1, 4);\n        for (let i = 0; i < 3; i++) {\n            rgb[i] = +percentToAbsolute(noneToValue(rgb[i], 0), 0, 255);\n        }\n        rgb = roundRGB(rgb);\n        const alpha = m[4] !== undefined ? +percentToAbsolute(m[4], 0, 1) : 1;\n        rgb[3] = alpha; // default alpha\n        return rgb;\n    }\n\n    // rgba(250,20,0,0.4)\n    if ((m = css.match(RE_RGBA_LEGACY))) {\n        const rgb = m.slice(1, 5);\n        for (let i = 0; i < 4; i++) {\n            rgb[i] = +percentToAbsolute(rgb[i], 0, 255);\n        }\n        return rgb;\n    }\n\n    // hsl(0,100%,50%)\n    if ((m = css.match(RE_HSL)) || (m = css.match(RE_HSL_LEGACY))) {\n        const hsl = m.slice(1, 4);\n        hsl[0] = +noneToValue(hsl[0].replace('deg', ''), 0);\n        hsl[1] = +percentToAbsolute(noneToValue(hsl[1], 0), 0, 100) * 0.01;\n        hsl[2] = +percentToAbsolute(noneToValue(hsl[2], 0), 0, 100) * 0.01;\n        const rgb = roundRGB(hsl2rgb(hsl));\n        const alpha = m[4] !== undefined ? +percentToAbsolute(m[4], 0, 1) : 1;\n        rgb[3] = alpha;\n        return rgb;\n    }\n\n    // hsla(0,100%,50%,0.5)\n    if ((m = css.match(RE_HSLA_LEGACY))) {\n        const hsl = m.slice(1, 4);\n        hsl[1] *= 0.01;\n        hsl[2] *= 0.01;\n        const rgb = hsl2rgb(hsl);\n        for (let i = 0; i < 3; i++) {\n            rgb[i] = round(rgb[i]);\n        }\n        rgb[3] = +m[4]; // default alpha = 1\n        return rgb;\n    }\n\n    if ((m = css.match(RE_LAB))) {\n        const lab = m.slice(1, 4);\n        lab[0] = percentToAbsolute(noneToValue(lab[0], 0), 0, 100);\n        lab[1] = percentToAbsolute(noneToValue(lab[1], 0), -125, 125, true);\n        lab[2] = percentToAbsolute(noneToValue(lab[2], 0), -125, 125, true);\n        // convert to D50 Lab whitepoint\n        const wp = getLabWhitePoint();\n        setLabWhitePoint('d50');\n        const rgb = roundRGB(lab2rgb(lab));\n        // convert back to original Lab whitepoint\n        setLabWhitePoint(wp);\n        const alpha = m[4] !== undefined ? +percentToAbsolute(m[4], 0, 1) : 1;\n        rgb[3] = alpha;\n        return rgb;\n    }\n\n    if ((m = css.match(RE_LCH))) {\n        const lch = m.slice(1, 4);\n        lch[0] = percentToAbsolute(lch[0], 0, 100);\n        lch[1] = percentToAbsolute(noneToValue(lch[1], 0), 0, 150, false);\n        lch[2] = +noneToValue(lch[2].replace('deg', ''), 0);\n        // convert to D50 Lab whitepoint\n        const wp = getLabWhitePoint();\n        setLabWhitePoint('d50');\n        const rgb = roundRGB(lch2rgb(lch));\n        // convert back to original Lab whitepoint\n        setLabWhitePoint(wp);\n        const alpha = m[4] !== undefined ? +percentToAbsolute(m[4], 0, 1) : 1;\n        rgb[3] = alpha;\n        return rgb;\n    }\n\n    if ((m = css.match(RE_OKLAB))) {\n        const oklab = m.slice(1, 4);\n        oklab[0] = percentToAbsolute(noneToValue(oklab[0], 0), 0, 1);\n        oklab[1] = percentToAbsolute(noneToValue(oklab[1], 0), -0.4, 0.4, true);\n        oklab[2] = percentToAbsolute(noneToValue(oklab[2], 0), -0.4, 0.4, true);\n        const rgb = roundRGB(oklab2rgb(oklab));\n        const alpha = m[4] !== undefined ? +percentToAbsolute(m[4], 0, 1) : 1;\n        rgb[3] = alpha;\n        return rgb;\n    }\n\n    if ((m = css.match(RE_OKLCH))) {\n        const oklch = m.slice(1, 4);\n        oklch[0] = percentToAbsolute(noneToValue(oklch[0], 0), 0, 1);\n        oklch[1] = percentToAbsolute(noneToValue(oklch[1], 0), 0, 0.4, false);\n        oklch[2] = +noneToValue(oklch[2].replace('deg', ''), 0);\n        const rgb = roundRGB(oklch2rgb(oklch));\n        const alpha = m[4] !== undefined ? +percentToAbsolute(m[4], 0, 1) : 1;\n        rgb[3] = alpha;\n        return rgb;\n    }\n};\n\ncss2rgb.test = (s) => {\n    return (\n        // modern\n        RE_RGB.test(s) ||\n        RE_HSL.test(s) ||\n        RE_LAB.test(s) ||\n        RE_LCH.test(s) ||\n        RE_OKLAB.test(s) ||\n        RE_OKLCH.test(s) ||\n        // legacy\n        RE_RGB_LEGACY.test(s) ||\n        RE_RGBA_LEGACY.test(s) ||\n        RE_HSL_LEGACY.test(s) ||\n        RE_HSLA_LEGACY.test(s) ||\n        s === 'transparent'\n    );\n};\n\nexport default css2rgb;\n","import chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport { type } from '../../utils/index.js';\n\nimport rgb2css from './rgb2css.js';\nimport css2rgb from './css2rgb.js';\n\nColor.prototype.css = function (mode) {\n    return rgb2css(this._rgb, mode);\n};\n\nconst css = (...args) => new Color(...args, 'css');\nchroma.css = css;\n\ninput.format.css = css2rgb;\n\ninput.autodetect.push({\n    p: 5,\n    test: (h, ...rest) => {\n        if (!rest.length && type(h) === 'string' && css2rgb.test(h)) {\n            return 'css';\n        }\n    }\n});\n\nexport { css };\n","import Color from '../../Color.js';\nimport chroma from '../../chroma.js';\nimport input from '../input.js';\nimport { unpack } from '../../utils/index.js';\n\ninput.format.gl = (...args) => {\n    const rgb = unpack(args, 'rgba');\n    rgb[0] *= 255;\n    rgb[1] *= 255;\n    rgb[2] *= 255;\n    return rgb;\n};\n\nconst gl = (...args) => new Color(...args, 'gl');\nchroma.gl = gl;\n\nColor.prototype.gl = function () {\n    const rgb = this._rgb;\n    return [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255, rgb[3]];\n};\n\nexport { gl };\n","import Color from '../../Color.js';\nimport chroma from '../../chroma.js';\nimport { type } from '../../utils/index.js';\nimport input from '../input.js';\nimport hex2rgb from './hex2rgb.js';\nimport rgb2hex from './rgb2hex.js';\n\nColor.prototype.hex = function (mode) {\n    return rgb2hex(this._rgb, mode);\n};\n\nconst hex = (...args) => new Color(...args, 'hex');\nchroma.hex = hex;\n\ninput.format.hex = hex2rgb;\ninput.autodetect.push({\n    p: 4,\n    test: (h, ...rest) => {\n        if (\n            !rest.length &&\n            type(h) === 'string' &&\n            [3, 4, 5, 6, 7, 8, 9].indexOf(h.length) >= 0\n        ) {\n            return 'hex';\n        }\n    }\n});\n\nexport { hex };\n","/*\n * Based on implementation by Neil Bartlett\n * https://github.com/neilbartlett/color-temperature\n */\n\nconst { log } = Math;\n\nconst temperature2rgb = (kelvin) => {\n    const temp = kelvin / 100;\n    let r, g, b;\n    if (temp < 66) {\n        r = 255;\n        g =\n            temp < 6\n                ? 0\n                : -155.25485562709179 -\n                  0.44596950469579133 * (g = temp - 2) +\n                  104.49216199393888 * log(g);\n        b =\n            temp < 20\n                ? 0\n                : -254.76935184120902 +\n                  0.8274096064007395 * (b = temp - 10) +\n                  115.67994401066147 * log(b);\n    } else {\n        r =\n            351.97690566805693 +\n            0.114206453784165 * (r = temp - 55) -\n            40.25366309332127 * log(r);\n        g =\n            325.4494125711974 +\n            0.07943456536662342 * (g = temp - 50) -\n            28.0852963507957 * log(g);\n        b = 255;\n    }\n    return [r, g, b, 1];\n};\n\nexport default temperature2rgb;\n","/*\n * Based on implementation by Neil Bartlett\n * https://github.com/neilbartlett/color-temperature\n **/\n\nimport temperature2rgb from './temperature2rgb.js';\nimport { unpack } from '../../utils/index.js';\nconst { round } = Math;\n\nconst rgb2temperature = (...args) => {\n    const rgb = unpack(args, 'rgb');\n    const r = rgb[0],\n        b = rgb[2];\n    let minTemp = 1000;\n    let maxTemp = 40000;\n    const eps = 0.4;\n    let temp;\n    while (maxTemp - minTemp > eps) {\n        temp = (maxTemp + minTemp) * 0.5;\n        const rgb = temperature2rgb(temp);\n        if (rgb[2] / rgb[0] >= b / r) {\n            maxTemp = temp;\n        } else {\n            minTemp = temp;\n        }\n    }\n    return round(temp);\n};\n\nexport default rgb2temperature;\n","import chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport temperature2rgb from './temperature2rgb.js';\nimport rgb2temperature from './rgb2temperature.js';\n\nColor.prototype.temp =\n    Color.prototype.kelvin =\n    Color.prototype.temperature =\n        function () {\n            return rgb2temperature(this._rgb);\n        };\n\nconst temp = (...args) => new Color(...args, 'temp');\nObject.assign(chroma, { temp, kelvin: temp, temperature: temp });\n\ninput.format.temp =\n    input.format.kelvin =\n    input.format.temperature =\n        temperature2rgb;\n\nexport { temp, temp as kelvin, temp as temperature };\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport oklch2rgb from './oklch2rgb.js';\nimport rgb2oklch from './rgb2oklch.js';\n\nColor.prototype.oklch = function () {\n    return rgb2oklch(this._rgb);\n};\n\nconst oklch = (...args) => new Color(...args, 'oklch');\nObject.assign(chroma, { oklch });\n\ninput.format.oklch = oklch2rgb;\n\ninput.autodetect.push({\n    p: 2,\n    test: (...args) => {\n        args = unpack(args, 'oklch');\n        if (type(args) === 'array' && args.length === 3) {\n            return 'oklch';\n        }\n    }\n});\n\nexport { oklch };\n","// feel free to comment out anything to rollup\n// a smaller chroma.js bundle\nimport chroma from './src/chroma.js';\n\n// io --> convert colors\nimport './src/io/named/index.js';\n\n// operators --> modify existing Colors\nimport './src/ops/alpha.js';\nimport './src/ops/clipped.js';\nimport './src/ops/darken.js';\nimport './src/ops/get.js';\nimport './src/ops/luminance.js';\nimport './src/ops/mix.js';\nimport './src/ops/premultiply.js';\nimport './src/ops/saturate.js';\nimport './src/ops/set.js';\nimport './src/ops/shade.js';\n\n// interpolators\nimport './src/interpolator/rgb.js';\nimport './src/interpolator/lrgb.js';\nimport './src/interpolator/lab.js';\nimport './src/interpolator/lch.js';\nimport './src/interpolator/num.js';\nimport './src/interpolator/hcg.js';\nimport './src/interpolator/hsi.js';\nimport './src/interpolator/hsl.js';\nimport './src/interpolator/hsv.js';\nimport './src/interpolator/oklab.js';\nimport './src/interpolator/oklch.js';\n\n// generators -- > create new colors\nimport average from './src/generator/average.js';\nimport bezier from './src/generator/bezier.js';\nimport blend from './src/generator/blend.js';\nimport cubehelix from './src/generator/cubehelix.js';\nimport mix from './src/generator/mix.js';\nimport random from './src/generator/random.js';\nimport scale from './src/generator/scale.js';\n\n// other utility methods\nimport { analyze } from './src/utils/analyze.js';\nimport contrast from './src/utils/contrast.js';\nimport contrastAPCA from './src/utils/contrastAPCA.js';\nimport deltaE from './src/utils/delta-e.js';\nimport distance from './src/utils/distance.js';\nimport { limits } from './src/utils/analyze.js';\nimport valid from './src/utils/valid.js';\nimport input from './src/io/input.js';\n\n// scale\nimport scales from './src/utils/scales.js';\n\n// colors\nimport colors from './src/colors/w3cx11.js';\nimport brewer from './src/colors/colorbrewer.js';\nimport Color from './src/Color.js';\n\nObject.assign(chroma, {\n    analyze,\n    average,\n    bezier,\n    blend,\n    brewer,\n    Color,\n    colors,\n    contrast,\n    contrastAPCA,\n    cubehelix,\n    deltaE,\n    distance,\n    input,\n    interpolate: mix,\n    limits,\n    mix,\n    random,\n    scale,\n    scales,\n    valid\n});\n\nexport default chroma;\n\nexport {\n    analyze,\n    average,\n    bezier,\n    blend,\n    brewer,\n    Color,\n    colors,\n    contrast,\n    contrastAPCA,\n    cubehelix,\n    deltaE,\n    distance,\n    input,\n    limits,\n    mix,\n    mix as interpolate,\n    random,\n    scale,\n    scales,\n    valid\n};\n\nexport * from './src/io/cmyk/index.js';\nexport * from './src/io/css/index.js';\nexport * from './src/io/gl/index.js';\nexport * from './src/io/hcg/index.js';\nexport * from './src/io/hex/index.js';\nexport * from './src/io/hsi/index.js';\nexport * from './src/io/hsl/index.js';\nexport * from './src/io/hsv/index.js';\nexport * from './src/io/lab/index.js';\nexport * from './src/io/lch/index.js';\nexport * from './src/io/num/index.js';\nexport * from './src/io/rgb/index.js';\nexport * from './src/io/temp/index.js';\nexport * from './src/io/oklab/index.js';\nexport * from './src/io/oklch/index.js';\n","import { ImportFormData, SemanticAccentColors } from \"./import-ui\"\n\nexport const colorThemes = [\n    'lightBase',\n    'darkBase',\n    'darkElevated'\n]\n\nexport const colorThemeNames = [\n    'Light Base',\n    'Dark Base',\n    'Dark Elevated'\n]\n\nexport const radiiSizeName = [\n    \"compact\",\n    \"base\",\n    \"large\",\n    \"xLarge\",\n]\n\nexport const radiiSizeValues = [\n    4,\n    6,\n    8,\n    10,\n]\n\nexport const spacingSizeName = [\n    \"compact\",\n    \"base\",\n    \"large\",\n    \"touch\",\n]\n\nexport const typographySizeName = [\n    \"compact\",\n    \"base\",\n    \"large\",\n]\n\nexport const typographySizeValues = [\n    \"13/16\",\n    \"15/20\",\n    \"17/24\",\n]\n\nexport const iconSizeName = [\n    \"base\",\n    \"touch\"\n]\n\nexport const iconSizeValues = [\n    \"16\",\n    \"24\",\n]\n\n\nexport const systemAccentList = [\n    \"red\",\n    \"amber\",\n    \"brown\",\n    \"green\",\n    \"teal\",\n    \"blue\",\n    \"indigo\",\n    \"violet\",\n    \"purple\",\n    \"pink\"\n]\n\nexport const defaultAccentHUEs = {\n    \"red\": 4,\n    \"amber\": 25,\n    \"brown\": 33,\n    \"green\": 150,\n    \"teal\": 180,\n    \"blue\": 210,\n    \"indigo\": 240,\n    \"violet\": 260,\n    \"purple\": 280,\n    \"pink\": 340\n}\n\nexport const defaultSemanticAccents: SemanticAccentColors = {\n    primary: 'blue',\n    info: 'teal',\n    success: 'green',\n    warning: 'amber',\n    danger: 'red'\n}\n\nexport const defaultSettings: ImportFormData = {\n    ...defaultAccentHUEs,\n    ...defaultSemanticAccents,\n    type: 'IMPORT',\n    theme: 'light',\n    hue: 190,\n    saturation: 0.2,\n    distance: 0.02,\n    baseFontSize: 'base',\n    typeScale: 'minorThird',\n    createStyles: true,\n\n    accentSaturation: 0.9,\n    accentMaxLuminance: 0.45,\n    accentMidLuminance: 0.18,\n    accentMinLuminance: 0.12,\n    accentHueSpin: 0,\n\n    radii: 'base',\n    spacing: 'base',\n    verticalSpacing: 'uneven',\n    singleCollection: false,\n\n    customAccentTextSaturation: false,\n    accentTextSaturation: 0,\n    accentTextColor: 'auto',\n    textWhiteBrightness: 100,\n    textBlackBrightness: 6,\n    \n    createColorTokens: true,\n    createComponentTokens: true,\n    createTypographyTokens: true,\n    createSpacingTokens: true,\n    createElevationTokens: true,\n    createRadiiTokens: true,\n    createGlobalSizeTokens: true,\n    createOpacityTokens: true,\n\n    shadowsStyle: 1,\n    shadowsColor: 1,\n    shadowsSpread: -1\n}\n\nexport const collectionNames = new Map<string, string>([\n    [\"brandColors\", \"Color Theme\"],\n    [\"typeScale\", \"Type Scale\"],\n    [\"typeFace\", \"Type Face\"],\n    [\"themeColors\", \"Color Theme\"],\n    [\"componentColors\", \"Component Tokens\"],\n    [\"spacing\", \"Spacing\"],\n    [\"opacity\", \"Opacity\"],\n    [\"radii\", \"Radii\"],\n    [\"iconScale\", \"Icon Scale\"],\n    [\"globalSizing\", \"Global Sizing\"],\n]);\n","import { defaultSettings } from \"../defaults\";\nimport { ImportFormData } from \"../import-ui\";\nimport { _clone } from \"./clone\";\n\ntype themeKey = 'light'|'dark';\n\nlet activeTheme: themeKey = 'light';\nlet _isCustomDarkMode = false;\n\nconst store: Map<themeKey, ImportFormData> = new Map();\n\nfunction syncValues(data: ImportFormData) {\n    const sharedProps = [\n        'hue',\n        'primary',\n        'info',\n        'success',\n        'warning',\n        'danger',\n        'red',\n        'amber',\n        'brown',\n        'green',\n        'teal',\n        'blue',\n        'indigo',\n        'violet',\n        'purple',\n        'pink',\n        'baseFontSize',\n        'typeScale',\n        'createStyles',\n        'radii',\n        'spacing',\n        'verticalSpacing',\n        'singleCollection',\n        'createColorTokens',\n        'createComponentTokens',\n        'createTypographyTokens',\n        'createSpacingTokens',\n        'createElevationTokens',\n        'createRadiiTokens',\n        'createGlobalSizeTokens',\n        'createOpacityTokens',\n        'shadowsStyle',\n        'shadowsSpread',\n        'textBlackBrightness',\n        'acentHueSpin'\n    ];\n\n    store.forEach((params, themeKey) => {\n        sharedProps.forEach(propName => {\n            const value = data[propName] == undefined ? defaultSettings[propName] : data[propName]\n            params[propName] = value;\n        })\n    })\n}\n\nexport function setTheme(data: ImportFormData) {\n    const theme = _isCustomDarkMode ? data.theme : 'light';\n    activeTheme = theme;\n\n\n    if(_isCustomDarkMode === true && theme === 'dark') {\n        data.theme = 'dark';\n        store.set(theme, {...defaultSettings, ...data});\n    }\n    else {\n        data.theme = 'light';\n        store.set('light', {...defaultSettings, ...data});\n    }\n\n    syncValues(data);\n\n}\n\nexport function getTheme(theme?: themeKey): ImportFormData {\n    if(_isCustomDarkMode === true && theme === 'dark') {\n        return store.get('dark');\n    }\n\n    return store.get('light');\n}\n\nexport function serialize(): ImportFormData[] {\n    let result = [store.get('light')];\n\n    if(_isCustomDarkMode === true) {\n        result.push(store.get('dark'));\n    }\n\n    return result;\n}\n\nexport function save() {\n    figma.root.setPluginData('SDS', JSON.stringify(serialize()));\n}\n\nexport function load() {\n    const pluginDataText = figma.root.getPluginData('SDS');\n    let data: ImportFormData|ImportFormData[];\n\n    try {\n        data  = JSON.parse(pluginDataText);\n    }\n    catch (e) {\n        data = [defaultSettings];\n        console.info('No plugin data found, loading default');\n    }\n\n    const isArray = Array.isArray(data);\n    let formData: ImportFormData[];\n\n    activeTheme = 'light';\n\n    if(isArray) {\n        formData = [ ...data as ImportFormData[] ];\n    }\n    else {\n        formData = [data as ImportFormData];\n    }\n\n    _isCustomDarkMode = formData.length > 1;\n\n    formData.forEach(params => {\n        setTheme(params)\n    });\n}\n\nexport function getStore() {\n    return store;\n}\n\nexport function getSize() {\n    return store.size;\n}\n\nexport function resetDefaults() {\n    activeTheme = 'light';\n    _isCustomDarkMode = false;\n    store.clear();\n    store.set('light', defaultSettings);\n}\n\nexport function enableCustomDarkMode() {\n    _isCustomDarkMode = true;\n    if(_darkModeBackup) {\n        store.set('dark', _darkModeBackup);\n    }\n}\n\nlet _darkModeBackup;\n\nexport function disableCustomDarkMode() {\n    _isCustomDarkMode = false;\n    _darkModeBackup = store.get('dark');\n    store.delete('dark');\n}\n\nexport function isCustomDarkMode() {\n    return _isCustomDarkMode;\n}","const store: Map<string, LibraryVariable[]> = new Map();\nlet selectedLibraryName: string;\n\nexport const LOCAL_LIB_NAME = \"Local variables\";\n\nexport async function getStoreData(refresh = false) {\n    if(refresh === true) {\n        store.clear();\n    }\n    \n    store.set(LOCAL_LIB_NAME, [])\n\n    if (store.size > 1) { // which means we already got other libraries read\n        return store;\n    }\n\n    // read \n    const libraryCollections: LibraryVariableCollection[] = await figma.teamLibrary.getAvailableLibraryVariableCollectionsAsync().catch(e => {\n        throw e;\n    });\n\n    await Promise.all(libraryCollections.map(async (collection) => {\n        return await figma.teamLibrary.getVariablesInLibraryCollectionAsync(collection.key).then((data: LibraryVariable[]) => {\n            let variables: LibraryVariable[] = store.get(collection.libraryName) || [];\n            variables = variables.concat(data);\n            store.set(collection.libraryName, variables);\n        });\n    }));\n\n    return store;\n}\n\nasync function collectLocalVariables() {\n    const variables = await figma.variables.getLocalVariablesAsync().catch(err => {\n        throw (err);\n    });\n\n    if(variables.length == 0) {\n        return null;\n    }\n\n    return {\n        name: LOCAL_LIB_NAME,\n        libraryVariables: []\n    }\n\n\n    // const libraryVariables: LibraryVariable[] = variables.map(variable => {\n    //     const {\n    //         key, resolvedType, name\n    //     } = variable;\n\n    //     return { name, key, resolvedType };\n    // })\n\n    // if(libraryVariables.length) {\n    //     return {name: LOCAL_LIB_NAME, libraryVariables}\n    // }\n    // else {\n    //     return null;\n    // }\n}\n\nlet importedVariablesLibrary: Variable[] = [];\n\nasync function importLibraryVariables(libraryName: string) {\n    const data = store.get(libraryName) || [];\n    \n\n    if(importedVariablesLibrary.length == 0) {\n        await Promise.all(data.map(async (record) => {\n            return await figma.variables.importVariableByKeyAsync(record.key).then(variable => {\n                importedVariablesLibrary.push(variable)\n            });\n        }));\n    }\n\n    return importedVariablesLibrary;\n}\n\ninterface StoredData {\n    [key: string]: LibraryVariable[]\n}\n\nexport function serialize(): StoredData {\n    let result = {};\n\n    store.forEach((value, key) => {\n        result[key] = value;\n    })\n\n    return result;\n}\n\nexport function getSelectedLibrary() {\n    return selectedLibraryName || LOCAL_LIB_NAME;\n}\n\nexport function setSelectedLibrary(name: string) {\n    selectedLibraryName = name;\n    return selectedLibraryName;\n}\n\nasync function getLibVars(libraryName?: string): Promise<Variable[]> {\n    libraryName = libraryName || getSelectedLibrary();\n    if(libraryName == LOCAL_LIB_NAME) {\n        return await figma.variables.getLocalVariablesAsync();\n    }\n    else {\n        const store = await getStoreData();\n        return await importLibraryVariables(libraryName);    \n    }\n}\n\nexport async function findVariableByName(variableName:string) {\n    const variables = await getLibVars()\n\n    return variables.find(variable => {\n        return variable.name == variableName\n    });\n}\n\nasync function set(name: string, data: LibraryVariable[]) {\n    store.set(name, data)\n    return store;\n}\n\nfunction get(name) {\n    return store.get(name)\n}\n\nasync function remove(name) {\n    store.delete(name)\n    return store;\n}\n\nfunction clearStore() {\n    store.clear();\n    return store;\n}","import { DesignToken } from \"../import-tokens\";\nimport * as figlib from './figma-library-variables';\n\nexport function figmaAliasToDesignTokens(alias: string) {\n    return alias.replace(/\\//g, \".\");\n}\n\nexport function designTokenAliasToFigma(alias: string) {\n    return alias.replace(/\\./g, \"/\");\n}\n\nasync function findVariableInCollection(variableName: string, collectionName: string): Promise<Variable> {\n    const figmaCollections = await figma.variables.getLocalVariableCollectionsAsync();\n    const collection = figmaCollections.find(collection => collection.name === collectionName);\n\n    let figmaVirable: Variable;\n\n    if (collection) {\n        for(const id of collection.variableIds) {\n            const figmaVariableInColleciton = await figma.variables.getVariableByIdAsync(id)\n            const match = figmaVariableInColleciton?.name === variableName ;\n            if (match) {\n                figmaVirable = figmaVariableInColleciton;\n                break;\n            }\n        };\n    }\n\n    return figmaVirable;\n}\nexport async function findFigmaVariableByName(variableName: string, collectionName?: string): Promise<Variable> {\n    if (collectionName) {\n        return await findVariableInCollection(variableName, collectionName);\n    }\n\n    return figlib.findVariableByName(variableName);\n\n}\n\nexport async function findFigmaVariableCollectionByName(name:string): Promise<VariableCollection|null> {\n    const figmaCollections = await figma.variables.getLocalVariableCollectionsAsync();\n    const collection = figmaCollections.find(collection => collection.name === name);\n\n    return collection || null;\n}\n\nexport async function getFigmaCollection(name) {\n    let isNew = false;\n    let collection = await findFigmaVariableCollectionByName(name);\n\n    if (!collection) {\n        isNew = true;\n        collection = figma.variables.createVariableCollection(name);\n    }\n\n    return {collection, isNew};\n}\n\nexport function resolveVariableType(typeName): VariableResolvedDataType {\n    switch (typeName) {\n        case 'color': return 'COLOR';\n        case 'boolean': return 'BOOLEAN';\n        case 'number': return 'FLOAT';\n        default: return 'STRING';\n    }\n}\n\nfunction getStubValue(type: VariableResolvedDataType) {\n    switch (type) {\n        case 'COLOR': return figma.util.rgb('#FFFFFF');\n        case 'BOOLEAN': return true;\n        case 'FLOAT': return 1;\n        default: return 'String';\n    }\n}\n\nexport async function setFigmaVariable(\n        collection: VariableCollection,\n        modeId: string,\n        type: VariableResolvedDataType,\n        variableName: string,\n        value = null,\n        scopes: VariableScope[] = ['ALL_SCOPES'],\n        description: string = null\n    ): Promise<Variable> {\n\n    let figmaVariable = await findFigmaVariableByName(variableName, collection.name);\n\n    if (!figmaVariable) {\n        try {\n            figmaVariable = figma.variables.createVariable(variableName, collection, type);\n        }\n        catch (e) {\n            debugger;\n        }\n    }\n\n    try {\n        figmaVariable.setValueForMode(modeId, value || getStubValue(type));\n    }\n    catch(e) {\n        debugger\n    }\n\n    figmaVariable.scopes = scopes;\n\n    if (description != null) {\n        figmaVariable.description = description;\n    }\n\n    return figmaVariable;\n}\n\nexport async function getAliasName(id): Promise<string> {\n    const variable = await figma.variables.getVariableByIdAsync(id);\n    return `{${figmaAliasToDesignTokens(variable.name)}}`;\n}\n\nexport function variableNameToObject({name, targetObject}): DesignToken {\n    let obj = targetObject;\n    name.split(\"/\").forEach((groupName) => {\n        obj[groupName] = obj[groupName] || {};\n        obj = obj[groupName];\n    });\n\n    return obj;\n}\n\nexport async function getDefaultVariableValue(figmaVariable: Variable, modeId?) {\n    const collectionID = figmaVariable.variableCollectionId;\n    const collection = await figma.variables.getVariableCollectionByIdAsync(collectionID);\n    const defaultValue: VariableValue = figmaVariable.valuesByMode[modeId || collection.defaultModeId];\n\n    if(defaultValue['type'] == \"VARIABLE_ALIAS\") {\n        const variable = await figma.variables.getVariableByIdAsync(defaultValue['id']);\n        return await getDefaultVariableValue(variable, modeId);\n    }\n    else {\n        return defaultValue;\n    }\n}\n\n","import { DesignTokensRaw } from \"../import-tokens\";\nimport { designTokenAliasToFigma, findFigmaVariableByName, getDefaultVariableValue } from \"./figma-variables\";\n\nlet globalTokens = {};\n\nexport function getGlobalTokensDictionary() {\n    return globalTokens;\n}\n\nexport function addToGlobalTokensDictionary(data) {\n    globalTokens = {\n        ...globalTokens,\n        ...data\n    }\n}\n\nconst aliasRegex = /\\{(.+?)(.+?)\\}/g;\n\nexport function findTokenReferences(tokenAlias: string) {\n    return tokenAlias?.toString().match(aliasRegex)\n}\n\nexport function getReferenceName(reference: string) {\n    let name = reference.replace(/{/g, \"\");\n    name = name.replace(/}/g, \"\");\n    return name;\n}\n\nexport async function findVariableByReferences(alias: string): Promise<Variable> {\n    let references = findTokenReferences(alias);\n    let results = [];\n    \n\n    for(const reference of references || []) {\n        let name = getReferenceName(reference);\n        name = designTokenAliasToFigma(name);\n\n        const figmaVariable = await findFigmaVariableByName(name);\n\n        if (figmaVariable) {\n            results.push(figmaVariable);\n        }\n        else {\n            console.warn(`findVariableByReferences(${alias}) call failed -> cannot find value for ${reference}`);\n        }\n    }\n\n    return results[0];\n}\n\nfunction findGlobalTokenByName(name, dictionary) {\n            \n    name = designTokenAliasToFigma(name);\n    const token = dictionary[name];\n\n    if(name == 'grey-undefined') debugger\n    \n    if(!token) {\n        const msg = `Cannot find token ${name} in global disctionary:`;\n        console.warn(msg, dictionary);\n        // figma.notify(msg, {error: true});\n        return null;\n    };\n\n    return token;\n}\n\nexport function resolveGlobalTokenValue(alias, dictionary: DesignTokensRaw) {\n    let references = findTokenReferences(alias);\n    let result = alias;\n    \n    references?.forEach(reference => {\n        let name = getReferenceName(reference);\n\n        const globalToken = findGlobalTokenByName(name, dictionary);\n\n        if(globalToken) {\n            result = result.replace(reference, globalToken.$value);\n        }\n        else {\n            result = null;\n        }\n    });\n\n    const check = findTokenReferences(result);\n    \n    if (check != null) {\n        return resolveGlobalTokenValue(result, dictionary);\n    }\n    else {\n        return result;\n    }\n\n}\n\nexport async function findVariableAlias(name: string): Promise<VariableAlias|null>{\n    let referenceVar = await findVariableByReferences(name.trim());\n    if (referenceVar) {\n        return {\n            type: \"VARIABLE_ALIAS\",\n            id: referenceVar.id,\n        }\n    }\n    else {\n        return null;\n    } \n}\n\nexport async function resolveAliasOrValue(value: string, dictionary): Promise<VariableAlias|string> {\n    let variableAlias = await findVariableAlias(value.trim());\n    if (variableAlias) {\n        return variableAlias\n    }\n\n    return resolveGlobalTokenValue(value, dictionary);\n}","import chroma from \"chroma-js\";\nimport * as themeStore from '../utils/themes-store';\nimport { resolveGlobalTokenValue } from \"../utils/token-references\";\nimport { ImportFormData } from \"../import-ui\";\nimport { defaultAccentHUEs, systemAccentList } from \"../defaults\";\nimport { ColorRamp, SystemAccentList } from \"../color-tokens\";\n\nexport function getAccentRamp(theme: 'light' | 'dark', params: ImportFormData): ColorRamp {\n    let textSaturationAdjustments = {};\n    \n    switch(theme) {\n        default: {\n            return {\n                \"100\": {\n                    \"$value\": \"rgba({100}, 0.20)\",\n                    \"$type\": \"color\",\n                    \"description\": `Subtle semitransparent accent`\n                },\n                \"200\": {\n                    \"$value\": \"rgba({200}, 0.50)\",\n                    \"$type\": \"color\",\n                    \"description\": `Light semitransparent accent`\n                },\n                \"300\": {\n                    \"$value\": \"{300}\",\n                    \"$type\": \"color\",\n                    \"description\": `Non textual elements`\n                },\n                \"400\": {\n                    \"$value\": \"{400}\",\n                    \"$type\": \"color\",\n                    \"description\": `Base background color`\n                },\n                \"500\": {\n                    \"$value\": \"{600}\",\n                    \"$type\": \"color\",\n                    \"description\": `Text on light surface`,\n                    \"adjustments\": textSaturationAdjustments\n                },\n                \"600\": {\n                    \"$value\": \"{100}\",\n                    \"$type\": \"color\",\n                    \"description\": `Text on dark surface`,\n                    \"adjustments\": textSaturationAdjustments\n                }\n            }\n        }\n        case \"dark\": {\n            return {\n                \"100\": {\n                    \"$value\": \"rgba({200}, 0.30)\",\n                    \"$type\": \"color\",\n                    \"description\": `Subtle semitransparent accent`\n                },\n                \"200\": {\n                    \"$value\": \"rgba({200}, 0.60)\",\n                    \"$type\": \"color\",\n                    \"description\": `Light semitransparent accent`\n                },\n                \"300\": {\n                    \"$value\": \"{300}\",\n                    \"$type\": \"color\",\n                    \"description\": `Non textual elements`\n                },\n                \"400\": {\n                    \"$value\": \"{400}\",\n                    \"$type\": \"color\",\n                    \"description\": `Base background color`\n                },\n                \"500\": {\n                    \"$value\": \"{100}\",\n                    \"$type\": \"color\",\n                    \"description\": `Text on light surface`,\n                    \"adjustments\": textSaturationAdjustments\n                },\n                \"600\": {\n                    \"$value\": \"{100}\",\n                    \"$type\": \"color\",\n                    \"description\": `Text on dark surface`,\n                    \"adjustments\": textSaturationAdjustments\n                }\n            }\n        }\n    }\n}\n\nfunction getColorParams(theme: 'light' | 'dark', params: ImportFormData) {\n    let colorParams = {\n        saturation: params.accentSaturation, //0.9 is default value\n        accentMinLuminance: params.accentMinLuminance,\n        accentMidLuminance: params.accentMidLuminance,\n        accentMaxLuminance: params.accentMaxLuminance,    \n    }\n    if (theme == 'dark' && themeStore.isCustomDarkMode() === false) {\n        colorParams.saturation = params.accentSaturation * 0.85;\n        // colorParams.accentMaxLuminance = params.accentMaxLuminance * 0.85;\n    }\n    return colorParams;\n}\n\nexport function generateSystemAccentPalette(theme: 'light' | 'dark', themeParams: ImportFormData): SystemAccentList {\n    let accents: SystemAccentList = {\n        red: getAccentRamp(theme, themeParams),\n        amber: getAccentRamp(theme, themeParams),\n        brown: getAccentRamp(theme, themeParams),\n        green: getAccentRamp(theme, themeParams),\n        teal: getAccentRamp(theme, themeParams),\n        blue: getAccentRamp(theme, themeParams),\n        indigo: getAccentRamp(theme, themeParams),\n        violet: getAccentRamp(theme, themeParams),\n        purple: getAccentRamp(theme, themeParams),\n        pink: getAccentRamp(theme, themeParams)\n    };\n\n    for (const [name, scale] of Object.entries(accents)) {\n        const hue = themeParams[name];\n\n        const shades = getGlobalAccentRamp(hue, themeParams);\n        accents[name] = resolveRampValues(scale, shades)\n    }\n\n    return accents;\n}\n\nexport function generateGlobalAccentPalette(themeParams: ImportFormData): SystemAccentList {\n    let accents = {} as SystemAccentList;\n    systemAccentList.forEach(name => {\n        const hue = themeParams[name];\n        accents[name] = getGlobalAccentRamp(hue, themeParams);\n    })\n    return accents;\n}\n\nexport function getGlobalAccentRamp(hue: number, themeParams: ImportFormData, steps = 7): ColorRamp {\n    const keyShades = getRangeOfThree(hue, themeParams);\n    let colorRamp = {};\n    const scale = chroma.scale(keyShades).colors(steps, 'hex');\n\n    scale.forEach((color, index) => {\n        colorRamp[`${index + 1}00`] = {\n            $value: color,\n            $type: 'color',\n            private: true\n        }\n    });\n\n    return colorRamp as ColorRamp;\n}\n\nfunction resolveRampValues(templateRamp: ColorRamp, dictionary) {\n    let output = {};\n    Object.entries(templateRamp).forEach(([shadeNumber, token]) => {\n        token.$value = resolveGlobalTokenValue(token.$value, dictionary);\n        output[shadeNumber] = token;\n    })\n\n    return output as ColorRamp;\n}\n\n\nfunction getRangeOfThree(hue: number, params: ImportFormData): chroma.Color[] {\n    const saturation = params.accentSaturation;\n    const {\n        accentMinLuminance,\n        accentMidLuminance,\n        accentMaxLuminance,\n        accentHueSpin\n    } = params\n\n    const spinPercent = 1 + accentHueSpin / 100;\n    const adjustedHUE = 20 / (hue / 360)\n    return [\n        chroma.hsl(hue + accentHueSpin, saturation * 1.2, 0.5).luminance(accentMaxLuminance),\n        chroma.hsl(hue, saturation, 0.5).luminance(accentMidLuminance),\n        chroma.hsl(hue + accentHueSpin, saturation * 1.2, 0.5).luminance(accentMinLuminance)\n    ];\n}\n\nexport { defaultAccentHUEs as defaultAccentColors };\n\n","export function roundTwoDigits(num) {\n    return Math.round((num + Number.EPSILON) * 100) / 100;\n}\n\nexport function roundOneDigit(num) {\n    return Math.round((num + Number.EPSILON) * 10) / 10;\n}","import chroma from \"chroma-js\";\nimport { roundTwoDigits } from \"../utils/round-decimals\";\nimport { resolveColorTokenValue } from \"../color-tokens\";\n\nfunction getBoundVariables(node: SceneNode) {\n    const boundVariables = Object.entries(node.boundVariables);\n\n    for (const [propName, propValue] of boundVariables) {\n        const isArray = Array.isArray(propValue);\n\n        if (isArray) {\n            propValue.forEach((alias, i) => {\n                processBoundVariable(figma.variables.getVariableById(alias.id));\n            })\n        }\n        else {\n            let varId = propValue.id;\n            if (typeof varId != 'string') { // it is \n                varId = varId.id;\n            }\n            processBoundVariable(figma.variables.getVariableById(varId))\n        }\n    }\n}\n\nfunction processBoundVariable(variable: Variable) {\n}\n\nexport function renderShades(parentNode, name, shades, colors) {\n    let frame: FrameNode = figma.createFrame();\n    frame.resizeWithoutConstraints(320, frame.height);\n    frame.layoutMode = \"VERTICAL\";\n    frame.counterAxisSizingMode = \"AUTO\";\n    frame.primaryAxisSizingMode = \"AUTO\";\n    frame.name = name;\n    frame.fills = [];\n\n    getBoundVariables(frame);\n\n    for (const [shadeName, color] of Object.entries(shades)) {\n        renderColor(frame, `accent/${name}/${shadeName}`, color, colors);\n    }\n\n    parentNode.appendChild(frame);\n    return parentNode;\n}\n\nexport function renderColor(parentNode, name, color, colors) {\n\n\n    let frame = figma.createFrame();\n    frame.layoutMode = \"VERTICAL\";\n    frame.layoutAlign = 'STRETCH';\n    frame.itemSpacing = 4;\n    frame.name = name;\n\n\n    frame.verticalPadding = 16;\n    frame.horizontalPadding = 20;\n\n    const {\n        r, g, b, a\n    } = resolveColorTokenValue(color, colors);\n    const chromaColor = chroma.gl(r, g, b, a);\n\n\n    frame.fills = [{ type: 'SOLID', color: { r, g, b }, opacity: a }]\n\n    const opaqueColor = chroma.gl(r, g, b, 1);\n    const mixedColor = chroma.mix(opaqueColor, \"white\", 1 - a);\n\n    let contrast = [\n        chroma.contrast(\"white\", mixedColor),\n        chroma.contrast(chroma.hsl(0, 0, 0.22), mixedColor)\n    ];\n\n    let nameRow = getRow(frame, contrast[0] > 2.5);\n    let contrastWhiteRow = getRow(frame, contrast[0] > 2.5);\n    let contrastBlackRow = getRow(frame, contrast[0] > 2.5);\n    let hslRow = getRow(frame, contrast[0] > 2.5);\n    let luminanceRow = getRow(frame, contrast[0] > 2.5);\n\n    // await figma.loadFontAsync({ family: \"Inter\", style: \"Regular\" });\n\n    nameRow.root.name = \"nameRow\";\n    contrastWhiteRow.root.name = \"contrastWhiteRow\";\n    contrastBlackRow.root.name = \"contrastBlackRow\";\n    hslRow.root.name = \"hslRow\";\n    luminanceRow.root.name = \"luminanceRow\";\n\n    contrastWhiteRow.labelNode.characters = \"vs white\";\n    contrastWhiteRow.valueNode.characters = `${roundTwoDigits(contrast[0])}`;\n    contrastBlackRow.labelNode.characters = \"vs black\";\n    contrastBlackRow.valueNode.characters = `${roundTwoDigits(contrast[1])}`;\n    nameRow.labelNode.characters = `{global.${name.replace(/\\//g, \".\")}}`;\n    nameRow.valueNode.characters = ` `;\n    hslRow.labelNode.characters = \"hsl\";\n    hslRow.valueNode.characters = `${outputHSL(chromaColor).join(\" \")}`;\n    luminanceRow.labelNode.characters = \"luminance\";\n    luminanceRow.valueNode.characters = `${ Math.round(roundTwoDigits(chromaColor.luminance()) * 100) }%`;\n\n    parentNode.appendChild(frame);\n\n    frame.resize(240, frame.height);\n\n    return parentNode;\n}\n\nfunction getRow(parentNode, isWhite: boolean) {\n\n    const textNode: TextNode = figma.createText();\n    const frame = figma.createFrame();\n    frame.name = \"row\";\n    frame.layoutMode = \"HORIZONTAL\";\n    frame.layoutAlign = \"STRETCH\";\n    frame.primaryAxisSizingMode = \"FIXED\";\n    frame.primaryAxisAlignItems = \"SPACE_BETWEEN\"\n    frame.counterAxisSizingMode = \"AUTO\";\n    frame.fills = [];\n\n    textNode.name = \"label\"\n\n    const valueLabel = textNode.clone();\n    valueLabel.name = \"value-label\";\n\n    frame.appendChild(textNode)\n    frame.appendChild(valueLabel);\n\n    const color = isWhite ? {\n        r: 1, g: 1, b: 1\n    } : {\n        r: 0, g: 0, b: 0\n    }\n\n\n    textNode.fills = [{ type: 'SOLID', color, opacity: 0.8 }]\n    valueLabel.fills = [{ type: 'SOLID', color }]\n\n    parentNode.appendChild(frame);\n\n    return {\n        labelNode: textNode, valueNode: valueLabel, root: frame\n    };\n}\n\nexport function outputHSL(chromaColor) {\n    const [h, s, l] = chromaColor.hsl();\n    return [`${Math.round(h)|| 0}deg`, `${Math.round(roundTwoDigits(s)*100)}%`, `${Math.round(roundTwoDigits(l)*100)}%`];\n}","import { defaultSettings } from \"@foundation/defaults\";\nimport { DesignTokensRaw } from \"@foundation/import-tokens\";\nimport { ImportFormData } from \"@foundation/import-ui\";\nimport { flattenObject } from \"@foundation/utils/flatten-object\";\nimport chroma from \"chroma-js\";\nimport { renderColor } from \"./swatches-generator\";\n\n\n\nfunction getSaturationModifier(lightness) {\n    // visual representation\n    // https://www.desmos.com/calculator/02ufrfsuzy\n\n    const offset = 50; // ligthness range is [0, 100], for saturation we need to offset the curve to make [-50, 50] range \n    const magnitude = 60; // sets how much to modify, higher values outputs smaller modifier\n    const saturationModifier = 1 + (Math.pow(lightness - offset, 2) / magnitude - Math.pow(offset, 2) / magnitude) / 100;\n    return saturationModifier;\n}\n\n\nexport function generateNeutrals(params: ImportFormData): DesignTokensRaw {\n    const min = 0;\n    const max = 100;\n    const {\n        hue = 200,\n        saturation = 0.1,\n        distance\n    } = params || {};\n\n    let tokens: DesignTokensRaw = flattenObject({\n        \"black\": {\n            \"$value\": `{grey-${params.textBlackBrightness || defaultSettings.textBlackBrightness}}`,\n            \"$type\": 'color'\n        },\n        \"white\": {\n            \"$value\": `{grey-${params.textWhiteBrightness || defaultSettings.textWhiteBrightness}}`,\n            \"$type\": 'color'\n        }\n    });\n\n    let value = min as number;\n\n    while (value <= max) {\n        const color = chroma.hsl(hue, saturation * getSaturationModifier(value), value / 100);\n\n        tokens[`grey-${value}`] = {\n            '$value': color.hex(),\n            '$type': 'color',\n            'private': true\n        }\n        value++;\n    }\n\n    tokens[\"grey-100\"] = {\n        \"$value\": \"#FFFFFF\",\n        '$type': 'color',\n        'private': true\n    }\n    return tokens;\n}\n\nexport function renderNeutrals(colors, name?): FrameNode {\n\n    const existingNode = figma.currentPage.findChild((node) => node.name.startsWith('Global Neutrals'));\n    existingNode?.remove();\n\n    let frame = figma.createFrame();\n    frame.layoutMode = 'HORIZONTAL';\n    frame.counterAxisSizingMode = \"AUTO\";\n    frame.primaryAxisSizingMode = \"AUTO\";\n    frame.itemSpacing = 0;\n\n    frame.name = name || 'Global Neutrals'\n\n    frame.x = 0;\n    frame.y = -156;\n\n    for (const [name, color] of Object.entries(colors)) {\n        renderColor(frame, name, color, colors)\n    }\n\n    return frame;\n}\n","export function _clone(val) {\n    const type = typeof val\n    if (val === null) {\n        return null\n    }\n    else if (\n        type === 'undefined' || type === 'number' ||\n        type === 'string' || type === 'boolean') {\n        return val\n    }\n    else if (type === 'object') {\n        if (val instanceof Array) {\n            return val.map(x => _clone(x))\n        }\n        else if (val instanceof Uint8Array) {\n            return new Uint8Array(val)\n        }\n        else {\n            let o = {}\n            for (const key in val) {\n                o[key] = _clone(val[key])\n            }\n            return o\n        }\n    }\n    throw 'unknown'\n}","import chroma from 'chroma-js';\n\nexport type ColorFormat = 'hex'|'hsl'|'rgba';\n\nexport interface FigmaRGB {\n    r: number;\n    g: number;\n    b: number;\n    a?: number;\n}\nconst hexColorRegex = /^#([0-9a-f]{3}|[0-9a-f]{6})$/i;\n\nexport function convertFigmaColorToRgb(input: RGBA, format?: ColorFormat): string {\n    const {\n        r, g, b, a\n    } = input;\n\n    //figma uses float 0...1 vs standard 0...255\n    const figmaColorTransformed = {\n        r: input.r * 255,\n        g: input.g * 255,\n        b: input.b * 255,\n        a: input.a\n    }\n    let color = chroma.gl(r, g, b, a);\n\n    switch (format) {\n        case 'hex': {\n            return color.hex();\n        }\n        case 'hsl': {\n            return color.css('hsl')\n        }\n        default: {\n            return color.css();\n        }\n    }\n}\n\ninterface HSLAdjustments {\n    h?: number;\n    s?: number;\n    l?: number;\n    a?: number;\n}\n\nexport function parseColorValue(input, adjustments?: HSLAdjustments): { gl: RGBA, rgb: string, hsl: string, hex: string } {\n    let color;\n    try {\n        if (input.startsWith('rgb')) {\n            const rgbValues = input.replace(/^rgba?\\(|\\s+|\\)$/g, '').split(',');\n\n            if (hexColorRegex.test(rgbValues[0])) {\n                color = chroma(rgbValues[0]); // hexToFigmaRGB(rgbValues[0]);\n                const alpha = parseFloat(rgbValues[1]);\n                color = color.alpha(alpha);\n            }\n            else {\n                color = chroma(input);\n            }\n        }\n        else {\n            color = chroma(input);\n        }\n    }\n    catch (e) {\n        console.error(e);\n        debugger;\n        return null;\n    }\n\n    if (adjustments) {\n        if (adjustments.h) {\n            color = color.set('hsl.h', `${adjustments.h}`);\n        }\n        if (adjustments.s) {\n            color = color.set('hsl.s', `${adjustments.s}`);\n        }\n        if (adjustments.l) {\n            color = color.set('hsl.l', `${adjustments.l}`);\n        }\n        if (adjustments.a) {\n            color = color.set('hsl.a', `${adjustments.a}`);\n        }\n    }\n\n    const [r, g, b, a] = color.gl();\n    return {\n        gl: { r, g, b, a },\n        rgb: color.css(),\n        hsl: color.css('hsl'),\n        hex: color.hex()\n    };\n}\n\n","import baseSpacingTokens from \"./tokens/spacing/base.json\";\nimport compactSpacingTokens from \"./tokens/spacing/compact.json\";\nimport largeSpacingTokens from \"./tokens/spacing/large.json\";\nimport touchSpacingTokens from \"./tokens/spacing/touch.json\";\nimport { _clone } from \"./utils/clone\";\nimport { flattenObject } from \"./utils/flatten-object\";\n\nconst tokens = {\n    base: baseSpacingTokens,\n    compact: compactSpacingTokens,\n    large: largeSpacingTokens,\n    touch: touchSpacingTokens\n};\n\nexport const base = getSpacingTokens(\"uneven\", \"base\");\nexport const compact = getSpacingTokens(\"uneven\", \"compact\");\nexport const large = getSpacingTokens(\"uneven\", \"large\");\nexport const touch = getSpacingTokens(\"uneven\", \"touch\");\n\ntype SpacingScale = \"base\" | \"compact\" | \"large\" | \"touch\";\n\nexport function getSpacingTokens(verticalSpacing: \"even\" | \"uneven\", spacingScale?: SpacingScale) {\n    let output = {};\n\n    for (const spacingScale in tokens) {\n        output[spacingScale] = normalizeSpacingTokens(spacingScale as SpacingScale, verticalSpacing === \"even\")\n    }\n\n    if(spacingScale) {\n        return output[spacingScale];\n    }\n\n    return output;\n}\nfunction normalizeSpacingTokens(spacingScale: \"base\" | \"compact\" | \"large\" | \"touch\", isEven: boolean) {\n    if (!isEven) {\n        return flattenObject(tokens[spacingScale]);\n    }\n\n    const scale = _clone(tokens[spacingScale]);\n    const major = scale[\"spacing\"];\n    const minor = scale[\"spacing\"].minor;\n\n    for (const tokenName in minor) {\n        minor[tokenName] = major[tokenName]\n    }\n    return flattenObject(scale);\n}","\nimport { DesignTokensRaw } from \"./import-tokens\";\nimport baseRadiiTokens from \"./tokens/radii/base.tokens.json\";\nimport compactRadiiTokens from \"./tokens/radii/compact.tokens.json\";\nimport largeRadiiTokens from \"./tokens/radii/large.tokens.json\";\nimport xlargeRadiiTokens from \"./tokens/radii/x-large.tokens.json\";\nimport { flattenObject } from \"./utils/flatten-object\";\n\nexport const base = flattenObject(baseRadiiTokens) as DesignTokensRaw;\nexport const compact = flattenObject(compactRadiiTokens) as DesignTokensRaw;\nexport const large = flattenObject(largeRadiiTokens) as DesignTokensRaw;\nexport const xLarge = flattenObject(largeRadiiTokens) as DesignTokensRaw;","import textStyleTokens from \"./tokens/typography/styles.json\";\nimport typeFaceTokens from \"./tokens/typography/typeface.json\";\n\nimport baseMajorThird from \"./tokens/typography/major-third/typescale-base.json\";\nimport compactMajorThird from \"./tokens/typography/major-third/typescale-compact.json\";\nimport largeMajorThird from \"./tokens/typography/major-third/typescale-large.json\";\n\nimport baseMinorThird from \"./tokens/typography/minor-third/typescale-base.json\";\nimport compactMinorThird from \"./tokens/typography/minor-third/typescale-compact.json\";\nimport largeMinorThird from \"./tokens/typography/minor-third/typescale-large.json\";\n\nimport baseMajorSecond from \"./tokens/typography/major-second/typescale-base.json\";\nimport compactMajorSecond from \"./tokens/typography/major-second/typescale-compact.json\";\nimport largeMajorSecond from \"./tokens/typography/major-second/typescale-large.json\";\n\nimport { flattenObject } from \"./utils/flatten-object\";\nimport { findFigmaVariableCollectionByName } from \"./utils/figma-variables\";\n\nexport const base = flattenObject(baseMinorThird);\nexport const compact = flattenObject(compactMinorThird);\nexport const large = flattenObject(largeMinorThird);\n\nexport const typeFace = flattenObject(typeFaceTokens);\n\nconst styles = flattenObject(textStyleTokens);\n\nconst tokens = {\n    majorThird: {\n        base: flattenObject(baseMajorThird),\n        compact: flattenObject(compactMajorThird),\n        large: flattenObject(largeMajorThird),\n    },\n    minorThird: {\n        base: flattenObject(baseMinorThird),\n        compact: flattenObject(compactMinorThird),\n        large: flattenObject(largeMinorThird),\n    },\n    majorSecond: {\n        base: flattenObject(baseMajorSecond),\n        compact: flattenObject(compactMajorSecond),\n        large: flattenObject(largeMajorSecond),\n    },\n}\n\nexport function getTypographyTokens(size: string, scale = \"minorThird\") {\n\n    let scaleTokens = tokens[scale][size];\n\n    return {\n        ...typeFace,\n        ...scaleTokens,\n        ...styles,\n    }\n}\n\nexport function getTypScaleTokens(scale = \"minorThird\") {\n    let scaleTokens = tokens[scale];\n    return scaleTokens\n}\n\nexport async function getFontDetails() {\n    return await getFontDetailsTokens();\n}\n\nasync function getFontDetailsTokens() {\n    const collectionName = 'Type Face';\n    const collection = await findFigmaVariableCollectionByName(collectionName);\n    let names = [];\n\n    if(collection == null) {\n        const tokens = typeFaceTokens;\n        const family = typeFaceTokens[\"font-family\"].$value;\n\n        for (let [name, textStyle] of Object.entries(typeFaceTokens[\"text-style\"])) {\n            names.push({ family, style: textStyle.$value });\n        }\n    }\n    else {\n        let family, styles = [];\n\n        for(const variableId of collection.variableIds) {\n            const figmaVar = await figma.variables.getVariableByIdAsync(variableId);\n            const name = figmaVar.name;\n            const figmaVarValue = Object.values(figmaVar.valuesByMode)[0];\n\n            if(name.startsWith('font-family')) {\n                family = figmaVarValue;\n            }\n            else if (name.startsWith('text-style')) {\n                styles.push(figmaVarValue)\n            }\n        }\n\n        for(const style of styles) {\n            names.push({ family, style });\n        }\n    }\n\n    return names;\n}\n\n\nfunction getFontDetailsLocal(styles: TextStyle[]) {\n    const fontFamilies: string[] = [];\n    const fontStyles: string[] = [];\n\n    for (const style of styles) {\n        const fontFamily = style.fontName.family;\n        const fontStyle = style.fontName.style;\n\n        if (fontFamilies.includes(fontFamily) == false) {\n            fontFamilies.push(fontFamily);\n        }\n        if (fontStyles.includes(fontStyle) == false) {\n            fontStyles.push(fontStyle);\n        }\n    }\n\n    let names = [];\n    fontFamilies.forEach(family => {\n        fontStyles.forEach(style => {\n            names.push({ family, style });\n        });\n    });\n\n    return names;\n}\n\n","import globalSizingTokens from \"./tokens/sizing/global.tokens.json\";\nimport baseSizingTokens from \"./tokens/sizing/base.tokens.json\";\nimport touchSizingTokens from \"./tokens/sizing/touch.tokens.json\";\nimport { flattenObject } from \"./utils/flatten-object\";\nimport { DesignTokensRaw } from \"./import-tokens\";\n\nexport const base = flattenObject(baseSizingTokens) as DesignTokensRaw;\nexport const touch = flattenObject(touchSizingTokens) as DesignTokensRaw;\nexport const global = flattenObject(globalSizingTokens) as DesignTokensRaw;","export function delayAsync(time) {\n    return new Promise((resolve) => setTimeout(resolve, time));\n}","import { defaultSettings } from './defaults';\nimport { DesignTokensRaw, EffectDesignToken, EffectTokenValue } from './import-tokens';\nimport { ImportFormData, refreshUI } from './import-ui';\nimport { _clone } from './utils/clone';\nimport { delayAsync } from './utils/delay-async';\n\nimport { flattenObject } from \"./utils/flatten-object\";\nimport { findVariableByReferences } from './utils/token-references';\n\ninterface ElevationTokens {\n    'shadow-1': ElevationRamp;\n    'shadow-2': ElevationRamp;\n    'shadow-3': ElevationRamp;\n    'shadow-4': ElevationRamp;\n    'shadow-5': ElevationRamp;\n    'shadow-6': ElevationRamp;\n}\n\ninterface ElevationRamp {\n    \"100\": EffectDesignToken;\n    \"200\": EffectDesignToken;\n    \"300\": EffectDesignToken;\n    \"400\": EffectDesignToken;\n    \"500\": EffectDesignToken;\n    \"600\": EffectDesignToken;\n}\n\nexport function getElevationTokens(params: ImportFormData, raw?: boolean): ElevationTokens|DesignTokensRaw {\n    let tokens: ElevationTokens;\n    let depth = params.shadowsStyle - 2;\n\n    if(params.shadowsSpread == undefined) {\n        params.shadowsSpread = defaultSettings.shadowsSpread;\n    }\n    if(params.shadowsStyle == 1) {\n        /*\n            this is exceptional case\n        */\n        tokens = generateShadows(0, params.shadowsSpread);\n        const firstShadowRump: ElevationRamp = _clone(tokens['shadow-1']);\n        Object.entries(firstShadowRump).forEach(([key, effectDesignToken]) => {\n            effectDesignToken.$value.pop();\n        });\n\n        tokens = {\n            'shadow-1': firstShadowRump,\n            'shadow-2': tokens['shadow-1'],\n            'shadow-3': tokens['shadow-2'],\n            'shadow-4': tokens['shadow-3'],\n            'shadow-5': tokens['shadow-4'],\n            'shadow-6': tokens['shadow-5'],        \n        }\n    }\n    else {\n        tokens = generateShadows(depth, params.shadowsSpread);\n    }\n\n\n    return raw === true ? tokens : flattenObject(tokens);\n}\n\nconst valueSequence = [1, 2, 4, 8, 12, 16, 24, 32, 40, 48, 56, 72, 88, 104, 120, 136, 152, 168];\nconst effectTemplate: EffectTokenValue = {\n    \"type\": \"DROP_SHADOW\",\n    \"showShadowBehindNode\": false,\n    \"color\": \"{utility.shade.100}\",\n    \"blendMode\": \"MULTIPLY\",\n    \"offsetX\": 0,\n    \"offsetY\": 0,\n    \"radius\": 1,\n    \"spread\": 0\n};\n\n\nfunction getLayersCount(offsetValue): number {\n    let layers = 1;\n    if (offsetValue > 0 && offsetValue < 12) {\n        layers = 2\n    }\n    else if (offsetValue >= 12) {\n        layers = 3;\n    }\n    else if (offsetValue >= 40) {\n        layers = 4;\n    }\n\n    return layers\n}\n\nfunction getShadowValueRamp(valueSequeceIndex, spread: number): ElevationRamp {\n    const offsetValue = valueSequence[valueSequeceIndex];\n    let layers = getLayersCount(offsetValue);\n    const shadowRampDefinition: ElevationRamp = {\n        \"100\": {\n            '$type': 'effect',\n            '$value': getShadowValue(layers, valueSequeceIndex, 1, spread)\n        },\n        \"200\": {\n            '$type': 'effect',\n            '$value': getShadowValue(layers, valueSequeceIndex, 2, spread)\n        },\n        \"300\": {\n            '$type': 'effect',\n            '$value': getShadowValue(layers, valueSequeceIndex, 3, spread)\n        },\n        \"400\": {\n            '$type': 'effect',\n            '$value': getShadowValue(layers, valueSequeceIndex, 4, spread)\n        },\n        \"500\": {\n            '$type': 'effect',\n            '$value': getShadowValue(layers, valueSequeceIndex, 5, spread)\n        },\n        \"600\": {\n            '$type': 'effect',\n            '$value': getShadowValue(layers, valueSequeceIndex, 6, spread)\n        },\n    };\n\n    return shadowRampDefinition;\n}\n\n/*\n    spread becomes useless once it goes below vertical offset and the shadow disappears\n    this function check both values and adjust spead value to prevent shadow from dissapearing\n*/\nfunction adjustNegativeSpreadValue(spread, offsetY) {\n    if(spread < 0 &&  Math.abs(spread) >= offsetY) {\n        return adjustNegativeSpreadValue(++spread, offsetY);\n    }\n\n    return spread\n}\n\nfunction getShadowValue(layers: number, sequeceStartIndex: number, colorIndex: number, spread: number): EffectTokenValue[] {\n    let shadowValue: EffectTokenValue[] = [\n        {\n            ..._clone(effectTemplate),\n            color: `{utility.shade.${colorIndex}00}`,\n        }\n    ]\n\n    for (let l = 0; l < layers; l++) {\n        const sequenceIndex = sequeceStartIndex + l;\n        const offsetY = valueSequence[sequenceIndex];\n        const radius = valueSequence[sequenceIndex + 1];\n        spread *= 1.25;\n\n        let layerValue: EffectTokenValue = {\n            ..._clone(effectTemplate),\n            color: `{utility.shade.${colorIndex}00}`,\n            offsetY,\n            radius,\n            spread: adjustNegativeSpreadValue(spread, offsetY)\n        }\n        shadowValue.push(layerValue)\n    }\n\n    return shadowValue;\n}\n\nfunction getSpreadFactor(spread: number) {\n    let spreadFactor = 0;\n\n    if(spread < 0) {\n        spreadFactor = -1;\n    }\n    else if(spread > 0) {\n        spreadFactor = 1;\n    }\n    return spreadFactor;\n}\nfunction generateShadows(size: number, spread: number): ElevationTokens {\n\n    let ramp = {};\n\n    spread /= 1.25;\n    for (let s = 1; s <= 6; s++) {\n        ramp[`shadow-${s}`] = getShadowValueRamp(size++, spread);\n        spread *= 1.25;\n    }\n\n    return ramp as ElevationTokens;\n}\n\nfunction findShadowComponent(name, destinationPage: PageNode): ComponentNode {\n    const pageComponents = destinationPage.findAllWithCriteria({\n        types: ['COMPONENT']\n    });\n\n    return pageComponents.find(node => {\n        const pluginData = node.getPluginData('SourceShadow');\n        return pluginData === name || node.name.includes(name);\n    });\n}\n\nconst _constraints: Constraints = {\n    horizontal: 'STRETCH',\n    vertical: 'STRETCH'\n}\n\nfunction createMask(shadowComponentFrame: SceneNode) {\n    const baseRectOuter = figma.createRectangle();\n    const baseRectInner = figma.createRectangle();\n    const maskLayer = figma.subtract([baseRectInner, baseRectOuter], shadowComponentFrame as FrameNode);\n\n    baseRectOuter.name = 'mask-outer';\n    baseRectOuter.constraints = _constraints;\n    baseRectOuter.setPluginData('SourceShadowElement', 'mask-outer');\n    baseRectInner.name = 'mask-inner';\n    baseRectInner.constraints = _constraints;\n    baseRectInner.resize(shadowComponentFrame.width, shadowComponentFrame.height);\n    baseRectInner.setPluginData('SourceShadowElement', 'mask-inner');\n    baseRectInner.x = 0;\n    baseRectInner.y = 0;\n\n    maskLayer.name = 'mask';\n    maskLayer.setPluginData('SourceShadowElement', 'mask');\n    maskLayer.isMask = true;\n    maskLayer.locked = true;\n\n    return maskLayer;\n}\n\nfunction getMaskLayer(frame: SceneNode) {\n    let maskLayer;\n\n    if('findOne' in frame) {\n        maskLayer = frame.findOne(node => node.getPluginData('SourceShadowElement') == 'mask' || node.name == 'mask') as BooleanOperationNode;\n    }\n\n    if(!maskLayer) {\n        maskLayer = createMask(frame);\n    }\n\n    return maskLayer;\n}\n\nfunction createShadowComponent(name, shadowToken: EffectDesignToken): ComponentNode {\n\n    const shadowComponentFrame = figma.createFrame();\n    shadowComponentFrame.name = name;\n    shadowComponentFrame.clipsContent = false;\n    shadowComponentFrame.fills = [];\n\n    const maskLayer = createMask(shadowComponentFrame)\n\n    shadowToken.$value.forEach((effectValue, index) => {\n        const shadowLayer = figma.createRectangle();\n        shadowLayer.name = `shadow-${index++}`;\n        shadowLayer.constraints = _constraints;        \n        shadowComponentFrame.appendChild(shadowLayer)\n        shadowLayer.locked = true;\n    })    \n\n\n\n    const shadowComponent = figma.createComponentFromNode(shadowComponentFrame);\n\n    shadowComponent.setPluginData('SourceShadow', name);\n    return shadowComponent;\n}\n\nfunction getShadowComponent(name, destinationPage: PageNode, shadowToken: EffectDesignToken): ComponentNode {\n    let shadowComponent = findShadowComponent(name, destinationPage);\n    if(!shadowComponent) {\n        shadowComponent = createShadowComponent(name, shadowToken)\n    }\n\n    shadowComponent.clipsContent = false;\n\n    return shadowComponent;\n}\n\nexport async function createUpdateElevationComponents(params: ImportFormData, destinationPage: string) {\n    const tokens = getElevationTokens(params, true) as ElevationTokens;\n    const page = figma.root.children.find(node => node.name == destinationPage) || figma.currentPage;\n    await figma.setCurrentPageAsync(page);\n\n    let shadowComponents: ComponentNode[] = [];\n\n    for (const key in tokens){\n\n        const shadowRamp = tokens[key] as ElevationRamp;\n        const shadowToken = shadowRamp['200'];\n\n        const shadowComponent = getShadowComponent(key, page, shadowToken);\n        const maskLayer = getMaskLayer(shadowComponent);\n\n        if(!maskLayer) {\n            throw new Error(`Error processing ${shadowComponent.name}. Cannot find mask layer, aborting...`);\n        }\n\n        const baseRectOuter = maskLayer.findOne(node => node.getPluginData('SourceShadowElement') == 'mask-outer' || node.name == 'mask-outer') as RectangleNode\n\n        if(!baseRectOuter) {\n            throw new Error(`Error processing ${shadowComponent.name} > ${maskLayer.name}. Cannot find mask outer mask rectangle, aborting...`);\n        }\n\n        maskLayer.visible = false;\n\n        await updateMaskComponentLayers(shadowComponent, shadowToken);\n\n        const absoluteBoundingBox = shadowComponent.absoluteBoundingBox;\n        const absoluteRenderBounds = shadowComponent.absoluteRenderBounds;\n\n        baseRectOuter.resize(absoluteRenderBounds.width, absoluteRenderBounds.height)\n        baseRectOuter.x = (absoluteRenderBounds.x - absoluteBoundingBox.x);\n        baseRectOuter.y = (absoluteRenderBounds.y - absoluteBoundingBox.y);\n\n        maskLayer.visible = true;\n        shadowComponents.push(shadowComponent)\n    }\n\n    await delayAsync(200);\n\n    figma.currentPage.selection = shadowComponents;\n    figma.viewport.scrollAndZoomIntoView(shadowComponents)\n}\n\nasync function updateMaskComponentLayers(shadowComponent: ComponentNode, shadowToken: EffectDesignToken) {\n        const shadowTokenValue = shadowToken.$value;\n        const shadowLayersChildren = shadowComponent.children as Array<SceneNode>;\n\n        // let shadowLayerIndex = shadowLayersChildren.length - 1;\n        // while(shadowLayerIndex > shadowTokenValue.length) {\n        //     shadowLayersChildren[shadowLayerIndex].remove();\n        //     shadowLayerIndex--;\n        // }\n\n        let index = 1;\n        while(shadowTokenValue.length) {\n            const effectValue = shadowTokenValue.shift();\n            const colorVariable = await findVariableByReferences(effectValue.color);\n            let paint: Paint = figma.util.solidPaint('#000000')\n\n            paint = figma.variables.setBoundVariableForPaint(paint, 'color', colorVariable);\n            let shadowLayer = shadowComponent.children[index] as RectangleNode;\n            \n            // findChild(node => node.name == `shadow-${index}`) as RectangleNode;\n            \n            if(shadowLayer && shadowLayer.type != 'RECTANGLE') {\n                throw new Error(`shadow-${index}  type is ${shadowLayer.type} but has to be a rectangle`);\n            }\n\n            if(!shadowLayer) {\n                shadowLayer = figma.createRectangle()\n                \n                shadowLayer.constraints = {\n                    horizontal: 'STRETCH',\n                    vertical: 'STRETCH'\n                };\n                shadowComponent.insertChild(index, shadowLayer)\n            }\n\n            shadowLayer.name = `shadow-${index}`;\n            shadowLayer.fills = [paint];\n            shadowLayer.visible = true;\n            shadowLayer.blendMode = effectTemplate.blendMode;\n\n            const LayerBlur: BlurEffect = {\n                type: \"LAYER_BLUR\",\n                visible: true,\n                radius: effectValue.radius\n            }\n            shadowLayer.effects = [LayerBlur];\n\n            shadowLayer.x = effectValue.offsetX - effectValue.spread;\n            shadowLayer.y = effectValue.offsetY - effectValue.spread;\n            shadowLayer.resize(shadowComponent.width + 2 * effectValue.spread, shadowComponent.height + 2 * effectValue.spread);\n\n            index++;\n\n        }\n}","import { DesignToken, DesignTokensRaw } from \"./import-tokens\";\nimport opacityTokens from \"./tokens/opacity/opacity.tokens.json\";\nimport { flattenObject } from \"./utils/flatten-object\";\n\nexport const opacity = flattenObject(opacityTokens) as DesignTokensRaw;","const sizeValuesOrder = [\n    'none',\n    'xs5',\n    'xs5',\n    'xs3',\n    'xs2',\n    'xs',\n    'sm',\n    'base',\n    'md',\n    'lg',\n    'xl',\n    'xl2',\n    'xl3',\n    'xl4',\n    'xl5',\n    'xl6',\n    'xl7',\n    'round'\n]\n\nconst opacityValuesOrder = [\n    \"opacity-0\",\n    \"opacity-5\",\n    \"opacity-10\",\n    \"opacity-15\",\n    \"opacity-20\",\n    \"opacity-25\",\n    \"opacity-30\",\n    \"opacity-35\",\n    \"opacity-40\",\n    \"opacity-45\",\n    \"opacity-50\",\n    \"opacity-55\",\n    \"opacity-60\",\n    \"opacity-65\",\n    \"opacity-70\",\n    \"opacity-75\",\n    \"opacity-80\",\n    \"opacity-85\",\n    \"opacity-90\",\n    \"opacity-95\",\n    \"opacity-100\",\n]\n\nconst colorNamesOrder = [\n    '_test',\n    'primary',\n    'brand',\n    'fill/base',\n    'fill/contrast',\n    'text/black',\n    'text/white',\n    'text/base/600',\n    'text/base/500',\n    'text/base/400',\n    'text/base/action',\n    'text/base/primary',\n    'text/base/info',\n    'text/base/success',\n    'text/base/warning',\n    'text/base/danger',\n    'text/accent/600',\n    'text/accent/500',\n    'text/accent/400',\n    'text/contrast/600',\n    'text/contrast/500',\n    'text/contrast/400',\n    'text/contrast/action',\n    'text/contrast/primary',\n    'text/contrast/info',\n    'text/contrast/success',\n    'text/contrast/warning',\n    'text/contrast/danger',\n    'stroke/base',\n    'stroke/contrast',\n    'info',\n    'success',\n    'warning',\n    'danger',\n    'alt/base',\n    'alt/contrast',\n    'utility',\n    'accent/red',\n    'accent/amber',\n    'accent/brown',\n    'accent/green',\n    'accent/teal',\n    'accent/cyan',\n    'accent/blue',\n    'accent/indigo',\n    'accent/violet',\n    'accent/purple',\n    'accent/pink',\n\n    'ui-element/bg/rest',\n    'ui-element/bg/hover',\n    'ui-element/bg/active',\n    'ui-element/bg/selected',\n    'ui-element/bg/disabled',\n    'ui-element/border/rest',\n    'ui-element/border/hover',\n    'ui-element/border/active',\n    'ui-element/border/selected',\n    'ui-element/border/disabled',\n    'ui-element/text',\n\n    'button/bg/rest',\n    'button/bg/hover',\n    'button/bg/active',\n    'button/primary',\n    'button/success',\n    'button/danger',\n    'button/border/rest',\n    'button/border/hover',\n    'button/border/active',\n\n    'form-element/bg/rest',\n    'form-element/bg/readonly',\n    'form-element/bg/hover',\n    'form-element/border/rest',\n    'form-element/border/readonly',\n    'form-element/border/hover',\n\n    'card/bg/primary',\n    'card/bg/secondary',\n    'card/border/inner',\n    'card/border/outer',\n    \n    'overlay/bg',\n    'overlay/border',\n]\n\nexport function getColorTokensSortFn() {\n    return getSortFn(colorNamesOrder, 'startsWith');\n}\n\nexport function getSizeTokensSortFn() {\n    return getSortFn(sizeValuesOrder, 'endsWith');\n}\n\nexport function getAlphaNumTokensSortFn() {\n    return function(a, b) {\n        a.name.localeCompare(b.name, 'en', { numeric: true })\n    } \n    // var collator = new Intl.Collator(undefined, {numeric: true, sensitivity: 'base'});\n    // return collator.compare;\n}\n\nfunction getSortFn(dataSet: string[], fn = 'startsWith') {\n    return function(firstEl, secondEl) {\n        var resultFirst = dataSet.findIndex(item => {\n            return firstEl.name[fn](item);\n        })\n        var resultSecond = dataSet.findIndex(item => {\n            return secondEl.name[fn](item);\n        })\n\n        if (resultFirst < resultSecond) {\n            return -1; // firstEl goes first\n        }\n        if (resultFirst > resultSecond) {\n            return 1; // secondEl goes first\n        }\n        if (resultFirst === resultSecond) {\n            let name1 = firstEl.name;\n            let name2 = secondEl.name;\n\n            if (name1 < name2) {\n                return -1; // firstEl goes first\n            }\n            if (name1 > name2) {\n                return 1; // secondEl goes first\n            }\n\n            return 0\n        }\n        return 0; // keep original order    \n    }\n}","import { DesignTokensRaw, TypographyTokenValue } from \"../import-tokens\";\nimport { _clone } from \"./clone\";\nimport { getAliasName, getDefaultVariableValue } from \"./figma-variables\";\nimport { findVariableByReferences, getGlobalTokensDictionary, resolveGlobalTokenValue } from \"./token-references\";\n\nlet fontLoadStatus = [];\nasync function preLoadFont(fontName: FontName) {\n    const fontNameAndStyle = `${fontName.family} ${fontName.style}`;\n\n    if(fontLoadStatus.indexOf(fontNameAndStyle) == -1) {\n        await figma.loadFontAsync(fontName).catch((reason) => {\n            debugger;\n        });\n        fontLoadStatus.push(fontNameAndStyle);\n        return true;\n    }\n\n    return false;\n}\n\nexport async function importTextStyles(tokens: DesignTokensRaw) {\n    fontLoadStatus = [];\n\n    for (const [name, token] of Object.entries(tokens)) {\n\n        if (token.$type != 'typography') {\n            continue;\n        }\n\n        const resolved = await parseValues(token.$value, tokens);\n        const normalized = convertTextStyleToFigma(name, resolved);\n        let fontName: FontName = normalized.fontName;\n\n        await preLoadFont(fontName);\n\n        let textStyle = await getStyleByName(name);\n        let newStyle = false;\n\n        if (!textStyle) {\n            textStyle = figma.createTextStyle();\n            newStyle = true;\n        }\n\n        // reset\n        textStyle.setBoundVariable('fontStyle', null);\n        textStyle.setBoundVariable('lineHeight', null);\n        textStyle.setBoundVariable('fontSize', null);\n        textStyle.setBoundVariable('paragraphSpacing', null);\n        textStyle.setBoundVariable('fontFamily', null);\n        textStyle.setBoundVariable('fontStyle', null);\n\n        if (!newStyle) {\n            fontName = _clone(textStyle.fontName);\n            await preLoadFont(fontName);\n            normalized.fontName = fontName;\n        }\n        try {\n\n            Object.keys(normalized).forEach(key => {\n                textStyle[key] = normalized[key];\n            })\n\n            const lineHeightValue = token.$value.lineHeight;\n            const lineHeightVariable = typeof lineHeightValue == 'string' ? await findVariableByReferences(lineHeightValue) : null;          \n            const fontSizeValue = token.$value.fontSize;\n            const fontSizeVariable = typeof fontSizeValue == 'string' ? await findVariableByReferences(fontSizeValue) : null;\n            const paragraphSpacingValue = token.$value.paragraphSpacing;\n            const paragraphSpacingVariable = typeof paragraphSpacingValue == 'string' ? await findVariableByReferences(paragraphSpacingValue) : null;\n            const fontFamilyValue = token.$value.fontFamily;\n            const fontFamilyVariable = typeof fontFamilyValue == 'string' ? await findVariableByReferences(fontFamilyValue) : null;\n            const fontStyleValue = token.$value.fontStyle;\n            const fontStyleVariable = typeof fontStyleValue == 'string' ? await findVariableByReferences(fontStyleValue) : null;\n\n            lineHeightVariable && textStyle.setBoundVariable('lineHeight', lineHeightVariable);\n            fontSizeVariable && textStyle.setBoundVariable('fontSize', fontSizeVariable);\n            paragraphSpacingVariable && textStyle.setBoundVariable('paragraphSpacing', paragraphSpacingVariable);\n            fontFamilyVariable && textStyle.setBoundVariable('fontFamily', fontFamilyVariable);\n            fontStyleVariable && textStyle.setBoundVariable('fontStyle', fontStyleVariable);\n        }\n        catch (e) {\n            debugger;\n        }\n    }\n}\n\nasync function parseValues(value: TypographyTokenValue, dictionary?): Promise<TypographyTokenValue> {\n    let output = {};\n    for (const [key, tokenReference] of Object.entries(value)) {\n        const resolvedVariable = await findVariableByReferences(tokenReference as string)\n\n        if(resolvedVariable) {\n            output[key] = await getDefaultVariableValue(resolvedVariable);\n        }\n        else {\n            const resolvedValue = resolveGlobalTokenValue(tokenReference, dictionary || getGlobalTokensDictionary());\n            output[key] = resolvedValue;\n        }\n    }\n    return output as TypographyTokenValue;\n}\n\nasync function getLocalStyles() {\n    return await figma.getLocalTextStylesAsync();\n};\n\nasync function getStyleByName(name) {\n    const stylesByType = await getLocalStyles();\n    const match = stylesByType.find((style) => style.name === name);\n\n    if (match) {\n        return match;\n    } else {\n        return null;\n    }\n};\n\nfunction convertTextCaseToFigma(value: string): \"UPPER\" | \"LOWER\" | \"TITLE\" | \"SMALL_CAPS\" | \"SMALL_CAPS_FORCED\" | \"ORIGINAL\" {\n    switch (value.toLowerCase()) {\n        case 'uppercase':\n        case 'upper':\n            return 'UPPER';\n        case 'lowercase':\n        case 'lower':\n            return 'LOWER';\n        case 'capitalize':\n        case 'title':\n            return 'TITLE';\n        case 'small-caps':\n        case 'small_caps':\n            return 'SMALL_CAPS';\n        case 'all-small-caps':\n        case 'small_caps_forced':\n            return 'SMALL_CAPS_FORCED';\n        default:\n            return 'ORIGINAL';\n    }\n}\n\nfunction convertTextDecorationToFigma(value: string) {\n    switch (value.toLowerCase()) {\n        case 'underline':\n            return 'UNDERLINE';\n        case 'line-through':\n        case 'strikethrough':\n            return 'STRIKETHROUGH';\n        default:\n            return 'NONE';\n    }\n}\n\ninterface UnitValue {\n    unit: \"PERCENT\" | \"PIXELS\" | \"AUTO\";\n    value?: string|number;\n}\n\nfunction getLetterSpacing(value: string|number): LetterSpacing {\n    return getValueUnit(value) as LetterSpacing;\n}\n\nfunction getValueUnit(value: string|number): LetterSpacing | LineHeight {\n    const stringValue = `${value}`;\n\n    if(value === 'AUTO') {\n        return {\n            unit: \"AUTO\"\n        };\n    }\n\n    if(stringValue.includes('%')) {\n        return {\n            unit: \"PERCENT\",\n            value: parseFloat(stringValue)\n        }\n    }\n    else {\n        return {\n            unit: \"PIXELS\",\n            value: parseFloat(stringValue)\n        }\n    }\n}\n\nexport function convertTextStyleToFigma(name, values: TypographyTokenValue): TextStyle {\n    let textStyle = {\n        'name': name,\n        'fontSize': parseFloat(`${values.fontSize}`),\n        'textDecoration': convertTextDecorationToFigma(values.textDecoration),\n        'fontName': {\n            family: values.fontFamily,\n            style: values.fontStyle\n        },\n        'letterSpacing': getLetterSpacing(values.letterSpacing),\n        'lineHeight': getValueUnit(values.lineHeight),\n        'leadingTrim': \"NONE\",\n        'paragraphIndent': 0,\n        'paragraphSpacing': parseInt(`${values.paragraphSpacing}`) || 0,\n        'listSpacing': parseFloat(`${values.listSpacing}`) || parseFloat(`${values.lineHeight}`) / 2,\n        'hangingPunctuation': false,\n        'hangingList': false,\n        'textCase': convertTextCaseToFigma(values.textCase)\n    }\n\n    return textStyle as TextStyle;\n}\n\nfunction getUnitValue(unitValue: UnitValue) {\n    if(unitValue.unit == \"AUTO\") {\n        return \"AUTO\"\n    }\n\n    if(unitValue.unit == \"PERCENT\") {\n        return `${unitValue.value}%`\n    }\n\n    return unitValue.value\n}\n\nexport async function convertFigmaTextStyleToToken(style: TextStyle): Promise<TypographyTokenValue> {\n    let typographyTokenValue: TypographyTokenValue = {\n        \"fontFamily\": style.fontName.family,\n        \"lineHeight\": getUnitValue(style.lineHeight),\n        \"fontSize\": style.fontSize,\n        \"letterSpacing\": getUnitValue(style.letterSpacing),\n        \"listSpacing\": style.listSpacing,\n        \"paragraphSpacing\": style.paragraphSpacing,\n        \"fontStyle\": style.fontName.style,\n        \"textCase\": style.textCase,\n        \"textDecoration\": style.textDecoration,   \n    }\n\n    for(const prop in style.boundVariables) {\n        const boundVariable = style.boundVariables[prop];\n        typographyTokenValue[prop] = await getAliasName(boundVariable.id);\n    }\n\n    return typographyTokenValue;\n}","export function toTitleCase(str: string) {\n    return str.toLowerCase().replace(/(?:^|[\\s-/])\\w/g, function (match) {\n        return match.toUpperCase();\n    });\n}\n\nexport function camelToTitle(camelCase) {\n  // no side-effects\n  return camelCase\n    // inject space before the upper case letters\n    .replace(/([A-Z])/g, function(match) {\n       return \" \" + match;\n    })\n    // replace first char with upper case\n    .replace(/^./, function(match) {\n      return match.toUpperCase();\n    });\n}\n\nexport function toCamelCase(str) {\n  return str.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, function(word, index) {\n    return index === 0 ? word.toLowerCase() : word.toUpperCase();\n  }).replace(/\\s+/g, '');\n}","import { DesignToken, EffectTokenValue } from \"../import-tokens\";\nimport { _clone } from \"./clone\";\nimport { ColorFormat, FigmaRGB, convertFigmaColorToRgb, parseColorValue } from \"./figma-colors\";\nimport { getAliasName, getDefaultVariableValue } from \"./figma-variables\";\nimport { resolveGlobalTokenValue, findVariableByReferences, getGlobalTokensDictionary } from \"./token-references\";\n\n\nlet globalDictionary;\n/*\n    This method reads shadow color values directly from Figma Variables\n*/\nexport async function importEffectStyles(tokens, dictionary?) {\n\n    if(dictionary) {\n        globalDictionary = dictionary;\n    }\n\n    for(const [name, tokenData] of Object.entries(tokens)) {\n        let token = tokenData as DesignToken;\n\n        if (token.$type == 'effect') {\n            let figmaStyle = await getStyleByName(name);\n            \n            if(!figmaStyle) {\n                figmaStyle = figma.createEffectStyle();\n            }\n            const values = token.$value;\n            const effects = [];\n\n            for(const effectValue of values) {\n                const effect = await convertEffectStyleToFigma(effectValue) as Effect;\n                effects.push(effect);\n            }\n\n            figmaStyle.name = name;\n            figmaStyle.effects = effects;\n            figmaStyle.description = token.description || figmaStyle.description;\n        }\n    }\n}\n\ninterface BoundProp {\n    propName: VariableBindableEffectField,\n    variable: Variable\n}\n\nasync function convertEffectStyleToFigma(value: EffectTokenValue): Promise<Effect> {\n    const {\n        effectTokenValue,\n        boundProps \n    } = await resolveBoundValues(value)\n\n    let effect = {\n        type: effectTokenValue.type,\n        radius: effectTokenValue.radius,\n        visible: true\n    }\n\n    if(effectTokenValue.type == 'INNER_SHADOW' || effectTokenValue.type == 'DROP_SHADOW') {\n        effect = Object.assign(effect, {\n            color: figma.util.rgba(effectTokenValue.color),\n            offset: {\n                x: effectTokenValue.offsetX,\n                y: effectTokenValue.offsetY\n            },\n            spread: effectTokenValue.spread,\n            blendMode: \"NORMAL\"\n        })\n    }\n\n    if(effectTokenValue.type == 'DROP_SHADOW') {\n        effect = Object.assign(effect, {\n            showShadowBehindNode: parseBoolean(effectTokenValue.showShadowBehindNode)\n        })\n    }\n\n\n    boundProps.forEach(boundData => {\n        const effectCopy = figma.variables.setBoundVariableForEffect(effect as Effect,  boundData.propName, boundData.variable) as any;\n\n        if(effect.type == \"DROP_SHADOW\" || effect.type == 'INNER_SHADOW') {\n            effectCopy.spread = effectTokenValue.spread;\n        }\n\n        effect = effectCopy;\n    });\n\n    return effect as Effect;\n}\n\n\n\nasync function resolveBoundValues(effectValue: EffectTokenValue): Promise<{effectTokenValue: EffectTokenValue, boundProps: BoundProp[]}> {\n\n    let copy = _clone(effectValue) as EffectTokenValue;\n    let boundProps: BoundProp[] = [];\n\n\n    for(const prop in copy) {\n        const figmaVariable = await findVariableByReferences(copy[prop]);\n\n        if(figmaVariable) {\n            boundProps.push({\n                propName: prop as VariableBindableEffectField,\n                variable: figmaVariable\n            });\n            const defaultValue = await getDefaultVariableValue(figmaVariable)\n            copy[prop] = defaultValue;\n        }\n        else {\n            let val = resolveGlobalTokenValue(copy[prop], globalDictionary || getGlobalTokensDictionary());\n\n            if(prop == 'color') {\n                val = parseColorValue(val).rgb;\n            }\n\n            copy[prop] = val;\n        }\n    }\n\n    return {effectTokenValue: copy, boundProps};\n}\n\nasync function getLocalStyles() {\n    return await figma.getLocalEffectStylesAsync();\n};\n\nasync function getStyleByName(name) {\n    const stylesByType = await getLocalStyles();\n    const match = stylesByType.find((style) => style.name === name);\n\n    if (match) {\n        return match;\n    } else {\n        return null;\n    }\n};\n\nfunction parseBoolean(val: string|boolean) {\n    if (typeof val == 'boolean') {\n        return val\n    }\n    return val !== \"false\";\n}\n\n\n\nexport async function convertFigmaEffectStyleToToken(style: EffectStyle, colorFormat?: ColorFormat): Promise<EffectTokenValue[]> {\n\n    const effects = style.effects;\n    const values = [];\n\n    for(var effect of effects) {\n        values.push(await convertFigmaShadowEffectToToken(effect, colorFormat));\n    }\n\n    return values;\n}\n\nasync function convertFigmaShadowEffectToToken(effect: Effect, colorFormat?: ColorFormat): Promise<EffectTokenValue> {\n    let effectTokenValue: EffectTokenValue = {\n        \"type\": effect.type,\n        \"radius\": effect.radius,\n    };\n\n    if(effect.type == \"DROP_SHADOW\" || effect.type == \"INNER_SHADOW\") {\n        effectTokenValue = Object.assign(effectTokenValue, {\n            \"color\": convertFigmaColorToRgb(effect.color, colorFormat),\n            \"blendMode\": effect.blendMode,\n            \"offsetX\": effect.offset.x,\n            \"offsetY\": effect.offset.y,\n            \"spread\": effect.spread,\n        });\n    }\n\n    if(effect.type == \"DROP_SHADOW\") {\n        effectTokenValue = Object.assign(effectTokenValue, {\n            \"showShadowBehindNode\": `${effect.showShadowBehindNode || false}`\n        });\n    }\n\n\n    for(const prop in effect.boundVariables) {\n        const boundVariable = effect.boundVariables[prop];\n        effectTokenValue[prop] = await getAliasName(boundVariable.id);\n    }\n\n    return effectTokenValue;\n}","import { SourceColorTheme, getColorTokenValue, getComponentColors, getGlobalNeutrals, getShadowColorTokens, getThemeColors } from './color-tokens';\nimport { getFigmaCollection, resolveVariableType, setFigmaVariable } from \"./utils/figma-variables\";\n\nimport chroma from 'chroma-js';\n\nimport * as spacingTokens from './spacing-tokens';\nimport * as radiiTokens from './radii-tokens';\nimport * as typographyTokens from './typography-tokens';\nimport * as sizingTokens from './sizing-tokens';\nimport * as effectsTokens from './effect-tokens';\nimport * as opacityTokens from './opacity-tokens';\n\nimport {colorThemes, colorThemeNames, collectionNames} from './defaults';\n\nimport { getSizeTokensSortFn, getColorTokensSortFn, getAlphaNumTokensSortFn  } from './utils/sort-tokens';\nimport { importTextStyles } from './utils/figma-text-styles';\nimport { getGlobalAccentRamp } from './color-generators/accent-palette-generator';\nimport { resolveAliasOrValue, addToGlobalTokensDictionary, getGlobalTokensDictionary } from './utils/token-references';\nimport { camelToTitle, toTitleCase } from './utils/text-to-title-case';\nimport { ImportFormData } from './import-ui';\nimport { radiiSizeName, spacingSizeName, typographySizeName } from './defaults';\nimport { importEffectStyles } from './utils/figma-effect-styles';\nimport { flattenObject } from './utils/flatten-object';\nimport { roundTwoDigits } from './utils/round-decimals';\nimport { _clone } from './utils/clone';\nimport * as themeStore from './utils/themes-store';\n\nconsole.clear();\n\nexport async function initiateImport() {\n    const params: ImportFormData = themeStore.getTheme('light');\n    await figma.loadFontAsync({ family: \"Inter\", style: \"Regular\" });\n\n    params.createComponentTokens && await getCollectionAndPrepareTokens({\n        collectionName: collectionNames.get('componentColors'),\n        modeName: \"Default\",\n        data: getComponentColors(),\n        sortFn: getColorTokensSortFn()\n    });\n\n    params.createColorTokens && await getCollectionAndPrepareTokens({\n        collectionName: collectionNames.get('themeColors'),\n        modeName: \"Light Base\",\n        data: getThemeColors('lightBase', params),\n        sortFn: getColorTokensSortFn()\n    });\n\n    params.createSpacingTokens && await getCollectionAndPrepareTokens({\n        collectionName: collectionNames.get('spacing'),\n        modeName: toTitleCase(params.spacing),\n        data: spacingTokens[params.spacing],\n        sortFn: getSizeTokensSortFn(),\n    });\n\n    params.createRadiiTokens && await getCollectionAndPrepareTokens({\n        collectionName: collectionNames.get('radii'),\n        modeName: toTitleCase(params.radii),\n        data: radiiTokens[params.radii],\n        sortFn: getSizeTokensSortFn(),\n    });\n\n    params.createTypographyTokens && await getCollectionAndPrepareTokens({\n        collectionName: \"Type Scale\",\n        modeName: toTitleCase(params.baseFontSize),\n        data: typographyTokens[params.baseFontSize],\n        sortFn: getSizeTokensSortFn(),\n    });\n\n    params.createOpacityTokens && await getCollectionAndPrepareTokens({\n        collectionName: collectionNames.get('opacity'),\n        modeName: toTitleCase(\"default\"),\n        data: opacityTokens.opacity,\n        sortFn: getAlphaNumTokensSortFn(),\n    });\n\n    params.createGlobalSizeTokens && await getCollectionAndPrepareTokens({\n        collectionName: collectionNames.get('globalSizing'),\n        modeName: toTitleCase(\"default\"),\n        data: sizingTokens.global,\n        sortFn: getAlphaNumTokensSortFn(),\n    });\n}\n\nfunction generateVariablesForPlayground(data: ImportFormData, isPlayground = false) {\n    if (isPlayground === false) {\n        return\n    };\n\n    const contrastRatios = {};\n\n    const primaryColorHUE = data.primary;\n    const shades = getGlobalAccentRamp(data[primaryColorHUE], data);\n\n    Object.entries(shades).forEach(([name, token]) => {\n        token.scopes = [];\n\n        let chromaColor = chroma(token.$value as string);\n        const contrast1 = roundTwoDigits(chroma.contrast(chroma.hsl(0, 0, 1), chromaColor));\n        const contrast2 = roundTwoDigits(chroma.contrast(chroma.hsl(0, 0, 0.22), chromaColor));\n\n        contrastRatios[`_accent_${name}_vs_light`] = {\n            \"$value\": contrast1.toString(),\n            \"$type\": \"string\",\n            \"scopes\": []\n        }\n        contrastRatios[`_accent_${name}_vs_dark`] = {\n            \"$value\": contrast2.toString(),\n            \"$type\": \"string\",\n            \"scopes\": []\n        }\n    });\n\n    importVariables({\n        collectionName: \"_Playground\",\n        modeName: \"Default\",\n        data: {\n            ...flattenObject({ '_global-accent': shades }),\n            ...contrastRatios,\n            '_primary-color-hue': {\n                \"$value\": data[data.primary].toString(),\n                \"$type\": \"string\",\n                \"scopes\": []\n            },\n            '_primary-color': {\n                \"$value\": data.primary,\n                \"$type\": \"string\",\n                \"scopes\": []\n            },\n            '_success-color': {\n                \"$value\": data.success,\n                \"$type\": \"string\",\n                \"scopes\": []\n            },\n            '_warning-color': {\n                \"$value\": data.warning,\n                \"$type\": \"string\",\n                \"scopes\": []\n            },\n            '_danger-color': {\n                \"$value\": data.danger,\n                \"$type\": \"string\",\n                \"scopes\": []\n            },\n            '_info-color': {\n                \"$value\": data.info,\n                \"$type\": \"string\",\n                \"scopes\": []\n            },\n        }\n    });\n}\n\nexport async function importAllTokens() {\n    const params: ImportFormData = themeStore.getTheme('light')\n\n    const isPlayground = figma.root.getPluginData('SDSPlayground') !== '';\n    generateVariablesForPlayground(params, isPlayground);\n\n    params.createColorTokens && await importColorTheme();\n\n    params.createComponentTokens && await importVariables({\n        collectionName: collectionNames.get('componentColors'),\n        modeName: \"Default\",\n        data: getComponentColors()\n    });\n\n    params.createSpacingTokens && await importSizeTokens({\n        type: 'spacing',\n        collectionName: collectionNames.get('spacing'),\n        params: params,\n        defaultMode: params.spacing,\n        defaultOrder: spacingSizeName,\n        tokens: spacingTokens.getSpacingTokens(params.verticalSpacing)\n    });\n\n    params.createRadiiTokens && await importSizeTokens({\n        type: 'radii',\n        collectionName: collectionNames.get('radii'),\n        params: params,\n        defaultMode: params.radii,\n        defaultOrder: radiiSizeName,\n        tokens: radiiTokens\n    });\n\n    params.createTypographyTokens && await importTypographyTokens(params);\n\n\n    params.createOpacityTokens && await importVariables({\n        collectionName: collectionNames.get('opacity'),\n        modeName: \"Default\",\n        data: opacityTokens.opacity\n    });\n\n    params.createGlobalSizeTokens && await importVariables({\n        collectionName: collectionNames.get('globalSizing'),\n        modeName: \"Default\",\n        data: sizingTokens.global\n    });\n\n\n    params.createElevationTokens && await importEffectTokens(params);\n\n    figma.notify(\"Figma variables has been imported\");\n\n    figma.ui.postMessage(\"IMPORT_COMPLETED\");\n}\n\nfunction getThemeParams(theme: SourceColorTheme) {\n    if (theme.startsWith('light')) {\n        return themeStore.getTheme('light');\n    }\n    if(theme.startsWith('dark')) {\n        return themeStore.getTheme('dark');\n    }\n\n    throw new Error(`Unusual theme name ${theme}`);\n}\n\nasync function importColorTheme() {\n    const defaultThemes = _clone(colorThemes) as string[];\n    \n    addToGlobalTokensDictionary({     \n        ...getComponentColors(),\n    });\n\n    let index = 0;\n\n    while(defaultThemes.length) {\n        const themeName = defaultThemes.shift() as SourceColorTheme;\n        const params = getThemeParams(themeName);\n        let themeColors = getThemeColors(themeName, params);\n        const globalNeutrals = getGlobalNeutrals(params);\n\n        addToGlobalTokensDictionary({\n            ...globalNeutrals,\n            ...themeColors\n        });\n\n        await importVariables({\n            collectionName: collectionNames.get('themeColors'),\n            modeName: colorThemeNames[index],\n            data: themeColors\n        });\n\n        index++;\n    }\n\n    debugger\n}\n\nasync function importSizeTokens(data: {\n    type: \"spacing\" | \"radii\" | \"typeScale\" | \"iconScale\" | \"typeFace\";\n    defaultMode: string;\n    params: ImportFormData,\n    collectionName: string,\n    defaultOrder: string[],\n    tokens: any;\n    isSingleMode?: boolean;\n}) {\n    const tokens = data.tokens;\n    const isSingleMode = data.isSingleMode || false;\n    const singleCollection = data.params.singleCollection;\n    const defaultMode = data.defaultMode;\n\n    const defaultOrder = data.defaultOrder.filter(item => item != defaultMode)\n    defaultOrder.splice(0, 0, defaultMode);\n\n    defaultOrder.length = isSingleMode ? 1 : defaultOrder.length;\n\n    let index = 0;\n    for(const modeName of defaultOrder) {\n        await importVariables({\n            collectionName: singleCollection ? \"UI Scale\" : data.collectionName,\n            modeName: camelToTitle(modeName),\n            modeIndex: index++,\n            data: tokens[modeName],\n            isSingleMode: isSingleMode\n        });    \n    }\n}\n\nexport async function getCollectionAndPrepareTokens({ collectionName, modeName, modeIndex = -1, data, sortFn = null, isSingleMode = false }) {\n    let modeId;\n    const { collection, isNew } = await getFigmaCollection(collectionName);\n\n    if (isNew || isSingleMode) {\n        modeId = collection.modes[0].modeId;\n        collection.renameMode(modeId, modeName);\n    }\n    else {\n        const mode = modeIndex < 0 ? collection.modes.find(mode => mode.name === modeName) : collection.modes[modeIndex];\n        if (!mode) {\n            try {\n                modeId = collection.addMode(modeName)\n            }\n            catch(e) {\n                figma.notify(\"Cannot create more than one mode. Is your file under Pro team or org plan?\", {error: true});\n                console.error(\"Cannot create more than one mode. Is your file under Pro team or org plan?\", e);\n                throw new Error(e)\n                figma.closePlugin();\n            }\n        }\n        else {\n            modeId = mode.modeId;\n            collection.renameMode(modeId, modeName);\n        }\n    }\n\n    let transformedTokens: DesignToken[] = Object.entries(data as DesignTokensRaw).map(([key, object]) => {\n        return {\n            name: key,\n            ...object as DesignToken\n        }\n    })\n\n    if (sortFn != null) {\n        transformedTokens.sort(sortFn);\n    }\n\n    if (isNew) {\n        // create variables straight away so there is a way to make \n        // references / aliases without additional pass\n        for(const token of transformedTokens) {\n            const type = resolveVariableType(token[\"$type\"]);\n            await setFigmaVariable(collection, modeId, type, token.name)\n        }\n    }\n\n    return {\n        tokens: transformedTokens,\n        collection,\n        modeId,\n        type: data.$type\n    }\n}\n\nexport async function importVariables({ collectionName, modeName, modeIndex = -1, data, sortFn = null, isSingleMode = false, overrideValues = true }) {\n    const {\n        tokens,\n        collection,\n        modeId,\n        type\n    } = await getCollectionAndPrepareTokens({ collectionName, modeName, modeIndex, data, sortFn, isSingleMode })\n\n    for(const token of tokens) {\n        let type = '$type' in token ? token.$type : 'string';\n        await processToken({\n            collection,\n            modeId,\n            type: type,\n            variableName: token.name,\n            token: token,\n            overrideValues\n        });\n    }\n\n}\n\nasync function importShadowVariables(params: ImportFormData) {\n\n    const style = params.shadowsStyle;\n\n    addToGlobalTokensDictionary({\n        ...getGlobalNeutrals(params)\n    });\n\n    await importVariables({\n        collectionName: collectionNames.get('themeColors'),\n        modeName: 'Light Base',\n        data: getShadowColorTokens('light', params)\n    });        \n    await importVariables({\n        collectionName: collectionNames.get('themeColors'),\n        modeName: 'Dark Base',\n        data: getShadowColorTokens('dark', params)\n    });        \n    await importVariables({\n        collectionName: collectionNames.get('themeColors'),\n        modeName: 'Dark Elevated',\n        data: getShadowColorTokens('dark', params)\n    });\n}\n\nasync function importEffectTokens(params: ImportFormData) {\n    const tokens = effectsTokens.getElevationTokens(params);\n    await importShadowVariables(params);\n    await importEffectStyles(tokens);\n}\n\nasync function importTypographyTokens(params: ImportFormData) {\n    const tokens = typographyTokens.getTypographyTokens(params.baseFontSize, params.typeScale);\n    const typeScaleTokens = typographyTokens.getTypScaleTokens(params.typeScale);\n    const collectionName = 'Type Face';\n    // const collection = await findFigmaVariableCollectionByName(collectionName);\n\n    addToGlobalTokensDictionary(tokens);\n\n    await importVariables({\n        collectionName: collectionName,\n        modeName: typographyTokens.typeFace[\"font-family\"].$value || \"Default\",\n        data: typographyTokens.typeFace\n    });\n\n    await importSizeTokens({\n        type: 'typeScale',\n        collectionName: \"Type Scale\",\n        params: params,\n        defaultMode: params.baseFontSize,\n        defaultOrder: typographySizeName,\n        tokens: typeScaleTokens\n    });\n    await importTextStyles(tokens);\n}\n\nexport interface DesignTokensRaw {\n    [key: string]: DesignTokensRaw | DesignToken\n}\n\ninterface DesignTokenBase {\n    $type: string;\n    name?: string;\n    private?: boolean;\n    scopes?: string[];\n    description?: string;\n    documentationLink?: DocumentationLink;\n    adjustments?: any;\n}\n\nexport type DesignToken = StringDesignToken | NumberDesignToken | ColorDesignToken | EffectDesignToken | TypographtDesignToken | BooleanDesignToken;\n\nexport interface BooleanDesignToken extends DesignTokenBase {\n    $type: 'boolean';\n    $value: boolean;\n}\n\nexport interface ColorDesignToken extends DesignTokenBase {\n    $type: 'color';\n    $value: string;\n}\n\nexport interface NumberDesignToken extends DesignTokenBase {\n    $type: 'number';\n    $value: number;\n}\n\nexport interface StringDesignToken extends DesignTokenBase {\n    $type: 'string';\n    $value: string;\n}\n\nexport interface TypographtDesignToken extends DesignTokenBase {\n    $type: 'typography';\n    $value: TypographyTokenValue;\n}\n\nexport interface TypographyTokenValue {\n    \"fontFamily\": string,\n    \"lineHeight\": string|number,\n    \"fontSize\": number,\n    \"letterSpacing\": string|number,\n    \"paragraphSpacing\": number,\n    \"listSpacing\"?: number,\n    \"fontStyle\": string,\n    \"textCase\": string,\n    \"textDecoration\": string,\n}\n\nexport interface EffectDesignToken extends DesignTokenBase {\n    $type: 'effect';\n    $value: EffectTokenValue[];\n}\n\nexport interface EffectTokenValue {\n    \"color\"?: string,\n    \"showShadowBehindNode\"?: boolean,\n    \"blendMode\"?: BlendMode,\n    \"type\": 'LAYER_BLUR' | 'BACKGROUND_BLUR' | 'DROP_SHADOW' | 'INNER_SHADOW',\n    \"offsetX\"?: number,\n    \"offsetY\"?: number,\n    \"radius\": number,\n    \"spread\"?: number,\n}\n\nasync function processToken({\n    collection,\n    modeId,\n    type,\n    variableName,\n    token,\n    overrideValues\n}) {\n    type = type || token.$type;\n    // if key is a meta field, move on\n    if (variableName.charAt(0) === \"$\") {\n        return;\n    }\n\n    let valueString = `${token.$value}`\n\n    if (token.$value !== undefined) {\n        if (type === \"color\") {\n            return await setFigmaVariable(\n                collection,\n                modeId,\n                \"COLOR\",\n                variableName,\n                await getColorTokenValue(token, modeId),\n                token.scopes || ['ALL_SCOPES'],\n                token.description || null\n            );\n        }\n\n        if (type === \"number\") {\n            let resolvedValue = await resolveAliasOrValue(valueString, getGlobalTokensDictionary());\n            let numValue = typeof resolvedValue == 'string' ? parseFloat(resolvedValue) : resolvedValue;\n\n            return await setFigmaVariable(\n                collection,\n                modeId,\n                \"FLOAT\",\n                variableName,\n                numValue,\n                token.scopes,\n                token.description || null\n            );\n        }\n\n        if (type === \"string\") {\n            return await setFigmaVariable(\n                collection,\n                modeId,\n                \"STRING\",\n                variableName,\n                await resolveAliasOrValue(valueString, getGlobalTokensDictionary()),\n                token.scopes,\n                token.description || null\n            ).catch(function(err) {\n                console.log(err.message); // some coding error in handling happened\n            }); \n        }\n\n        console.error(\"unsupported type\", type, token);\n\n    } else {\n        console.warn('recursion in ', token);\n    }\n}","/**\n * Simple object check.\n * @param item\n * @returns {boolean}\n */\nfunction isObject(item): boolean {\n  return (item && typeof item === 'object' && !Array.isArray(item));\n}\n\n/**\n * Deep merge two objects.\n * @param target\n * @param ...sources\n */\nexport function _mergeDeep(target: object, ...sources): object {\n  if (!sources.length) return target;\n  const source = sources.shift();\n\n  if (isObject(target) && isObject(source)) {\n    for (const key in source) {\n      if (isObject(source[key])) {\n        if (!target[key]) Object.assign(target, { [key]: {} });\n        _mergeDeep(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n\n  return _mergeDeep(target, ...sources);\n}","import componentTokens from './tokens/colors/components/component-tokens.json';\n\nimport paletteLightCommon from './tokens/colors/system/light-common.tokens.json';\nimport paletteLightShadows from './tokens/colors/system/light-shadow-colors.tokens.json';\n\nimport paletteLight2 from './tokens/colors/system/light-2.tokens.json';\nimport paletteLight3 from './tokens/colors/system/light-3.tokens.json';\nimport paletteLight4 from './tokens/colors/system/light-4.tokens.json';\n\nimport paletteDarkCommon from './tokens/colors/system/dark-common.tokens.json';\nimport paletteDarkShadows from './tokens/colors/system/dark-shadow-colors.tokens.json';\n\nimport paletteDarkElevated2 from './tokens/colors/system/dark-elevated-2.tokens.json';\nimport paletteDarkElevated3 from './tokens/colors/system/dark-elevated-3.tokens.json';\nimport paletteDarkElevated4 from './tokens/colors/system/dark-elevated-4.tokens.json';\n\nimport paletteDarkBase2 from './tokens/colors/system/dark-base-2.tokens.json';\nimport paletteDarkBase3 from './tokens/colors/system/dark-base-3.tokens.json';\nimport paletteDarkBase4 from './tokens/colors/system/dark-base-4.tokens.json';\n\nimport { flattenObject } from './utils/flatten-object';\nimport { generateSystemAccentPalette } from './color-generators/accent-palette-generator';\nimport { generateNeutrals } from './color-generators/neutrals-palette-generator';\nimport { ImportFormData, SemanticAccentColors } from './import-ui';\nimport { collectionNames, defaultSemanticAccents, defaultSettings } from './defaults';\nimport { _clone } from './utils/clone';\nimport { addToGlobalTokensDictionary, findTokenReferences, findVariableAlias, getGlobalTokensDictionary, getReferenceName, resolveGlobalTokenValue } from './utils/token-references';\nimport { convertFigmaColorToRgb, parseColorValue } from './utils/figma-colors';\nimport { ColorDesignToken, DesignToken, DesignTokensRaw, importVariables } from './import-tokens';\n\nimport { _mergeDeep } from './utils/merge-deep';\nimport { figmaAliasToDesignTokens, findFigmaVariableCollectionByName, getDefaultVariableValue, setFigmaVariable } from './utils/figma-variables';\nimport { getColorTokensSortFn } from './utils/sort-tokens';\nimport chroma from 'chroma-js';\nimport { roundTwoDigits } from './utils/round-decimals';\n\n// const _merge = require('lodash.merge')\n\nlet GlobalNeutrals;\nlet ColorSystemVersion;\n\nexport interface SystemColorPalette {\n    primary: ColorRamp;\n    fill: BaseColorTypes;\n    stroke: BaseColorTypes;\n    text: TextColorTypes;\n    info: ColorRamp;\n    success: ColorRamp;\n    warning: ColorRamp;\n    danger: ColorRamp;\n    alt: BaseColorTypes;\n    utility: UtyilityColors;\n    accent: SystemAccentList;\n}\n\nexport interface TextColorTypes {\n    base: TextColors;\n    contrast: TextColors;\n}\n\nexport interface BaseColorTypes {\n    base: ColorRamp;\n    contrast: ColorRamp;\n}\n\nexport interface UtyilityColors {\n    white: DesignToken;\n    black: DesignToken;\n    transparent: DesignToken;\n    tint: ColorRamp;\n    shade: ColorRamp;\n}\n\nexport interface TextColors {\n    600: DesignToken;\n    500: DesignToken;\n    400: DesignToken;\n    action: DesignToken;\n    info: DesignToken;\n    success: DesignToken;\n    warning: DesignToken;\n    danger: DesignToken;\n}\n\nexport interface SystemAccentList {\n    red: ColorRamp;\n    amber: ColorRamp;\n    brown: ColorRamp;\n    green: ColorRamp;\n    teal: ColorRamp;\n    blue: ColorRamp;\n    indigo: ColorRamp;\n    violet: ColorRamp;\n    purple: ColorRamp;\n    pink: ColorRamp;\n}\n\nexport interface ColorRamp {\n    \"100\": ColorDesignToken;\n    \"200\": ColorDesignToken;\n    \"300\": ColorDesignToken;\n    \"400\": ColorDesignToken;\n    \"500\": ColorDesignToken;\n    \"600\": ColorDesignToken;\n}\n\nexport function getSemanticAccentSettings(): SemanticAccentColors {\n    return defaultSemanticAccents;\n}\n\nexport function getGlobalNeutrals(params?: ImportFormData): DesignTokensRaw {\n    if (params) {\n        GlobalNeutrals = generateNeutrals(params)\n    }\n    return GlobalNeutrals;\n}\n\nexport function getComponentColors() {\n    return flattenObject(componentTokens);\n}\n\nexport function getBrandColors(name, accentShades, flat?: boolean) {\n    const palette = {\n        primary: generateSemanticShades(name, accentShades)\n    };\n    return flat ? flattenObject(palette) : palette;\n}\n\nexport type SourceColorTheme = 'lightBase' | 'darkBase' | 'darkElevated';\n\nfunction getTextOnAccentColors(formData: ImportFormData): DesignTokensRaw {\n    const primaryHUE = formData[formData.primary];\n    const systemAccentColor = chroma.hsl(primaryHUE, formData.accentSaturation, 0.5).luminance(formData.accentMidLuminance);\n    const whiteTextColor = chroma.hsl(formData.hue, formData.saturation, formData.textWhiteBrightness / 100);\n    const blackTextColor = chroma.hsl(formData.hue, formData.saturation, formData.textBlackBrightness / 100);\n    const whiteTextContrast = roundTwoDigits(chroma.contrast(whiteTextColor, systemAccentColor));\n    const blackTextContrast = roundTwoDigits(chroma.contrast(blackTextColor, systemAccentColor));\n\n    let finalColor = formData.accentTextColor;\n\n    if (finalColor == 'auto') {\n        finalColor = whiteTextContrast < 3 ? 'black' : 'white';\n    }\n    return {\n        \"text\": {\n            \"accent\": {\n                \"400\": {\n                    \"$value\": `{text.${finalColor}.400}`,\n                    \"$type\": \"color\"\n                },\n                \"500\": {\n                    \"$value\": `{text.${finalColor}.500}`,\n                    \"$type\": \"color\"\n                },\n                \"600\": {\n                    \"$value\": `{text.${finalColor}.600}`,\n                    \"$type\": \"color\"\n                }\n            }\n        }\n    }   \n    return {\n        \"text\": {\n            \"accent\": {\n                \"400\": {\n                    \"$value\": `{text.${finalColor}.400}`,\n                    \"$type\": \"color\",\n                    \"adjustments\": {\n                        \"h\": primaryHUE,\n                        \"s\": \"0.9\"\n                    }\n                },\n                \"500\": {\n                    \"$value\": `{text.${finalColor}.500}`,\n                    \"$type\": \"color\",\n                    \"adjustments\": {\n                        \"h\": primaryHUE,\n                        \"s\": \"0.9\"\n                    }\n                },\n                \"600\": {\n                    \"$value\": `{text.${finalColor}.600}`,\n                    \"$type\": \"color\",\n                    \"adjustments\": {\n                        \"h\": primaryHUE,\n                        \"s\": \"0.9\"\n                    }\n                }\n            }\n        }\n    }\n}\n\nfunction processCommonColors(formData: ImportFormData, tokens) {\n    let textSaturationAdjustments = {};\n    let textColors = getTextOnAccentColors(formData)\n\n    if(ColorSystemVersion == 1) {\n        textColors = null\n    }\n\n    if (formData.customAccentTextSaturation === true) {\n        textSaturationAdjustments = {\n            s: formData.accentTextSaturation\n        }\n    }\n    const extension = {\n        \"text\": {\n            \"base\": {\n                \"primary\": {\n                    \"adjustments\": textSaturationAdjustments\n                },\n                \"info\": {\n                    \"adjustments\": textSaturationAdjustments\n                },\n                \"success\": {\n                    \"adjustments\": textSaturationAdjustments\n                },\n                \"warning\": {\n                    \"adjustments\": textSaturationAdjustments\n                },\n                \"danger\": {\n                    \"adjustments\": textSaturationAdjustments\n                }\n            },\n            \"contrast\": {\n                \"primary\": {\n                    \"adjustments\": textSaturationAdjustments\n                },\n                \"info\": {\n                    \"adjustments\": textSaturationAdjustments\n                },\n                \"success\": {\n                    \"adjustments\": textSaturationAdjustments\n                },\n                \"warning\": {\n                    \"adjustments\": textSaturationAdjustments\n                },\n                \"danger\": {\n                    \"adjustments\": textSaturationAdjustments\n                }\n            }\n        }\n    }\n\n    tokens = _mergeDeep(_clone(tokens), textColors)\n    return _mergeDeep(tokens, extension);\n}\n\nexport function getThemeColors(theme: SourceColorTheme, formData: ImportFormData): DesignTokensRaw {\n\n    let lightCommon = processCommonColors(formData, paletteLightCommon) as SystemColorPalette;\n    let darkCommon = processCommonColors(formData, paletteDarkCommon) as SystemColorPalette;\n\n    let params = {\n        ...normalizeFormData(formData)\n    }\n\n    getGlobalNeutrals(formData);\n\n    const semanticAccents: SemanticAccentColors = {\n        primary: params.primary,\n        info: params.info,\n        success: params.success,\n        warning: params.warning,\n        danger: params.danger,\n    };\n\n    let lightAccentTokens = generateSystemAccentPalette('light', params);\n    let darkAccentTokens = generateSystemAccentPalette('dark', params);\n\n    const lightSemanticTokens = generateSemanticPalette(semanticAccents, lightAccentTokens);\n    const darkSemanticTokens = generateSemanticPalette(semanticAccents, darkAccentTokens);\n\n    const lightCommonTokens = {\n        accent: lightAccentTokens,\n        ...lightCommon,\n        ...getShadowColorTokens('light', formData),\n        ...lightSemanticTokens,\n    } as SystemColorPalette;\n\n    const darkCommonTokens = {\n        accent: darkAccentTokens,\n        ...darkCommon,\n        ...getShadowColorTokens('dark', formData),\n        ...darkSemanticTokens\n    } as SystemColorPalette;\n\n    let commonColors = {};\n    let themeColors = {};\n\n    if (theme === \"lightBase\") {\n        commonColors = flattenObject(lightCommonTokens);\n\n        if (params.distance === 0.02) {\n            themeColors = flattenObject(paletteLight2)\n        }\n        if (params.distance === 0.03) {\n            themeColors = flattenObject(paletteLight3)\n        }\n        if (params.distance === 0.04) {\n            themeColors = flattenObject(paletteLight4)\n        }\n    }\n    if (theme === \"darkElevated\") {\n        commonColors = flattenObject(darkCommonTokens);\n        if (params.distance === 0.02) {\n            themeColors = flattenObject(paletteDarkElevated2)\n        }\n        if (params.distance === 0.03) {\n            themeColors = flattenObject(paletteDarkElevated3)\n        }\n        if (params.distance === 0.04) {\n            themeColors = flattenObject(paletteDarkElevated4)\n        }\n    }\n    if (theme === \"darkBase\") {\n        commonColors = flattenObject(darkCommonTokens);\n        if (params.distance === 0.02) {\n            themeColors = flattenObject(paletteDarkBase2);\n        }\n        if (params.distance === 0.03) {\n            themeColors = flattenObject(paletteDarkBase3);\n        }\n        if (params.distance === 0.04) {\n            themeColors = flattenObject(paletteDarkBase4);\n        }\n    }\n\n    return {\n        ...commonColors,\n        ...themeColors\n    }\n}\n\nfunction generateSemanticShades(aliasName, accentShades): ColorRamp {\n    let output = {};\n\n    for (var a = 1, b = 7; a < b; a++) {\n        output[`${a}00`] = {\n            \"$value\": `{accent.${aliasName}.${a}00}`,\n            \"$type\": \"color\",\n            \"description\": accentShades[`${a}00`].description\n        }\n    }\n\n    return output as ColorRamp;\n}\n\nfunction generateSemanticPalette(accents: SemanticAccentColors, palette) {\n    let result = {};\n    Object.entries(accents).forEach(([name, alias]) => {\n        result[name] = generateSemanticShades(alias, palette[alias]);\n    });\n\n    return result;\n}\n\nfunction normalizeFormData(formData: ImportFormData): ImportFormData {\n    let normalizedData: ImportFormData = _clone(formData);\n    const numberTypes = [\n        'hue',\n        'saturation',\n        'distance',\n        'red',\n        'amber',\n        'brown',\n        'green',\n        'teal',\n        'blue',\n        'indigo',\n        'violet',\n        'purple',\n        'pink',\n        'accentSaturation',\n        'accentMaxLuminance',\n        'accentMidLuminance',\n        'accentMinLuminance',\n        'accentTextSaturation',\n        'textWhiteBrightness',\n        'textBlackBrightness',\n    ]\n\n    numberTypes.forEach(p => {\n        if (typeof formData[p] == 'string') {\n            normalizedData[p] = parseFloat(formData[p]);\n        }\n    });\n\n    return normalizedData;\n}\n\nasync function getColorVariableAliasValue(tokenValue: string, variableId: string, modeId: string) {\n    const figmaVariable = await figma.variables.getVariableByIdAsync(variableId);\n    let result;\n\n    if (figmaVariable.resolvedType != \"COLOR\") {\n        throw (`Variable ${figmaVariable.name} is not a color, it is ${figmaVariable.resolvedType}`)\n    }\n\n    const defaultValueRGBA: VariableValue = await getDefaultVariableValue(figmaVariable, modeId);\n    result = convertFigmaColorToRgb(defaultValueRGBA as RGBA, 'hex');\n\n\n    if (typeof tokenValue == 'string' && tokenValue.indexOf('rgb') >= 0) {\n        const references = findTokenReferences(tokenValue).length;\n        const alias = `{${figmaAliasToDesignTokens(figmaVariable.name)}}`;\n        const newValue = tokenValue.replace(alias, result);\n        result = parseColorValue(newValue).gl;\n\n        return result;\n    }\n\n    return result;\n}\n\nexport function resolveColorTokenValue(token: DesignToken, dictionary, output = 'gl') {\n    const color = token.$value as string;\n\n    const colorValue = resolveGlobalTokenValue(color.trim(), dictionary);\n\n    const result = colorValue ? parseColorValue(colorValue, token.adjustments) : null;\n\n    if (result) {\n        return result[output];\n    }\n    else {\n        console.warn(`Cannot resolve value for ${token.name}`);\n        //throw new Error(\"Invalid color format\");\n    }\n}\n\nexport async function getColorTokenValue(token: DesignToken, modeId: string): Promise<VariableAlias | RGBA | string> {\n    let valueString = (`${token.$value}`).trim()\n    const variableAlias = await findVariableAlias(valueString);\n    const rawValue = resolveColorTokenValue(token, getGlobalTokensDictionary());\n\n    if (token.$type != \"color\") {\n        return\n    }\n\n    const hasAdjustments = typeof token.adjustments == 'object' && Object.keys(token.adjustments).length > 0;\n\n    if (hasAdjustments && rawValue) {\n        return rawValue\n    }\n\n    if (variableAlias && typeof variableAlias == 'object') {\n\n        if (typeof token.$value == 'string' && token.$value.indexOf('rgb') >= 0) {\n            let parsedValue = await getColorVariableAliasValue(token.$value, variableAlias.id, modeId);\n            const references = findTokenReferences(token.$value).length;\n            if (!rawValue && parsedValue && references) {\n                return parsedValue;\n            }\n        }\n        return variableAlias;\n\n    }\n\n    if (rawValue) {\n        return rawValue;\n    }\n}\n\nexport async function upgradeTextPalette(params: ImportFormData) {\n    const baseTextColorTokens = [\n        \"text/contrast/600\",\n        \"text/contrast/500\",\n        \"text/contrast/400\"\n    ]\n\n    const brandTextColorTokens = [\n        \"text/base/action\",\n        \"text/contrast/action\"\n    ]\n\n    const targetTokens = [\n        \"text/accent/600\",\n        \"text/accent/500\",\n        \"text/accent/400\"\n    ]\n\n    const figmaVariables = await figma.variables.getLocalVariablesAsync();\n\n    const accentColorVariable = figmaVariables.find((variable) => {\n        return targetTokens.indexOf(variable.name) >= 0\n    });\n    const baseColorVariables = figmaVariables.filter((variable) => {\n        return baseTextColorTokens.indexOf(variable.name) >= 0\n    });\n    const brandColorVariables = figmaVariables.filter((variable) => {\n        return brandTextColorTokens.indexOf(variable.name) >= 0\n    });\n\n    if (!accentColorVariable) {\n        baseColorVariables.forEach(variable => {\n            variable.name = variable.name.replace('contrast', 'accent');\n        });\n    }\n\n    brandColorVariables.forEach(variable => {\n        variable.name = variable.name.replace('action', 'primary');\n    });\n\n    addToGlobalTokensDictionary({\n        ...getGlobalNeutrals(params)\n    });\n\n    const paletteTextDark = flattenObject({\n        text: _clone(paletteDarkCommon.text)\n    });\n    const paletteTextLight = flattenObject({\n        text: _clone(paletteLightCommon.text)\n    });\n\n    /*\n        Extend existing collection with new variables \n        Otherwise it wont be able to resolve variable aliases\n    */\n    const collectionName = collectionNames.get('themeColors');\n    const collection = await findFigmaVariableCollectionByName(collectionName);\n    const mode = collection.modes[0];\n    \n        for (const tokenName in paletteTextLight){\n        await setFigmaVariable(collection, mode.modeId, 'COLOR', tokenName)\n    }\n    /* */\n    \n    await importVariables({\n        collectionName: collectionName,\n        modeName: 'Light Base',\n        sortFn: getColorTokensSortFn(),\n        data: paletteTextLight\n    });\n    await importVariables({\n        collectionName: collectionName,\n        modeName: 'Dark Base',\n        sortFn: getColorTokensSortFn(),\n        data: paletteTextDark\n    });\n    await importVariables({\n        collectionName: collectionName,\n        modeName: 'Dark Elevated',\n        sortFn: getColorTokensSortFn(),\n        data: paletteTextDark\n    });\n\n    ColorSystemVersion = 2;\n}\n\n\n\nexport async function getColorSystemVersion(refresh=false): Promise<number> {\n    if(ColorSystemVersion != undefined && !refresh) {\n        return ColorSystemVersion;\n    }\n\n    const variables = await figma.variables.getLocalVariablesAsync();\n    const textOnAccentVar = variables.find(variable => variable.name.startsWith('text/accent'));\n    const textOnContrastVar = variables.find(variable => variable.name.startsWith('text/contrast'));\n\n    if (variables.length == 0) {\n        ColorSystemVersion = 0;\n    }\n\n    if (textOnAccentVar && textOnContrastVar) {\n        ColorSystemVersion = 2;\n    }\n    else if (!textOnAccentVar && textOnContrastVar) {\n        ColorSystemVersion = 1;\n    }\n    else if(!textOnAccentVar && !textOnContrastVar) {\n        ColorSystemVersion = 0;\n    }\n\n    return ColorSystemVersion;\n}\n\nfunction isAlias(value) {\n    try {\n        return value.toString().trim().charAt(0) === \"{\";\n    }\n    catch (e) {\n        debugger\n    }\n}\nexport function processColorTokenCSSValue(token: ColorDesignToken, globalNeutrals: DesignTokensRaw) {\n    let value = token.$value as string;\n\n    value = resolveColorTokenValue(token as DesignToken, globalNeutrals, 'hsl');\n\n    const hasAdjustments = typeof token.adjustments == 'object' && Object.keys(token.adjustments).length > 0;\n\n    if (hasAdjustments) {\n        return value\n    }\n\n    if (isAlias(token.$value) && !token.$value.includes('rgb') && !token.$value.includes('hsl')) {\n        const aliasName = getReferenceName(token.$value as string);\n        value = `var(--${aliasName.replace(/\\./g, \"-\")})`;\n    }\n\n    return value\n}\n\nconst shadowColours = {\n    light: paletteLightShadows,\n    dark: paletteDarkShadows,\n}\nexport function getShadowColorTokens(theme: 'light' | 'dark', params: ImportFormData): DesignTokensRaw {\n    const tokenOptions = shadowColours[theme || 'light'];\n    if (params.shadowsColor == undefined) {\n        params.shadowsColor = defaultSettings.shadowsColor;\n    }\n    return flattenObject(tokenOptions[params.shadowsColor]);\n}","import { ImportFormData } from \"../import-ui\";\nimport { generateGlobalAccentPalette } from \"./accent-palette-generator\";\nimport { renderShades } from \"./swatches-generator\";\n\n\nexport function renderAccents(params: ImportFormData, name?): FrameNode {\n\n    const colors = generateGlobalAccentPalette(params);\n    const existingNode = figma.currentPage.findChild((node) => node.name == (name || 'Accent Colours'));\n    existingNode?.remove();\n\n    let frame = figma.createFrame();\n    frame.layoutMode = 'HORIZONTAL';\n    frame.counterAxisSizingMode = \"AUTO\";\n    frame.primaryAxisSizingMode = \"AUTO\";\n    frame.itemSpacing = 16;\n    frame.fills = [];\n\n    frame.name = name || 'Accent Colours'\n\n    frame.x = 0;\n    frame.y = 0;\n\n    for (const [name, shades] of Object.entries(colors)) {\n        renderShades(frame, name, shades, colors)\n    }\n\n    return frame;\n}\n\n","import brandVariantTemplate from \"./utils/brand-variant-template.json\";\n\nimport { ImportFormData } from \"./import-ui\";\nimport { DesignToken, DesignTokensRaw, getCollectionAndPrepareTokens, importVariables } from \"./import-tokens\";\nimport { ColorFormat, convertFigmaColorToRgb } from \"./utils/figma-colors\";\nimport { convertFigmaEffectStyleToToken, importEffectStyles } from \"./utils/figma-effect-styles\";\nimport { convertFigmaTextStyleToToken, importTextStyles } from \"./utils/figma-text-styles\";\nimport { flattenObject } from \"./utils/flatten-object\";\n\nimport { figmaAliasToDesignTokens, getAliasName, variableNameToObject } from \"./utils/figma-variables\";\nimport { delayAsync } from \"./utils/delay-async\";\nimport { addToGlobalTokensDictionary, findTokenReferences, getReferenceName } from \"./utils/token-references\";\nimport { _clone } from \"./utils/clone\";\nimport { collectionNames } from \"./defaults\";\nimport { toCamelCase } from \"./utils/text-to-title-case\";\nimport { getAlphaNumTokensSortFn, getColorTokensSortFn, getSizeTokensSortFn } from \"./utils/sort-tokens\";\nimport { ExportEventParameters } from \"./main\";\nimport { BrandCollection } from \"./brand-tokens\";\n\n\n\nfunction makeBrandVariantRecord(name: string): CollectionExportRecord {\n    const brandVariantRecord: CollectionExportRecord = _clone(brandVariantTemplate) as CollectionExportRecord\n\n    brandVariantRecord.collection = \"Brand Variant\";\n    brandVariantRecord.mode = toCamelCase(name);\n    brandVariantRecord.tokens = {\n        theme: {},\n        brand: {},\n        component: {},\n    }\n\n    return brandVariantRecord;\n}\n\nfunction exportBrandThemeTokens(key: 'theme'|'brand'|'component', brandVariantRecord: CollectionExportRecord, exportedData: CollectionExportRecord[]) {\n    let brandTokens = brandVariantRecord.tokens[key];\n\n    exportedData.forEach(record => {\n        const modeName = toCamelCase(record.mode);\n        const tokens = record.tokens as DesignTokensRaw;\n        const data: DesignTokensRaw = {};\n\n        Object.entries(tokens).forEach(([tokenName, tokenData]) => {\n            let token: DesignToken = variableNameToObject({ name: tokenName, targetObject: data });\n            const value = tokenData.$value.toString();\n            let references = findTokenReferences(value) || [];\n\n            const newValue = references.map(alias => {\n                return `{${key}.${modeName}.${getReferenceName(alias)}}`\n            }).join(' ')\n\n            Object.assign(token, tokenData, {\n                $value: newValue || value,\n                scopes: [], // i want these to stay private\n            })\n        })\n\n        brandTokens[modeName] = data as DesignTokensRaw;\n    })\n\n    return brandVariantRecord;\n}\n\nfunction remapPrimaryVariables(exportedData: CollectionExportRecord[], getPath: Function ): CollectionExportRecord[] {\n    const exportData = exportedData.map(record => {\n\n        const modeName = record.mode;\n        const tokens = record.tokens as DesignTokensRaw\n        const data: DesignTokensRaw = {};\n        Object.entries(tokens).forEach(([tokenName, tokenData]) => {\n            \n            let token = variableNameToObject({ name: tokenName, targetObject: data });\n            const name = figmaAliasToDesignTokens(getReferenceName(tokenName));\n            const path = getPath(modeName);\n            token = Object.assign(token, tokenData, {\n                $value: `{${path}.${name}}`\n            });\n\n        })\n        record.tokens = data;\n\n        return record;\n    })\n\n    return exportData;\n}\n\nexport async function exportToJSON(exportParams: ExportEventParameters, formData: ImportFormData): Promise<CollectionExportRecord[]> {\n    const collections: VariableCollection[] = await figma.variables.getLocalVariableCollectionsAsync();\n    const files: CollectionExportRecord[] = [];\n\n    for (const collection of collections) {\n        const exportedData = await exportFigmaVariableCollection(collection, exportParams.jsonColorFormat);\n\n        exportedData.forEach(record => {\n            const tokens = record.tokens;\n            const data: DesignTokensRaw = expandTokenNameToObject(tokens);\n            record.tokens = data;\n        })\n        files.push(...exportedData)\n\n    }\n\n    const textStyles: TextStyle[] = await figma.getLocalTextStylesAsync();\n    const effectStyles: EffectStyle[] = await figma.getLocalEffectStylesAsync();\n\n    const exportedTextStyles = await exportTextStyles(textStyles);\n    const exportedEffectStyles = await exportEffectStyles(effectStyles, exportParams.jsonColorFormat);\n\n    exportedTextStyles && files.push(exportedTextStyles);\n    exportedEffectStyles && files.push(exportedEffectStyles);\n\n    return files;\n}\n\nexport async function exportBrandVariantToJSON(params: ExportEventParameters, formData: ImportFormData): Promise<CollectionExportRecord[]> {\n    const collections: VariableCollection[] = await figma.variables.getLocalVariableCollectionsAsync();\n    const brandModeName = formData.primary;\n    let brandVariantCollection = makeBrandVariantRecord(brandModeName);\n    const files: CollectionExportRecord[] = [brandVariantCollection];\n\n\n    for (const collection of collections) {\n        const exportedCollectionData = await exportFigmaVariableCollection(collection, params.brandColorFormat);\n\n        if (params.createColorTokens && collection.name == collectionNames.get(\"themeColors\")) {\n\n            brandVariantCollection = exportBrandThemeTokens(\"theme\", brandVariantCollection, exportedCollectionData)\n            brandVariantCollection.tokens.theme[\"color\"] = {\n                \"$type\": \"string\",\n                \"scopes\": [\n                    \"ALL_SCOPES\"\n                ],\n                \"$value\": toCamelCase(brandModeName)\n            };\n            \n            files.push(...remapPrimaryVariables(exportedCollectionData, (modeName) => {\n                return `theme.${toCamelCase(modeName)}`\n            }))\n        }\n\n        \n        if (params.createComponentTokens && collection.name == collectionNames.get(\"componentColors\")) {\n            importBrandSpecificTokens(collection, 'component', exportedCollectionData, files, brandVariantCollection);\n        }\n\n        const isBrandSpecificCollection = (collection) => {\n            return collection.name == collectionNames.get(\"typeFace\") || \n                   collection.name == collectionNames.get(\"typeScale\") ||\n                   collection.name == collectionNames.get(\"radii\") || \n                   collection.name == collectionNames.get(\"spacing\");\n        }\n\n        if (params.createTypographyTokens && isBrandSpecificCollection(collection)) {\n            importBrandSpecificTokens(collection, 'brand', exportedCollectionData, files, brandVariantCollection);\n        }\n\n    }\n\n    return files;\n}\n\n\nexport interface CollectionExportRecord {\n    type: \"variables\" | \"textStyles\" | \"effectStyles\",\n    collection: string,\n    mode: string,\n    tokens: BrandCollection | DesignTokensRaw\n}\n\nfunction expandTokenNameToObject(tokens) {\n    const data: DesignTokensRaw = {};\n    Object.entries(tokens).forEach(([tokenName, tokenData]) => {\n        let token = variableNameToObject({ name: tokenName, targetObject: data });\n        Object.assign(token, tokenData)\n    })\n\n    return data;\n}\n\nfunction importBrandSpecificTokens(collection: VariableCollection, targetKey: \"brand\"|\"theme\"|\"component\", exportedCollectionData: CollectionExportRecord[], files: CollectionExportRecord[], brandVariantCollection: CollectionExportRecord) {\n    const defaultModeId = collection.defaultModeId;\n    const defaulttMode = collection.modes.find(mode => mode.modeId === defaultModeId);\n    const exportData = exportedCollectionData.find(record => record.mode === defaulttMode.name);\n\n    const data: DesignTokensRaw = expandTokenNameToObject(exportData.tokens);\n\n    brandVariantCollection.tokens[targetKey] = Object.assign(brandVariantCollection.tokens[targetKey], data);\n\n    files.push(...remapPrimaryVariables([exportData], (modeName) => {\n        return `${targetKey}`\n    }))\n\n    return brandVariantCollection;\n}\n\nasync function getTokenValueFromVariable(value: VariableValue, variable: Variable, colorFormat: ColorFormat): Promise<string> {\n    const type = value['type'];\n\n    if (type === \"VARIABLE_ALIAS\") {\n        const alias = await getAliasName(value['id'])\n        return alias;\n    }\n\n    if (variable.resolvedType == \"COLOR\") {\n        return convertFigmaColorToRgb(value as RGBA, colorFormat)\n    }\n\n    return `${value}`;\n}\n\nasync function exportFigmaVariableCollection(collection: VariableCollection, colorFormat: ColorFormat = \"hsl\") {\n    const collections: CollectionExportRecord[] = [];\n    const variableReferences = collection.variableIds.sort();\n\n    const typeNames = new Map<string, 'boolean' |'color' |'number' |'string' |'typography' |'effect'>([\n        [\"COLOR\", \"color\"],\n        [\"BOOLEAN\", \"boolean\"],\n        [\"FLOAT\", \"number\"],\n        [\"STRING\", \"string\"]\n    ]);\n\n    for (const mode of collection.modes) {\n        const collectionRecord = {\n            type: \"variables\",\n            collection: collection.name,\n            mode: mode.name,\n            tokens: {}\n        } as CollectionExportRecord;\n\n        for (const variableId of variableReferences) {\n            const figmaVariable = await figma.variables.getVariableByIdAsync(variableId);\n            const {\n                name,\n                resolvedType,\n                scopes,\n                valuesByMode\n            } = figmaVariable;\n\n            console.log(name);\n\n            const value = valuesByMode[mode.modeId] as any;\n            // const valueObject = variableNameToObject(name, collectionRecord.tokens);\n\n            const token = {\n                $type: typeNames.get(resolvedType),\n                $value: await getTokenValueFromVariable(value, figmaVariable, colorFormat),\n                scopes: scopes,\n                description: figmaVariable.description || \"\"\n\n            }\n            collectionRecord.tokens[name] = token;\n        };\n        collections.push(collectionRecord);\n    };\n    return collections;\n}\n\n\nasync function exportTextStyles(styles: TextStyle[]) {\n\n    if (styles.length == 0) {\n        return null;\n    }\n\n    const collection = {\n        type: \"textStyles\",\n        collection: \"Text Styles\",\n        mode: \"default\",\n        tokens: {}\n    } as CollectionExportRecord;\n\n    for (const style of styles) {\n        const name = style.name;\n        let token: DesignToken = variableNameToObject({ name, targetObject: collection.tokens });\n\n        Object.assign(token, {\n            $value: await convertFigmaTextStyleToToken(style),\n            $type: \"typography\",\n        })\n    }\n\n    return collection;\n}\n\nasync function exportEffectStyles(styles: EffectStyle[], colorFormat?: ColorFormat) {\n    if (styles.length == 0) {\n        return null;\n    }\n\n    const collection = {\n        type: \"effectStyles\",\n        collection: \"Effect Styles\",\n        mode: \"default\",\n        tokens: {}\n    } as CollectionExportRecord;\n\n    for (const style of styles) {\n        const name = style.name;\n        let token = variableNameToObject({ name, targetObject: collection.tokens });\n        Object.assign(token, {\n            $value: await convertFigmaEffectStyleToToken(style, colorFormat),\n            $type: \"effect\",\n            description: style.description || \"\"\n        })\n    }\n\n    return collection;\n}\n\nexport async function importFromJSON(data: CollectionExportRecord[], params: ImportFormData) {\n    const collections = []; // unique set of collections to import\n\n    const uniqueCollections = data.filter(record => {\n        const collectionName = record.collection;\n        \n        // get unique collection list\n        if (!collections.includes(collectionName)) {\n            collections.push(collectionName);\n            return true;\n        }\n\n        return false;\n    })\n\n    let tokensDictionary = {};\n\n    // iterate each collection, ignore additional modes and make a dictionary\n    uniqueCollections.forEach(collectionRecord => {\n        const flatTokens = flattenObject(collectionRecord.tokens);\n        tokensDictionary = {\n            ...tokensDictionary,\n            ...flatTokens\n        }\n    })\n\n    addToGlobalTokensDictionary(tokensDictionary);\n\n    while (uniqueCollections.length) {\n        const collectionRecord = uniqueCollections.shift();\n\n        if (collectionRecord.type == \"variables\") {\n            await getCollectionAndPrepareTokens({\n                collectionName: collectionRecord.collection,\n                modeName: collectionRecord.mode,\n                data: flattenObject(collectionRecord.tokens),\n                sortFn: getSortFnByCollectionName(collectionRecord.collection)\n            });\n            await delayAsync(5);\n        }\n    }\n\n    debugger\n\n    // calculate tokens count\n    let tokensCountTotal = 0;\n    let tokensImportedCount = 0;\n\n    data.forEach(collectionRecord => {\n        const flatTokens = flattenObject(collectionRecord.tokens);\n        tokensCountTotal += Object.keys(flatTokens).length;\n    })\n\n\n    while (data.length) {\n        const collectionRecord = data.shift();\n        const flatTokens = flattenObject(collectionRecord.tokens);\n\n        if (collectionRecord.type == \"variables\") {\n            await importVariables({\n                collectionName: collectionRecord.collection,\n                modeName: collectionRecord.mode,\n                data: flatTokens\n            })\n            await delayAsync(5);\n\n            tokensImportedCount += Object.keys(flatTokens).length;\n            console.log(`Imported ${tokensImportedCount} out of ${tokensCountTotal}`);\n        }\n\n        if (collectionRecord.type == \"textStyles\") {\n            await importTextStyles(tokensDictionary);\n            await delayAsync(5);\n        }\n\n        if (collectionRecord.type == \"effectStyles\") {\n            await importEffectStyles(flatTokens, tokensDictionary);\n            await delayAsync(5);\n        }\n    }\n}\n\nfunction getSortFnByCollectionName(name: string) {\n    const references = {\n        \"Color Theme\": getColorTokensSortFn(),\n        \"Brand Variant\": getColorTokensSortFn(),\n        \"Component Colors\": getColorTokensSortFn(),\n        \"Opacity\": getAlphaNumTokensSortFn(),\n        \"Spacing\": getSizeTokensSortFn(),\n        \"Radii\": getSizeTokensSortFn(),\n        \"Global Sizing\": getAlphaNumTokensSortFn(),\n    }\n\n    return references[name];\n}","import { getColorSystemVersion, getGlobalNeutrals, upgradeTextPalette } from './color-tokens';\nimport * as typographyTokens from './typography-tokens';\nimport * as figlib from './utils/figma-library-variables';\nimport * as themeStore from './utils/themes-store';\n\nimport { renderAccents } from \"./color-generators/render-accents\";\nimport { generateNeutrals, renderNeutrals } from './color-generators/neutrals-palette-generator';\nimport { addToGlobalTokensDictionary } from './utils/token-references';\nimport { ConfigColors, ImportFormData } from './import-ui';\nimport { CollectionExportRecord, exportBrandVariantToJSON, exportToJSON, importFromJSON } from './import-export-json';\nimport { importAllTokens, importVariables, initiateImport } from './import-tokens';\nimport { createUpdateElevationComponents } from './effect-tokens';\nimport { delayAsync } from './utils/delay-async';\nimport { generateGlobalAccentPalette } from './color-generators/accent-palette-generator';\nimport { flattenObject } from './utils/flatten-object';\n\nconsole.clear();\n\ninterface MessagePayload {\n    type: string;\n    params?: ImportFormData;\n    exportJSONParams?: ExportEventParameters;\n    exportBrandParams?: ExportEventParameters;\n    importJSONParams?: ImportEventParameters;\n    options?: any;\n    data?: CollectionExportRecord[];\n    colorFormat?: 'hex' | 'hsl' | 'rgba';\n    colorName?: ConfigColors;\n    alertParams?: any,\n    fileName?: string;\n    tokenLibraryName?: string;\n}\n\nexport interface ImportEventParameters {\n    code?: 'string';\n    tokenLibraryName?: 'string';\n}\n\nexport interface ExportEventParameters {\n    jsonColorFormat?: 'hex' | 'hsl' | 'rgba';\n    brandColorFormat?: 'hex' | 'hsl' | 'rgba';\n    createColorTokens?: boolean;\n    createComponentTokens?: boolean;\n    createTypographyTokens?: boolean;\n    createSpacingTokens?: boolean;\n    createRadiiTokens?: boolean;\n}\n\nfunction checkImportOptions(params: ImportFormData): boolean {\n    return  params.createComponentTokens\n            || params.createColorTokens\n            || params.createElevationTokens\n            || params.createSpacingTokens\n            || params.createRadiiTokens\n            || params.createTypographyTokens\n            || params.createOpacityTokens\n            || params.createGlobalSizeTokens;\n}\nconst handlers = {\n    params: {},\n    message: {},\n    process: async function(message: MessagePayload) {\n        await this[message.type](message.params, message);\n    },\n\n    refreshUI: async function(params: ImportFormData) {\n        figma.ui.postMessage({\n            type: \"REFRESH_UI\",\n            data: {\n                colorSystemVersion: await getColorSystemVersion(),\n                customDarkMode: themeStore.isCustomDarkMode(),\n                params: params\n            }\n        })    \n    },\n    IMPORT: async function (params: ImportFormData, message: MessagePayload) {\n        themeStore.setTheme(params);\n        themeStore.save();\n\n        if(checkImportOptions(params) === false) {\n            figma.ui.postMessage(\"IMPORT_COMPLETED\");\n            return figma.notify('Psst, you may want to check your import options, seems like you turned everything OFF');\n        }\n\n        const colorSystemVersion = await getColorSystemVersion(true);\n        if(colorSystemVersion == 1) {\n            await this.UPGRADE_TEXT_COLORS(params, message);\n        }\n\n        await delayAsync(10);\n\n        await initiateImport();\n        await importAllTokens();\n\n    },\n\n    GET_EXPORT_DATA: async function (params: ImportFormData, message: MessagePayload) {\n        figma.ui.postMessage({ type: \"EXPORT_RESULT_PRESET\", exportRecords: themeStore.serialize() });\n        await exportToJSON(message.exportJSONParams, params).then(exportRecords => {\n            figma.ui.postMessage({ type: \"EXPORT_RESULT_JSON\", exportRecords });\n        });\n        await exportBrandVariantToJSON(message.exportBrandParams, params).then(exportRecords => {\n            figma.ui.postMessage({ type: \"EXPORT_RESULT_BRAND\", exportRecords });\n        });\n    },\n\n    IMPORT_JSON: async function (params: ImportFormData, message: MessagePayload) {\n        addToGlobalTokensDictionary({\n            ...getGlobalNeutrals(params),\n            ...typographyTokens.getTypographyTokens(params.baseFontSize, params.typeScale)\n        });\n\n        figlib.setSelectedLibrary(message.importJSONParams.tokenLibraryName);\n\n        await importFromJSON(message.data, params).catch((error: Error) => {\n            console.error(error);\n            figma.ui.postMessage(\"IMPORT_COMPLETED\");\n            figma.notify(error.message, { error: true });\n        });\n\n        figma.notify(`Figma variables has been imported`);\n        figma.ui.postMessage(\"IMPORT_COMPLETED\");\n    },\n\n    ALERT: async function (params: ImportFormData, message: MessagePayload) {\n        figma.notify(`${message.data}`, message.alertParams || {});\n    },\n\n    RENDER_ACCENTS: async function (params: ImportFormData, message: MessagePayload) {\n        await figma.loadFontAsync({ family: \"Inter\", style: \"Regular\" });\n        const frameLightPalette = renderAccents(params, 'Global Accents');\n\n        figma.currentPage.selection = [frameLightPalette];\n        figma.viewport.scrollAndZoomIntoView([frameLightPalette]);\n    },\n\n    RENDER_NEUTRALS: async function (params: ImportFormData, message: MessagePayload) {\n        await figma.loadFontAsync({ family: \"Inter\", style: \"Regular\" });\n        const neutralTokens = generateNeutrals(params);\n        const resultFrame = renderNeutrals(neutralTokens, `Global Neutrals`);\n        figma.currentPage.selection = [resultFrame];\n        figma.viewport.scrollAndZoomIntoView([resultFrame]);        \n    },\n\n    UPGRADE_TEXT_COLORS: async function (params: ImportFormData, message: MessagePayload) {\n        await upgradeTextPalette(params);\n        await this.refreshUI(params);\n    },\n\n    START_ELEVATION_COMPONENTS: async function (params: ImportFormData, message: MessagePayload) {\n        figma.ui.postMessage({\n            type: \"START_ELEVATION_COMPONENTS\",\n            data: {\n                pages: figma.root.children.map(node => node.name),\n                currentPage: figma.currentPage.name\n            }\n        })\n    },\n\n    CREATE_ELEVATION_COMPONENTS: async function (params: ImportFormData, message: MessagePayload) {\n        const page = message.options['componentPage'];\n        await createUpdateElevationComponents(params, page).catch((error: Error) => {\n            figma.notify(error.message, { error: true });\n        });\n    },\n\n    CENTER_WINDOW: function(message: MessagePayload) {\n        let pluginWidth = 520,\n            pluginHeight = 800,\n            zoom = figma.viewport.zoom,\n            centerX = Math.round(figma.viewport.center.x - (zoom / 2)) - pluginWidth / 2,\n            centerY = Math.round(figma.viewport.center.y - (zoom / 2)) - pluginHeight / 2;\n\n        figma.ui.reposition(centerX, centerY);    \n    },\n\n    UI_READY: async function (params: ImportFormData, message: MessagePayload) {\n        const colorSystemVersion = await getColorSystemVersion(true);\n        await figlib.getStoreData();\n        themeStore.load();\n\n        figma.ui.postMessage({\n            type: \"REFRESH_UI\",\n            data: {\n                colorSystemVersion,\n                customDarkMode: themeStore.isCustomDarkMode(),\n                params: themeStore.getTheme('light'),\n                tokenLibraries: figlib.serialize()\n            }\n        })\n    },\n\n    UPDATE: async function (params: ImportFormData, message: MessagePayload) {\n        themeStore.setTheme(params);\n\n        // switch (params.baseFontSize) {\n        //     default: {\n        //         figma.ui.resize(500, 800)\n        //         break;\n        //     }\n        //     case 'large': {\n        //         figma.ui.resize(560, 800)\n        //         break;\n        //     }\n        // }\n    },\n\n    RESET: async function (params: ImportFormData, message: MessagePayload) {\n        themeStore.resetDefaults();\n        await this.refreshUI(themeStore.getTheme(\"light\"));\n    },\n\n    UPDATE_ACTIVE_THEME: async function (params: ImportFormData, message: MessagePayload) {\n        const selectedThemeData = themeStore.getTheme(params.theme);\n\n        selectedThemeData.theme = params.theme;\n        await this.refreshUI(selectedThemeData);\n    },\n\n    MATCH_HUE_BRAND: async function (params: ImportFormData, message: MessagePayload) {\n        const brandColor = params.primary;\n        const brandHUE = params[brandColor];\n\n        params.hue = brandHUE;\n        themeStore.setTheme(params);\n        await this.refreshUI(params);\n    },\n\n    ENABLE_CUSTOM_DARK_MODE: async function(params: ImportFormData, message: MessagePayload) {\n        themeStore.enableCustomDarkMode();\n        await this.refreshUI(params);\n    },\n\n    DISABLE_CUSTOM_DARK_MODE: async function(params: ImportFormData, message: MessagePayload) {\n        themeStore.disableCustomDarkMode();\n        await this.refreshUI(params);\n    },\n\n    IMPORT_GLOBAL_ACCENT_VARIABLES: async function(params: ImportFormData, message: MessagePayload) {\n        const colors = flattenObject({\n            'global': {\n                'accent': generateGlobalAccentPalette(params)\n            }\n        })\n        await importVariables({\n            collectionName: 'Global Colors',\n            modeName: 'Default',\n            data: colors\n        });\n    },\n\n    IMPORT_GLOBAL_NEUTRAL_VARIABLES: async function(params: ImportFormData, message: MessagePayload) {\n        const colors = flattenObject({\n            'global': {\n                'neutral': getGlobalNeutrals(params)\n            }\n        })\n        await importVariables({\n            collectionName: 'Global Colors',\n            modeName: 'Default',\n            data: colors\n        });\n    }    \n}\n\nexport default function () {\n    run();\n}\n\nfunction run() {\n    figma.showUI(__html__, {\n        width: 520,\n        height: 800,\n        themeColors: true,\n    });\n    \n    figma.ui.onmessage = async (eventData: MessagePayload) => {\n        console.log(\"code received message\", eventData);\n\n        if(eventData.params?.hue == 0 && eventData.params?.saturation == 0) {\n            debugger\n        }\n\n        if(eventData.type in handlers) {\n            await handlers.process(eventData);\n        }\n        else {\n            console.log('Unsupported event type', eventData);\n        }\n    };\n}\n\nrun()","import plugmaMain from '/Users/pk/git/source-foundation/source-foundation/src/main.ts';\n    plugmaMain();"],"names":["plugmaViteExpect","fn","expect","plugmaExpect","defaultSettings","tokens","min","max","rgb","type","PI","mode","_input","hex","round","LAB_CONSTANTS","lab","pow","lum","interpolator","sin","cos","hcl","sqrt","atan2","lch","num","floor","hcg","hsi","rgb2hsl","hsl","rgb2hsv","hsv","oklab","oklch","colors","f","_pos","log","abs","limits","text","css","temp","bezier","brewer","random","store","serialize","collection","figlib.findVariableByName","scale","index","contrast","distance","name","input","base","compact","large","spacingScale","styles","getStyleByName","getLocalStyles","themeStore.getTheme","opacityTokens.opacity","sizingTokens.global","spacingTokens.getSpacingTokens","effectsTokens.getElevationTokens","typographyTokens.getTypographyTokens","typographyTokens.getTypScaleTokens","typographyTokens.typeFace","themeStore.isCustomDarkMode","themeStore.setTheme","themeStore.save","themeStore.serialize","figlib.setSelectedLibrary","figlib.getStoreData","themeStore.load","figlib.serialize","themeStore.resetDefaults","themeStore.enableCustomDarkMode","themeStore.disableCustomDarkMode","customFunctions.customShowUI"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","x_google_ignoreList":[0,1,2,3,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108]}